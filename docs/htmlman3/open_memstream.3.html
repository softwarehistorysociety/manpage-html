<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>open_memstream(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="open_memstream(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
  </script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>
<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>
          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>
          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>
  <div class="refentry">
    <a id="open-memstream.3" name="open-memstream.3" shape="rect"> </a>
    <div class="titlepage"> </div>
    <div class="refnamediv">
      <h2>Name</h2>
      <p>open_memstream, open_wmemstream — open a dynamic
      memory buffer stream</p>
    </div>
    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>
      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
        #include &lt;stdio.h&gt;</pre>
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">FILE
            *<strong>open_memstream</strong>(</code></td>
            <td rowspan="1" colspan="1">char **<var class="pdparam">ptr</var>,</td>
          </tr>
          <tr>
            <td rowspan="1" colspan="1"> </td>
            <td rowspan="1" colspan="1">size_t *<var class="pdparam">sizeloc</var><code>)</code>;</td>
          </tr>
        </table>
        <div class="funcprototype-spacer">
           
        </div>
      </div>
      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
        #include &lt;wchar.h&gt;</pre>
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">FILE
            *<strong>open_wmemstream</strong>(</code></td>
            <td rowspan="1" colspan="1">wchar_t **<var class="pdparam">ptr</var>,</td>
          </tr>
          <tr>
            <td rowspan="1" colspan="1"> </td>
            <td rowspan="1" colspan="1">size_t *<var class="pdparam">sizeloc</var><code>)</code>;</td>
          </tr>
        </table>
        <div class="funcprototype-spacer">
           
        </div>
      </div>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>
            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>
          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <div class="featuretests">
                <table style="border-collapse: collapse;">
                  <colgroup span="1">
                    <col span="1" />
                  </colgroup>
                  <thead>
                    <tr>
                      <th style="" rowspan="1" colspan="1">Feature Test Macro Requirements
                      for glibc (see <a class="link" href="../htmlman7/feature_test_macros.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">feature_test_macros</span>(7)</span></a>):</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">open_memstream</code>(),
                      <code class="function">open_wmemstream</code>():</td>
                    </tr>
                    <tr>
                      <td class="featuretestver" style="" rowspan="1" colspan="1">Since
                      glibc 2.10:</td>
                    </tr>
                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_POSIX_C_SOURCE</code>
                      &gt;= 200809L</td>
                    </tr>
                    <tr>
                      <td class="featuretestver" style="" rowspan="1" colspan="1">Before
                      glibc 2.10:</td>
                    </tr>
                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_GNU_SOURCE</code></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect1" name="open-memstream-3_sect1" shape="rect"> </a>
      <h2>DESCRIPTION</h2>
      <p>The <code class="function">open_memstream</code>()
      function opens a stream for writing to a memory buffer. The
      function dynamically allocates the buffer, and the buffer
      automatically grows as needed. Initially, the buffer has a
      size of zero. After closing the stream, the caller should
      <a class="link" href="../htmlman3/malloc.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">free</span>(3)</span></a> this buffer.</p>
      <p>The locations pointed to by <em class="parameter"><code>ptr</code></em> and <em class="parameter"><code>sizeloc</code></em> are used to report,
      respectively, the current location and the size of the
      buffer. The locations referred to by these pointers are
      updated each time the stream is flushed (<a class="link" href="../htmlman3/fflush.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fflush</span>(3)</span></a>) and when the
      stream is closed (<a class="link" href="../htmlman3/fclose.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fclose</span>(3)</span></a>). These values
      remain valid only as long as the caller performs no further
      output on the stream. If further output is performed, then
      the stream must again be flushed before trying to access
      these values.</p>
      <p>A null byte is maintained at the end of the buffer. This
      byte is <span class="emphasis"><em>not</em></span> included
      in the size value stored at <em class="parameter"><code>sizeloc</code></em>.</p>
      <p>The stream maintains the notion of a current position,
      which is initially zero (the start of the buffer). Each write
      operation implicitly adjusts the buffer position. The
      stream's buffer position can be explicitly changed with
      <a class="link" href="../htmlman3/fseek.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fseek</span>(3)</span></a> or <a class="link" href="../htmlman3/fseeko.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fseeko</span>(3)</span></a>. Moving the
      buffer position past the end of the data already written
      fills the intervening space with null characters.</p>
      <p>The <code class="function">open_wmemstream</code>() is
      similar to <code class="function">open_memstream</code>(),
      but operates on wide characters instead of bytes.</p>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect2" name="open-memstream-3_sect2" shape="rect"> </a>
      <h2>RETURN VALUE</h2>
      <p>Upon successful completion, <code class="function">open_memstream</code>() and <code class="function">open_wmemstream</code>() return a <span class="type">FILE</span> pointer. Otherwise, NULL is returned and
      <code class="varname">errno</code> is set to indicate the
      error.</p>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect3" name="open-memstream-3_sect3" shape="rect"> </a>
      <h2>VERSIONS</h2>
      <p><code class="function">open_memstream</code>() was already
      available in glibc 1.0.x. <code class="function">open_wmemstream</code>() is available since glibc
      2.4.</p>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect4" name="open-memstream-3_sect4" shape="rect"> </a>
      <h2>ATTRIBUTES</h2>
      <p>For an explanation of the terms used in this section, see
      <a class="link" href="../htmlman7/attributes.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">attributes</span>(7)</span></a>.</p>
      <div class="informaltable">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col class="c0" span="1" />
            <col class="c1" span="1" />
            <col class="c2" span="1" />
          </colgroup>
          <tbody>
            <tr>
              <td style="" align="left" rowspan="1" colspan="1">Interface</td>
              <td style="" align="left" rowspan="1" colspan="1">Attribute</td>
              <td style="" align="left" rowspan="1" colspan="1">Value</td>
            </tr>
            <tr>
              <td style="" align="left" rowspan="1" colspan="1">
                <p><code class="literal">open_memstream</code>(),</p>
                <p><code class="literal">open_wmemstream</code></p>
              </td>
              <td style="" align="left" rowspan="1" colspan="1">Thread safety</td>
              <td style="" align="left" rowspan="1" colspan="1">MT-Safe</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect5" name="open-memstream-3_sect5" shape="rect"> </a>
      <h2>CONFORMING TO</h2>
      <p>POSIX.1-2008. These functions are not specified in
      POSIX.1-2001, and are not widely available on other
      systems.</p>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect6" name="open-memstream-3_sect6" shape="rect"> </a>
      <h2>NOTES</h2>
      <p>There is no file descriptor associated with the file
      stream returned by these functions (i.e., <a class="link" href="../htmlman3/ferror.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fileno</span>(3)</span></a> will return an
      error if called on the returned stream).</p>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect7" name="open-memstream-3_sect7" shape="rect"> </a>
      <h2>BUGS</h2>
      <p>In glibc before version 2.7, seeking past the end of a
      stream created by <code class="function">open_memstream</code>() does not enlarge the
      buffer; instead the <a class="link" href="../htmlman3/fseek.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fseek</span>(3)</span></a> call fails,
      returning −1.</p>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect8" name="open-memstream-3_sect8" shape="rect"> </a>
      <h2>EXAMPLE</h2>
      <p>See <a class="link" href="../htmlman3/fmemopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fmemopen</span>(3)</span></a>.</p>
    </div>
    <div class="refsect1">
      <a id="open-memstream-3_sect9" name="open-memstream-3_sect9" shape="rect"> </a>
      <h2>SEE ALSO</h2>
      <p><a class="link" href="../htmlman3/fmemopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fmemopen</span>(3)</span></a>, <a class="link" href="../htmlman3/fopen.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">fopen</span>(3)</span></a>, <a class="link" href="../htmlman3/setbuf.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">setbuf</span>(3)</span></a></p>
    </div>
    <div class="colophon">
      <a id="open-memstream-3_sect10" name="open-memstream-3_sect10" shape="rect"> </a>
      <h2>COLOPHON</h2>
      <p>This page is part of release 4.07 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      https://www.kernel.org/doc/man−pages/.</p>
      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>
          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright 2005, 2012, 2016 Michael Kerrisk &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                  <br />
                  %%%LICENSE_START(GPL_NOVERSION_ONELINE)<br />
                  Distributed under the GPL.<br />
                  %%%LICENSE_END<br />
                  <br />
                  2008-12-04, Petr Baudis &lt;pasky<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>suse.cz&gt;: Document open_wmemstream()<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
