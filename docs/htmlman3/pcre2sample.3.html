<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>pcre2sample(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="pcre2sample(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
  </script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>
<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>
          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>
          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>
  <div class="refentry">
    <a id="pcre2sample.3" name="pcre2sample.3" shape="rect"> </a>
    <div class="titlepage"> </div>
    <div class="refnamediv">
      <h2>Name</h2>
      <p>PCRE2 — Perl-compatible regular expressions (revised
      API)</p>
    </div>
    <div class="refsect1">
      <a id="pcre2sample-3_sect1" name="pcre2sample-3_sect1" shape="rect"> </a>
      <h2>PCRE2 SAMPLE PROGRAM</h2>
      <p>A simple, complete demonstration program to get you
      started with using PCRE2 is supplied in the file <code class="filename">pcre2demo.c</code> in the <code class="function">src</code> directory in the PCRE2 distribution. A
      listing of this program is given in the <span class="citerefentry"><span class="refentrytitle">pcre2demo</span>(3)</span> documentation. If
      you do not have a copy of the PCRE2 distribution, you can
      save this listing to re-create the contents of <code class="filename">pcre2demo.c</code>.</p>
      <p>The demonstration program compiles the regular expression
      that is its first argument, and matches it against the
      subject string in its second argument. No PCRE2 options are
      set, and default character tables are used. If matching
      succeeds, the program outputs the portion of the subject that
      matched, together with the contents of any captured
      substrings.</p>
      <p>If the -g option is given on the command line, the program
      then goes on to check for further matches of the same regular
      expression in the same subject string. The logic is a little
      bit tricky because of the possibility of matching an empty
      string. Comments in the code explain what is going on.</p>
      <p>The code in <code class="filename">pcre2demo.c</code> is
      an 8-bit program that uses the PCRE2 8-bit library. It
      handles strings and characters that are stored in 8-bit code
      units. By default, one character corresponds to one code
      unit, but if the pattern starts with "(*UTF)", both it and
      the subject are treated as UTF-8 strings, where characters
      may occupy multiple code units.</p>
      <p>If PCRE2 is installed in the standard include and library
      directories for your operating system, you should be able to
      compile the demonstration program using a command like
      this:</p>
      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
cc -o pcre2demo pcre2demo.c -lpcre2-8
</pre>
      </div>
      <p>If PCRE2 is installed elsewhere, you may need to add
      additional options to the command line. For example, on a
      Unix-like system that has PCRE2 installed in <code class="filename">/usr/local</code>, you can compile the
      demonstration program using a command like this:</p>
      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
 cc -o pcre2demo -I/usr/local/include pcre2demo.c \
    -L/usr/local/lib -lpcre2-8
</pre>
      </div>
      <p>Once you have built the demonstration program, you can run
      simple tests like this:</p>
      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
 ./pcre2demo 'cat|dog' 'the cat sat on the mat'
 ./pcre2demo -g 'cat|dog' 'the dog sat on the cat'
</pre>
      </div>
      <p>Note that there is a much more comprehensive test program,
      called <code class="function">pcre2test</code>, which
      supports many more facilities for testing regular expressions
      using all three PCRE2 libraries (8-bit, 16-bit, and 32-bit,
      though not all three need be installed). The <span class="citerefentry"><span class="refentrytitle">pcre2demo</span>(3)</span> program is
      provided as a relatively simple coding example.</p>
      <p>If you try to run <span class="citerefentry"><span class="refentrytitle">pcre2demo</span>(3)</span> when PCRE2 is not
      installed in the standard library directory, you may get an
      error like this on some operating systems (e.g. Solaris):</p>
      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
ld.so.1: pcre2demo: fatal: libpcre2-8.so.0: open failed: No such file or directory
</pre>
      </div>
      <p>This is caused by the way shared library support works on
      those systems. You need to add</p>
      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
-R/usr/local/lib
</pre>
      </div>
      <p>(for example) to the compile command to get round this
      problem.</p>
    </div>
    <div class="refsect1">
      <a id="pcre2sample-3_sect2" name="pcre2sample-3_sect2" shape="rect"> </a>
      <h2>AUTHOR</h2>
      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
Philip Hazel
University Computing Service
Cambridge, England.
</pre>
      </div>
    </div>
    <div class="refsect1">
      <a id="pcre2sample-3_sect3" name="pcre2sample-3_sect3" shape="rect"> </a>
      <h2>REVISION</h2>
      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
Last updated: 02 February 2016
Copyright (c) 1997-2016 University of Cambridge.
</pre>
      </div>
      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>
          <thead>
            <tr>
              <th style="" rowspan="1" colspan="1">COPYRIGHT</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <p>This manual page is taken from the <a class="ulink" href="http://www.PCRE.org/" target="_top" shape="rect">PCRE library</a>, which is distributed under
                the BSD license.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
