<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 02:57:36 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PKCS8</title>

</head>
<body>

<h1 align="center">PKCS8</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#KEY FORMATS">KEY FORMATS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#PKCS#5 v1.5 and PKCS#12 algorithms.">PKCS#5 v1.5 and PKCS#12 algorithms.</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#STANDARDS">STANDARDS</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#HISTORY">HISTORY</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">openssl-pkcs8,
pkcs8 - PKCS#8 format private key conversion tool</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>openssl
pkcs8</b> [<b>-help</b>] [<b>-topk8</b>] [<b>-inform
PEM|DER</b>] [<b>-outform PEM|DER</b>] [<b>-in filename</b>]
[<b>-passin arg</b>] [<b>-out filename</b>] [<b>-passout
arg</b>] [<b>-iter count</b>] [<b>-noiter</b>] [<b>-rand
file...</b>] [<b>-writerand file</b>] [<b>-nocrypt</b>]
[<b>-traditional</b>] [<b>-v2 alg</b>] [<b>-v2prf alg</b>]
[<b>-v1 alg</b>] [<b>-engine id</b>] [<b>-scrypt</b>]
[<b>-scrypt_N N</b>] [<b>-scrypt_r r</b>] [<b>-scrypt_p
p</b>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>pkcs8</b> command processes private keys in PKCS#8
format. It can handle both unencrypted PKCS#8 PrivateKeyInfo
format and EncryptedPrivateKeyInfo format with a variety of
PKCS#5 (v1.5 and v2.0) and PKCS#12 algorithms.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>-help</b></p>

<p style="margin-left:17%;">Print out a usage message.</p>

<p style="margin-left:11%;"><b>-topk8</b></p>

<p style="margin-left:17%;">Normally a PKCS#8 private key
is expected on input and a private key will be written to
the output file. With the <b>-topk8</b> option the situation
is reversed: it reads a private key and writes a PKCS#8
format key.</p>

<p style="margin-left:11%;"><b>-inform DER|PEM</b></p>

<p style="margin-left:17%;">This specifies the input
format: see &quot; <small>KEY FORMATS&quot;</small> for more
details. The default format is <small>PEM.</small></p>

<p style="margin-left:11%;"><b>-outform DER|PEM</b></p>

<p style="margin-left:17%;">This specifies the output
format: see &quot; <small>KEY FORMATS&quot;</small> for more
details. The default format is <small>PEM.</small></p>

<p style="margin-left:11%;"><b>-traditional</b></p>

<p style="margin-left:17%;">When this option is present and
<b>-topk8</b> is not a traditional format private key is
written.</p>

<p style="margin-left:11%;"><b>-in filename</b></p>

<p style="margin-left:17%;">This specifies the input
filename to read a key from or standard input if this option
is not specified. If the key is encrypted a pass phrase will
be prompted for.</p>

<p style="margin-left:11%;"><b>-passin arg</b></p>

<p style="margin-left:17%;">The input file password source.
For more information about the format of <b>arg</b> see the
<b><small>PASS PHRASE ARGUMENTS</small></b> section in
<b>openssl</b>(1).</p>

<p style="margin-left:11%;"><b>-out filename</b></p>

<p style="margin-left:17%;">This specifies the output
filename to write a key to or standard output by default. If
any encryption options are set then a pass phrase will be
prompted for. The output filename should <b>not</b> be the
same as the input filename.</p>

<p style="margin-left:11%;"><b>-passout arg</b></p>

<p style="margin-left:17%;">The output file password
source. For more information about the format of <b>arg</b>
see the <b><small>PASS PHRASE ARGUMENTS</small></b> section
in <b>openssl</b>(1).</p>

<p style="margin-left:11%;"><b>-iter count</b></p>

<p style="margin-left:17%;">When creating new PKCS#8
containers, use a given number of iterations on the password
in deriving the encryption key for the PKCS#8 output. High
values increase the time required to brute-force a PKCS#8
container.</p>

<p style="margin-left:11%;"><b>-nocrypt</b></p>

<p style="margin-left:17%;">PKCS#8 keys generated or input
are normally PKCS#8 EncryptedPrivateKeyInfo structures using
an appropriate password based encryption algorithm. With
this option an unencrypted PrivateKeyInfo structure is
expected or output. This option does not encrypt private
keys at all and should only be used when absolutely
necessary. Certain software such as some versions of Java
code signing software used unencrypted private keys.</p>

<p style="margin-left:11%;"><b>-rand file...</b></p>

<p style="margin-left:17%;">A file or files containing
random data used to seed the random number generator.
Multiple files can be specified separated by an OS-dependent
character. The separator is <b>;</b> for MS-Windows,
<b>,</b> for OpenVMS, and <b>:</b> for all others.</p>

<p style="margin-left:11%;">[<b>-writerand file</b>]</p>

<p style="margin-left:17%;">Writes random data to the
specified <i>file</i> upon exit. This can be used with a
subsequent <b>-rand</b> flag.</p>

<p style="margin-left:11%;"><b>-v2 alg</b></p>

<p style="margin-left:17%;">This option sets the PKCS#5
v2.0 algorithm.</p>

<p style="margin-left:17%; margin-top: 1em">The <b>alg</b>
argument is the encryption algorithm to use, valid values
include <b>aes128</b>, <b>aes256</b> and <b>des3</b>. If
this option isn&rsquo;t specified then <b>aes256</b> is
used.</p>

<p style="margin-left:11%;"><b>-v2prf alg</b></p>

<p style="margin-left:17%;">This option sets the
<small>PRF</small> algorithm to use with PKCS#5 v2.0. A
typical value value would be <b>hmacWithSHA256</b>. If this
option isn&rsquo;t set then the default for the cipher is
used or <b>hmacWithSHA256</b> if there is no default.</p>

<p style="margin-left:17%; margin-top: 1em">Some
implementations may not support custom <small>PRF</small>
algorithms and may require the <b>hmacWithSHA1</b> option to
work.</p>

<p style="margin-left:11%;"><b>-v1 alg</b></p>

<p style="margin-left:17%;">This option indicates a PKCS#5
v1.5 or PKCS#12 algorithm should be used. Some older
implementations may not support PKCS#5 v2.0 and may require
this option. If not specified PKCS#5 v2.0 form is used.</p>

<p style="margin-left:11%;"><b>-engine id</b></p>

<p style="margin-left:17%;">Specifying an engine (by its
unique <b>id</b> string) will cause <b>pkcs8</b> to attempt
to obtain a functional reference to the specified engine,
thus initialising it if needed. The engine will then be set
as the default for all available algorithms.</p>

<p style="margin-left:11%;"><b>-scrypt</b></p>

<p style="margin-left:17%;">Uses the <b>scrypt</b>
algorithm for private key encryption using default
parameters: currently N=16384, r=8 and p=1 and
<small>AES</small> in <small>CBC</small> mode with a 256 bit
key. These parameters can be modified using the
<b>-scrypt_N</b>, <b>-scrypt_r</b>, <b>-scrypt_p</b> and
<b>-v2</b> options.</p>

<p style="margin-left:11%;"><b>-scrypt_N N -scrypt_r r
-scrypt_p p</b></p>

<p style="margin-left:17%;">Sets the scrypt <b>N</b>,
<b>r</b> or <b>p</b> parameters.</p>

<h2>KEY FORMATS
<a name="KEY FORMATS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Various
different formats are used by the pkcs8 utility. These are
detailed below.</p>

<p style="margin-left:11%; margin-top: 1em">If a key is
being converted from PKCS#8 form (i.e. the <b>-topk8</b>
option is not used) then the input file must be in PKCS#8
format. An encrypted key is expected unless <b>-nocrypt</b>
is included.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>-topk8</b> is not used and <b><small>PEM</small></b> mode
is set the output file will be an unencrypted private key in
PKCS#8 format. If the <b>-traditional</b> option is used
then a traditional format private key is written
instead.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>-topk8</b> is not used and <b><small>DER</small></b> mode
is set the output file will be an unencrypted private key in
traditional <small>DER</small> format.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>-topk8</b> is used then any supported private key can be
used for the input file in a format specified by
<b>-inform</b>. The output file will be encrypted PKCS#8
format using the specified encryption parameters unless
<b>-nocrypt</b> is included.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">By default,
when converting a key to PKCS#8 format, PKCS#5 v2.0 using
256 bit <small>AES</small> with <small>HMAC</small> and
<small>SHA256</small> is used.</p>

<p style="margin-left:11%; margin-top: 1em">Some older
implementations do not support PKCS#5 v2.0 format and
require the older PKCS#5 v1.5 form instead, possibly also
requiring insecure weak encryption algorithms such as 56 bit
<small>DES.</small></p>

<p style="margin-left:11%; margin-top: 1em">The encrypted
form of a <small>PEM</small> encode PKCS#8 files uses the
following headers and footers:</p>

<p style="margin-left:11%; margin-top: 1em">-----BEGIN
ENCRYPTED PRIVATE KEY----- <br>
-----END ENCRYPTED PRIVATE KEY-----</p>

<p style="margin-left:11%; margin-top: 1em">The unencrypted
form uses:</p>

<p style="margin-left:11%; margin-top: 1em">-----BEGIN
PRIVATE KEY----- <br>
-----END PRIVATE KEY-----</p>

<p style="margin-left:11%; margin-top: 1em">Private keys
encrypted using PKCS#5 v2.0 algorithms and high iteration
counts are more secure that those encrypted using the
traditional SSLeay compatible formats. So if additional
security is considered important the keys should be
converted.</p>

<p style="margin-left:11%; margin-top: 1em">It is possible
to write out <small>DER</small> encoded encrypted private
keys in PKCS#8 format because the encryption details are
included at an <small>ASN1</small> level whereas the
traditional format includes them at a <small>PEM</small>
level.</p>

<h2>PKCS#5 v1.5 and PKCS#12 algorithms.
<a name="PKCS#5 v1.5 and PKCS#12 algorithms."></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Various
algorithms can be used with the <b>-v1</b> command line
option, including PKCS#5 v1.5 and PKCS#12. These are
described in more detail below. <b><small><br>
PBE-MD2-DES PBE-MD5-DES</small></b></p>

<p style="margin-left:17%;">These algorithms were included
in the original PKCS#5 v1.5 specification. They only offer
56 bits of protection since they both use
<small>DES.</small></p>


<p style="margin-left:11%;"><small><b>PBE-SHA1-RC2-64</b></small>
, <b><small>PBE-MD2-RC2-64</small></b> ,
<b><small>PBE-MD5-RC2-64</small></b> ,
<b><small>PBE-SHA1-DES</small></b></p>

<p style="margin-left:17%;">These algorithms are not
mentioned in the original PKCS#5 v1.5 specification but they
use the same key derivation algorithm and are supported by
some software. They are mentioned in PKCS#5 v2.0. They use
either 64 bit <small>RC2</small> or 56 bit
<small>DES.</small></p>


<p style="margin-left:11%;"><small><b>PBE-SHA1-RC4-128</b></small>
, <b><small>PBE-SHA1-RC4-40</small></b> ,
<b><small>PBE-SHA1-3DES</small></b> ,
<b><small>PBE-SHA1-2DES</small></b> , <b><small><br>
PBE-SHA1-RC2-128</small></b> ,
<b><small>PBE-SHA1-RC2-40</small></b></p>

<p style="margin-left:17%;">These algorithms use the
PKCS#12 password based encryption algorithm and allow strong
encryption algorithms like triple <small>DES</small> or 128
bit <small>RC2</small> to be used.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Convert a
private key to PKCS#8 format using default parameters (
<small>AES</small> with 256 bit key and
<b>hmacWithSHA256</b>):</p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-in key.pem -topk8 -out enckey.pem</p>

<p style="margin-left:11%; margin-top: 1em">Convert a
private key to PKCS#8 unencrypted format:</p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-in key.pem -topk8 -nocrypt -out enckey.pem</p>

<p style="margin-left:11%; margin-top: 1em">Convert a
private key to PKCS#5 v2.0 format using triple
<small>DES:</small></p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-in key.pem -topk8 -v2 des3 -out enckey.pem</p>

<p style="margin-left:11%; margin-top: 1em">Convert a
private key to PKCS#5 v2.0 format using <small>AES</small>
with 256 bits in <small>CBC</small> mode and
<b>hmacWithSHA512</b> <small>PRF:</small></p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-in key.pem -topk8 -v2 aes-256-cbc -v2prf hmacWithSHA512
-out enckey.pem</p>

<p style="margin-left:11%; margin-top: 1em">Convert a
private key to PKCS#8 using a PKCS#5 1.5 compatible
algorithm ( <small>DES</small> ):</p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-in key.pem -topk8 -v1 PBE-MD5-DES -out enckey.pem</p>

<p style="margin-left:11%; margin-top: 1em">Convert a
private key to PKCS#8 using a PKCS#12 compatible algorithm
(3DES):</p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-in key.pem -topk8 -out enckey.pem -v1 PBE-SHA1-3DES</p>

<p style="margin-left:11%; margin-top: 1em">Read a
<small>DER</small> unencrypted PKCS#8 format private
key:</p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-inform DER -nocrypt -in key.der -out key.pem</p>

<p style="margin-left:11%; margin-top: 1em">Convert a
private key from any PKCS#8 encrypted format to traditional
format:</p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-in pk8.pem -traditional -out key.pem</p>

<p style="margin-left:11%; margin-top: 1em">Convert a
private key to PKCS#8 format, encrypting with
<small>AES-256</small> and with one million iterations of
the password:</p>

<p style="margin-left:11%; margin-top: 1em">openssl pkcs8
-in key.pem -topk8 -v2 aes-256-cbc -iter 1000000 -out
pk8.pem</p>

<h2>STANDARDS
<a name="STANDARDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Test vectors
from this PKCS#5 v2.0 implementation were posted to the
pkcs-tng mailing list using triple <small>DES, DES</small>
and <small>RC2</small> with high iteration counts, several
people confirmed that they could decrypt the private keys
produced and Therefore it can be assumed that the PKCS#5
v2.0 implementation is reasonably accurate at least as far
as these algorithms are concerned.</p>

<p style="margin-left:11%; margin-top: 1em">The format of
PKCS#8 <small>DSA</small> (and other) private keys is not
well documented: it is hidden away in PKCS#11 v2.01, section
11.9. OpenSSL&rsquo;s default <small>DSA</small> PKCS#8
private key format complies with this standard.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There should be
an option that prints out the encryption algorithm in use
and other details such as the iteration count.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>dsa</b>(1),
<b>rsa</b>(1), <b>genrsa</b>(1), <b>gendsa</b>(1)</p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>-iter</b> option was added in OpenSSL 1.1.0.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
2000-2018 The OpenSSL Project Authors. All Rights
Reserved.</p>

<p style="margin-left:11%; margin-top: 1em">Licensed under
the OpenSSL license (the &quot;License&quot;). You may not
use this file except in compliance with the License. You can
obtain a copy in the file <small>LICENSE</small> in the
source distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
<hr>
</body>
</html>
