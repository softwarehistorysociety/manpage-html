<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 02:50:30 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>IPTABLES-APPLY</title>

</head>
<body>

<h1 align="center">IPTABLES-APPLY</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#LEGALESE">LEGALESE</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">iptables-apply
- a safer way to update iptables remotely</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>iptables-apply</b>
[-<b>hV</b>] [<b>-t</b> <i>timeout</i>] [<b>-w</b>
<i>savefile</i>] {[<i>rulesfile]|-c [runcmd]}</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">iptables-apply
will try to apply a new rulesfile (as output by
iptables-save, read by iptables-restore) or run a command to
configure iptables and then prompt the user whether the
changes are okay. If the new iptables rules cut the existing
connection, the user will not be able to answer
affirmatively. In this case, the script rolls back to the
previous working iptables rules after the timeout
expires.</p>

<p style="margin-left:11%; margin-top: 1em">Successfully
applied rules can also be written to savefile and later used
to roll back to this state. This can be used to implement a
store last good configuration mechanism when experimenting
with an iptables setup script: iptables-apply -w
/etc/network/iptables.up.rules -c
/etc/network/iptables.up.run</p>

<p style="margin-left:11%; margin-top: 1em">When called as
ip6tables-apply, the script will use ip6tables-save/-restore
and IPv6 default values instead. Default value for rulesfile
is &rsquo;/etc/network/iptables.up.rules&rsquo;.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>-t</b>
<i>seconds</i>, <b>--timeout</b> <i>seconds</i></p>

<p style="margin-left:22%;">Sets the timeout in seconds
after which the script will roll back to the previous
ruleset (default: 10).</p>

<p style="margin-left:11%;"><b>-w</b> <i>savefile</i>,
<b>--write</b> <i>savefile</i></p>

<p style="margin-left:22%;">Specify the savefile where
successfully applied rules will be written to (default if
empty string is given: /etc/network/iptables.up.rules).</p>

<p style="margin-left:11%;"><b>-c</b> <i>runcmd</i>,
<b>--command</b> <i>runcmd</i></p>

<p style="margin-left:22%;">Run command runcmd to configure
iptables instead of applying a rulesfile (default:
/etc/network/iptables.up.run).</p>

<p style="margin-left:11%;"><b>-h</b>, <b>--help</b></p>

<p style="margin-left:22%;">Display usage information.</p>

<p style="margin-left:11%;"><b>-V</b>, <b>--version</b></p>

<p style="margin-left:22%;">Display version
information.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>iptables-restore</b>(8),
<b>iptables-save</b>(8), <b>iptables</b>(8).</p>

<h2>LEGALESE
<a name="LEGALESE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Original
iptables-apply - Copyright 2006 Martin F. Krafft
&lt;madduck@madduck.net&gt;. Version 1.1 - Copyright 2010 GW
&lt;gw.2010@tnode.com or http://gw.tnode.com/&gt;.</p>

<p style="margin-left:11%; margin-top: 1em">This manual
page was written by Martin F. Krafft
&lt;madduck@madduck.net&gt; and extended by GW
&lt;gw.2010@tnode.com or http://gw.tnode.com/&gt;.</p>

<p style="margin-left:11%; margin-top: 1em">Permission is
granted to copy, distribute and/or modify this document
under the terms of the Artistic License 2.0.</p>
<hr>
</body>
</html>
