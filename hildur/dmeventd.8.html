<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 02:38:11 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DMEVENTD</title>

</head>
<body>

<h1 align="center">DMEVENTD</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#LVM PLUGINS">LVM PLUGINS</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">dmeventd
&mdash; Device-mapper event daemon</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>dmeventd</b>
[<b>-d</b> [<b>-d</b> [<b>-d</b>]]] [<b>-f</b>] [<b>-h</b>]
[<b>-l</b>] [<b>-R</b>] [<b>-V</b>] [<b>-?</b>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">dmeventd is the
event monitoring daemon for device-mapper devices. Library
plugins can register and carry out actions triggered when
particular events occur.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-d</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:22%;">Repeat from 1 to 3 times (
<b>-d</b>, <b>-dd</b>, <b>-ddd</b> ) to increase the detail
of debug messages sent to syslog. Each extra d adds more
debugging information.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-f</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:22%;">Don&rsquo;t fork, run in the
foreground.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-h</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:22%;">Show help information.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-l</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:22%;">Log through stdout and stderr
instead of syslog. This option works only with option -f,
otherwise it is ignored.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-?</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:22%;">Show help information on
stderr.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-R</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:22%;">Replace a running dmeventd
instance. The running dmeventd must be version 2.02.77 or
newer. The new dmeventd instance will obtain a list of
devices and events to monitor from the currently running
daemon.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-V</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:22%;">Show version of dmeventd.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<h2>LVM PLUGINS
<a name="LVM PLUGINS"></a>
</h2>
<td width="11%"></td>
<td width="9%"></td>
<td width="80%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>Mirror</b></p></td>
<td width="80%">
</td></tr>
</table>

<p style="margin-left:22%;">Attempts to handle device
failure automatically. See <b>lvm.conf</b>(5).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>Raid</b></p></td>
<td width="83%">
</td></tr>
</table>

<p style="margin-left:22%;">Attempts to handle device
failure automatically. See <b>lvm.conf</b>(5).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p style="margin-top: 1em"><b>Snapshot</b></p></td>
<td width="77%">
</td></tr>
</table>

<p style="margin-left:22%;">Monitors how full a snapshot is
becoming and emits a warning to syslog when it exceeds 80%
full. The warning is repeated when 85%, 90% and 95% of the
snapshot is filled. See <b>lvm.conf</b>(5). Snapshot which
runs out of space gets invalid and when it is mounted, it
gets umounted if possible.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>Thin</b></p></td>
<td width="83%">
</td></tr>
</table>

<p style="margin-left:22%;">Monitors how full a thin pool
data and metadata is becoming and emits a warning to syslog
when it exceeds 80% full. The warning is repeated when more
then 85%, 90% and 95% of the thin pool is filled. See
<b>lvm.conf</b>(5). When a thin pool fills over 50% (data or
metadata) thin plugin calls configured
<i>dmeventd/thin_command</i> with every 5% increase. With
default setting it calls internal <b>lvm lvextend
--use-policies</b> to resize thin pool when it&rsquo;s been
filled above configured threshold
<i>activation/thin_pool_autoextend_threshold</i>. If the
command fails, dmeventd thin plugin will keep retrying
execution with increasing time delay between retries upto 42
minutes. User may also configure external command to support
more advanced maintenance operations of a thin pool. Such
external command can e.g. remove some unneeded snapshots,
use <b>fstrim</b>(8) to free recover space in a thin pool,
but also can use <b>lvextend --use-policies</b> if other
actions have not released enough space. Command is executed
with environmental variable <b>LVM_RUN_BY_DMEVENTD=1</b> so
any lvm2 command executed in this environment will not try
to interact with dmeventd. To see the fullness of a thin
pool command may check these two environmental variables
<b>DMEVENTD_THIN_POOL_DATA</b> and
<b>DMEVENTD_THIN_POOL_METADATA</b>. Command can also read
status with tools like <b>lvs</b>(8).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>Vdo</b></p></td>
<td width="85%">
</td></tr>
</table>

<p style="margin-left:22%;">Monitors how full a VDO pool
data is becoming and emits a warning to syslog when it
exceeds 80% full. The warning is repeated when more then
85%, 90% and 95% of the VDO pool is filled. See
<b>lvm.conf</b>(5). When a VDO pool fills over 50% vdo
plugin calls configured <i>dmeventd/vdo_command</i> with
every 5% increase. With default setting it calls internal
<b>lvm lvextend --use-policies</b> to resize VDO pool when
it&rsquo;s been filled above the configured threshold
<i>activation/vdo_pool_autoextend_threshold</i>. If the
command fails, dmeventd vdo plugin will keep retrying
execution with increasing time delay between retries upto 42
minutes. User may also configure external command to support
more advanced maintenance operations of a VDO pool. Such
external command can e.g. remove some unneeded space with
<b>fstrim</b>(8), but also can use <b>lvextend
--use-policies</b> if other actions have not released enough
space. Command is executed with environmental variable
<b>LVM_RUN_BY_DMEVENTD=1</b> so any lvm2 command executed in
this environment will not try to interact with dmeventd. To
see the fullness of a VDO pool command may check this
environmental variable <b>DMEVENTD_VDO_POOL</b>. Command can
also read status with tools like <b>lvs</b>(8).</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>DMEVENTD_THIN_POOL_DATA</b></p>

<p style="margin-left:22%;">Variable is set by thin plugin
and is available to executed program. Value present actual
usage of thin pool data volume. Variable is not set when
error event is processed.</p>


<p style="margin-left:11%;"><b>DMEVENTD_THIN_POOL_METADATA</b></p>

<p style="margin-left:22%;">Variable is set by thin plugin
and is available to executed program. Value present actual
usage of thin pool metadata volume. Variable is not set when
error event is processed.</p>

<p style="margin-left:11%;"><b>DMEVENTD_VDO_POOL</b></p>

<p style="margin-left:22%;">Variable is set by vdo plugin
and is available to executed program. Value present actual
usage of VDO pool data volume. Variable is not set when
error event is processed.</p>

<p style="margin-left:11%;"><b>LVM_RUN_BY_DMEVENTD</b></p>

<p style="margin-left:22%;">Variable is set by thin and vdo
plugin to prohibit recursive interation with dmeventd by any
executed lvm2 command from a thin_command, vdo_command
environment.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>lvm</b>(8),
<b>lvm.conf</b>(5)</p>
<hr>
</body>
</html>
