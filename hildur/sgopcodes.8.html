<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 03:05:20 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SG_OPCODES</title>

</head>
<body>

<h1 align="center">SG_OPCODES</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#OLDER COMMAND LINE OPTIONS">OLDER COMMAND LINE OPTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">sg_opcodes -
report supported SCSI commands or task management
functions</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sg_opcodes</b>
[<i>--alpha</i>] [<i>--compact</i>] [<i>--enumerate</i>]
[<i>--help</i>] [<i>--hex</i>] [<i>--mask</i>]
[<i>--mlu</i>] [<i>--no-inquiry</i>] [<i>--opcode=OP</i>]
[<i>--pdt=DT</i>] [<i>--raw</i>] [<i>--rctd</i>]
[<i>--repd</i>] [<i>--sa=SA</i>] [<i>--tmf</i>]
[<i>--unsorted</i>] [<i>--verbose</i>] [<i>--version</i>]
<i>DEVICE</i></p>


<p style="margin-left:11%; margin-top: 1em"><b>sg_opcodes</b>
[<i>-a</i>] [<i>-c</i>] [<i>-e</i>] [<i>-H</i>] [<i>-m</i>]
[<i>-M</i>] [<i>-n</i>] [<i>-o=OP</i>] [<i>-p=DT</i>]
[<i>-q</i>] [<i>-R</i>] [<i>-s=SA</i>] [<i>-t</i>]
[<i>-u</i>] [<i>-v</i>] [<i>-V</i>] [<i>-?</i>]
<i>DEVICE</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This utility
sends a SCSI REPORT SUPPORTED OPERATION CODES or a REPORT
SUPPORTED TASK MANAGEMENT FUNCTIONS command to the
<i>DEVICE</i> and then outputs the response. The default
action is to report supported operation codes. In this mode
it will either list all supported commands or give detailed
information on a specific command identified by the
<i>--opcode=OP</i> option (perhaps with additional
information from the <i>--sa=SA</i> option).</p>

<p style="margin-left:11%; margin-top: 1em">The name of a
SCSI command depends on its peripheral device type (e.g. a
disk). The REPORT SUPPORTED OPERATION CODES and REPORT
SUPPORTED TASK MANAGEMENT FUNCTIONS commands are not
supported in the MMC command set for CD and DVD devices.
This utility does an INQUIRY to obtain the peripheral device
type and prints out the vendor, product and revision
strings.</p>

<p style="margin-left:11%; margin-top: 1em">A similar
facility to query supported operation codes previously was
available via the CmdDt bit in the SCSI INQUIRY command (see
sg_inq(8)). However that facility was made obsolete and
replaced by the REPORT SUPPORTED OPERATION CODES command in
SPC-3 (revision 4) during February 2002.</p>

<p style="margin-left:11%; margin-top: 1em">This utility
supports two command line syntaxes, the preferred one is
shown first in the synopsis and explained in this section. A
later section on the old command line syntax outlines the
second group of options.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Arguments to
long options are mandatory for short options as well.
<b><br>
-a</b>, <b>--alpha</b></p>

<p style="margin-left:22%;">when all supported commands are
being listed there is no requirement for the device server
(i.e. the <i>DEVICE</i>) to sort the list of commands. When
this option is given the list of supported commands is
sorted by name (alphabetically). When this option and the
<b>--unsorted</b> option are both _not_ given then the list
of supported commands is sorted numerically (first by
operation code and then by service action).</p>

<p style="margin-left:11%;"><b>-c</b>, <b>--compact</b></p>

<p style="margin-left:22%;">some command names, especially
those associated with some service actions, are getting
longer. This may cause line wrap in the one line per command
mode on some terminals. When this option is given the opcode
and service action fields are combined into a single field
with the service action, prefixed by a comma shown directly
after the opcode. If there is no service action associated
with the command, then the comma and the service action are
not shown after the opcode. The CDB size field is not shown
when this option is given.</p>

<p style="margin-left:11%;"><b>-e</b>,
<b>--enumerate</b></p>

<p style="margin-left:22%;">this option prints the name of
the SCSI command based on the given opcode, peripheral
device type and optionally the service action. If given,
<i>DEVICE</i> is ignored. The opcode, peripheral device type
and service action default to zero if not given. Thus if
this option is the only option given then &quot;Test Unit
ready&quot; is output since its opcode is 0, it has no
service action and it is common to all peripheral device
types since it is defined in the SCSI Primary Commands (SPC)
standard(s).</p>

<p style="margin-left:11%;"><b>-h</b>, <b>--help</b></p>

<p style="margin-left:22%;">outputs the usage message
summarizing command line options then exits. Ignores
<i>DEVICE</i> if given.</p>

<p style="margin-left:11%;"><b>-H</b>, <b>--hex</b></p>

<p style="margin-left:22%;">outputs the response in ASCII
hexadecimal to stdout.</p>

<p style="margin-left:11%;"><b>-m</b>, <b>--mask</b></p>

<p style="margin-left:22%;">additionally prints out the cdb
mask in hex. So a 12 byte cdb will have a 12 byte
hexadecimal mask. If the hexadecimal is expanded (mentally)
to binary then a &quot;1&quot; means the corresponding
position in the cdb may be set. And &quot;0&quot; means the
corresponding position in the cdb must not be set. For
&quot;0&quot; mask positions that a user tries to set in a
cdb, the device may either ignore it or report an error,
typically with a sense key of &quot;illegal
request&quot;.</p>

<p style="margin-left:11%;"><b>-M</b>, <b>--mlu</b></p>

<p style="margin-left:22%;">additionally prints out an
indication (0 or 1) whether the command effects all logical
units in the containing target. MLU (Multiple Logical Units)
is a bit in the REPORT SUPPORTED OPERATION CODES response
introduced by proposal 18-045r1 (and possibly in spc5r20).
Without the option, the default output format which lists
all opcodes, does not include a MLU indication.</p>

<p style="margin-left:11%;"><b>-n</b>,
<b>--no-inquiry</b></p>

<p style="margin-left:22%;">Prior to calling a SCSI REPORT
SUPPORTED OPERATION CODES or a REPORT SUPPORTED TASK
MANAGEMENT FUNCTIONS command, a SCSI INQUIRY command is
performed. The reason is to determine the peripheral device
type (pdt) of the <i>DEVICE</i> as this is helpful in
translating operation codes to the command names. By default
this utility prints a summary of INQUIRY command response on
stdout. If this option (or the <i>--raw</i> option) is given
then that summary is not printed on stdout.</p>

<p style="margin-left:11%;"><b>-O</b>, <b>--old</b></p>

<p style="margin-left:22%;">Switch to older style options.
Please use as first option.</p>

<p style="margin-left:11%;"><b>-o</b>,
<b>--opcode</b>=<i>OP</i></p>

<p style="margin-left:22%;">the <i>DEVICE</i> will be
queried for the given operation code (i.e. the <i>OP</i>
value) which is the first byte of a SCSI command. <i>OP</i>
is decimal unless prefixed by &quot;0x&quot; or it has a
trailing &quot;h&quot;. <i>OP</i> should be in the range 0
to 255 (0xff) inclusive. When this option is not given then
all available SCSI commands supported by the <i>DEVICE</i>
are listed.</p>

<p style="margin-left:11%;"><b>-p</b>,
<b>--pdt</b>=<i>DT</i></p>

<p style="margin-left:22%;">where <i>DT</i> is the
peripheral device type. This is used together with the
<i>--enumerate</i> to differentiate when a command opcode
(and perhaps service action) is shared by multiple device
types. <br>
This option may also be used with the <i>--no-inquiry</i>
option to suppress this utility doing an INQUIRY command
since the main reason for doing that is to find the
peripheral device type of the <i>DEVICE</i>.</p>

<p style="margin-left:11%;"><b>-r</b>, <b>--raw</b></p>

<p style="margin-left:22%;">output the response in binary
to stdout. Error messages and warnings, if any, are sent to
stderr.</p>

<p style="margin-left:11%;"><b>-R</b>, <b>--rctd</b></p>

<p style="margin-left:22%;">set report command timeout
descriptor (RCTD) bit in the cdb. The response may or may
not contain command timeout descriptors. If available they
are output. If supported there are two values: a nominal
command timeout and a recommended command timeout. Both have
units of seconds. A value of zero means that no timeout is
indicated and this is shown in the corresponding decoded
output as &quot;-&quot;.</p>

<p style="margin-left:11%;"><b>-q</b>, <b>--repd</b></p>

<p style="margin-left:22%;">set read extended parameter
data (REPD) bit in the report task management functions cdb.
16 bytes rather than the default 4 bytes expected in the
response. This was added in SPC-4 (revision 26).</p>

<p style="margin-left:11%;"><b>-s</b>,
<b>--sa</b>=<i>SA</i></p>

<p style="margin-left:22%;">the <i>DEVICE</i> will be
queried for a command with the given service action (i.e.
the <i>SA</i> value). Used in conjunction with the
<i>--opcode=OP</i> option. If this option is not given,
<i>--opcode=OP</i> is given and the command in question does
have a service action then a value of 0 will be assumed.
<i>SA</i> is decimal and expected to be in the range 0 to
65535 (0xffff) inclusive.</p>

<p style="margin-left:11%;"><b>-t</b>, <b>--tmf</b></p>

<p style="margin-left:22%;">list supported task management
functions. This is done with the SCSI REPORT SUPPORTED TASK
MANAGEMENT FUNCTIONS command. When this option is chosen the
<i>--alpha</i>, <i>--opcode=OP</i>, <i>--rctd</i>,
<i>--sa=SA</i> and <i>--unsorted</i> options are
ignored.</p>

<p style="margin-left:11%;"><b>-u</b>,
<b>--unsorted</b></p>

<p style="margin-left:22%;">when all supported commands are
being listed there is no requirement for the device server
(i.e. the <i>DEVICE</i>) to sort the list of commands. When
this option is given the list of supported commands is in
the order given by the <i>DEVICE</i>. When this option is
not given the supported commands are sorted numerically
(first by operation code and then by service action).</p>

<p style="margin-left:11%;"><b>-v</b>, <b>--verbose</b></p>

<p style="margin-left:22%;">increase level of verbosity.
Can be used multiple times.</p>

<p style="margin-left:11%;"><b>-V</b>, <b>--version</b></p>

<p style="margin-left:22%;">print out version string then
exit.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As of SPC-5
revision 8 the recognized task management functions are:
abort set, abort task set, clear ACA, clear task set,
logical unit reset, query task, query asynchronous event,
query task set, and I_T nexus reset. In SPC-4 revision 26
target reset and wakeup task management functions were made
obsolete.</p>

<p style="margin-left:11%; margin-top: 1em">In the 2.4
series of Linux kernels the <i>DEVICE</i> must be a SCSI
generic (sg) device. In the 2.6 series block devices (e.g.
SCSI disks and DVD drives) can also be specified. For
example &quot;sg_opcodes /dev/sda&quot; will work in the 2.6
series kernels.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The exit status
of sg_opcodes is 0 when it is successful. Otherwise see the
sg3_utils(8) man page.</p>

<h2>OLDER COMMAND LINE OPTIONS
<a name="OLDER COMMAND LINE OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The options in
this section were the only ones available prior to sg3_utils
version 1.23 . Since then this utility defaults to the newer
command line options which can be overridden by using
<i>--old</i> (or <i>-O</i>) as the first option. See the
ENVIRONMENT VARIABLES section for another way to force the
use of these older command line options.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-a</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>sort command alphabetically. Equivalent to
<i>--alpha</i> in main description.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-c</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>see the <i>--compact</i> option above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-e</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>see the <i>--enumerate</i> option above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-H</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>see the <i>--hex</i> option above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>see the <i>--mask</i> option above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>don&rsquo;t print a summary of the SCSI INQUIRY response
on stdout.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-N</b>, <b>--new</b></p>

<p style="margin-left:22%;">Switch to the newer style
options.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-o</b>=<i>OP</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>the <i>DEVICE</i> will be queried for the given
operation code (i.e. <i>OP</i>) which is the first byte of a
SCSI command. <i>OP</i> is hexadecimal and expected to be in
the range 0 to ff inclusive. When this option is not given
then all available SCSI commands supported by the
<i>DEVICE</i> are listed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-p</b>=<i>DT</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>see the <i>--pdt=DT</i> option above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-q</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>set the read extended parameter data (REPD) bit in
report TMF cdb. Equivalent to <i>--repd</i> in main
description.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-R</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>set the report command timeout descriptor (RCTD) bit in
cdb. Equivalent to <i>--rctd</i> in main description.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-s</b>=<i>SA</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>the <i>DEVICE</i> will be queried for a command with the
given service action (i.e. <i>SA</i>). Used in conjunction
with the <i>-o=OP</i> option. If this option is not given,
<i>-o=OP</i> is given and the command in question does have
a service action then a value of 0 will be assumed.
<i>SA</i> is hexadecimal and expected to be in the range 0
to ffff inclusive.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-t</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>list supported task management functions. Equivalent to
<i>--tmf</i> in the main description.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-u</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>output all supported commands in the order given by
<i>DEVICE</i>. Equivalent to <i>--unsorted</i> in main
description.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-v</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>increase level of verbosity. Can be used multiple
times.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-V</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>print out version string then exit.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>-?</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>output usage message. Ignore all other parameters.</p></td></tr>
</table>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The examples in
this page use Linux device names. For suitable device names
in other supported Operating Systems see the sg3_utils(8)
man page.</p>

<p style="margin-left:11%; margin-top: 1em">To see the
information about a specific command give its operation code
to the &rsquo;--op=&rsquo; option. A command line invocation
is shown first followed by a typical response:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_opcodes
--op=93h /dev/sdb</p>

<p style="margin-left:11%; margin-top: 1em">Opcode=0x93
<br>
Command_name: Write same(16) <br>
Command supported [conforming to SCSI standard] <br>
Usage data: 93 e2 00 00 00 00 ff ff ff ff 00 00 ff ff 00
00</p>

<p style="margin-left:11%; margin-top: 1em">The next
example shows the supported task management functions:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_opcodes
--tmf -n /dev/sdb</p>

<p style="margin-left:11%; margin-top: 1em">Task Management
Functions supported by device: <br>
Abort task <br>
Abort task set <br>
Clear ACA <br>
Clear task set <br>
Logical unit reset <br>
Query task</p>

<p style="margin-left:11%; margin-top: 1em">Enumerate can
be used to look up a SCSI command name in the absence of a
device that supports that command. The opcode and service
action (if required) should be supplied:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_opcodes
--enumerate --op=0x9b,0xa</p>

<p style="margin-left:11%; margin-top: 1em">SCSI command:
<br>
Read buffer(16), read data from echo buffer</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Since sg3_utils
version 1.23 the environment variable SG3_UTILS_OLD_OPTS can
be given. When it is present this utility will expect the
older command line options. So the presence of this
environment variable is equivalent to using <i>--old</i> (or
<i>-O</i>) as the first command line option.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Written by
Douglas Gilbert</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report bugs to
&lt;dgilbert at interlog dot com&gt;.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2004-2018 Douglas Gilbert <br>
This software is distributed under the GPL version 2. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sg_inq(sg3_utils)</b></p>
<hr>
</body>
</html>
