<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 03:12:28 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>VGCFGRESTORE</title>

</head>
<body>

<h1 align="center">VGCFGRESTORE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#USAGE">USAGE</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#VARIABLES">VARIABLES</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">vgcfgrestore -
Restore volume group configuration</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>vgcfgrestore</b>
<i>option_args position_args</i> <br>
[ <i>option_args</i> ] <br>
[ <i>position_args</i> ]</p>


<p style="margin-left:11%; margin-top: 1em"><b>--commandprofile</b>
<i>String</i> <b><br>
--config</b> <i>String</i> <b><br>
-d</b>|<b>--debug <br>
--driverloaded y</b>|<b>n <br>
-f</b>|<b>--file</b> <i>String</i> <b><br>
--force <br>
-h</b>|<b>--help <br>
-l</b>|<b>--list <br>
--lockopt</b> <i>String</i> <b><br>
--longhelp <br>
-M</b>|<b>--metadatatype lvm2 <br>
--nolocking <br>
--profile</b> <i>String</i> <b><br>
-q</b>|<b>--quiet <br>
-t</b>|<b>--test <br>
-v</b>|<b>--verbose <br>
--version <br>
-y</b>|<b>--yes</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">vgcfgrestore
restores the metadata of a VG from a text back up file
produced by <b>vgcfgbackup</b>. This writes VG metadata onto
the devices specifed in back up file.</p>

<p style="margin-left:11%; margin-top: 1em">A back up file
can be specified with <b>--file</b>. If no backup file is
specified, the most recent one is used. Use <b>--list</b>
for a list of the available back up and archive files of a
VG.</p>

<p style="margin-left:11%; margin-top: 1em">WARNING: When a
VG contains thin pools, changes to thin metadata cannot be
reverted, and data loss may occur if thin metadata has
changed. The force option is required to restore in this
case.</p>

<h2>USAGE
<a name="USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Restore VG
metadata from last backup.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgcfgrestore</b>
<i>VG</i></p>

<p style="margin-left:17%;">[ COMMON_OPTIONS ]</p>

<p style="margin-left:11%;">-</p>

<p style="margin-left:11%; margin-top: 1em">Restore VG
metadata from specified file.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgcfgrestore
-f</b>|<b>--file</b> <i>String VG</i></p>

<p style="margin-left:17%;">[ COMMON_OPTIONS ]</p>

<p style="margin-left:11%;">-</p>

<p style="margin-left:11%; margin-top: 1em">List all VG
metadata backups.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgcfgrestore
-l</b>|<b>--list</b> <i>VG</i></p>

<p style="margin-left:17%;">[ COMMON_OPTIONS ]</p>

<p style="margin-left:11%;">-</p>

<p style="margin-left:11%; margin-top: 1em">List one VG
metadata backup file.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgcfgrestore
-l</b>|<b>--list -f</b>|<b>--file</b> <i>String</i></p>

<p style="margin-left:17%;">[ COMMON_OPTIONS ] <br>
[ <i>VG</i> ]</p>

<p style="margin-left:11%;">-</p>

<p style="margin-left:11%; margin-top: 1em">Common options
for command:</p>

<p style="margin-left:17%;">[ <b>-M</b>|<b>--metadatatype
lvm2</b> ] <br>
[ <b>--force</b> ]</p>

<p style="margin-left:11%; margin-top: 1em">Common options
for lvm:</p>

<p style="margin-left:17%;">[ <b>-d</b>|<b>--debug</b> ]
<br>
[ <b>-h</b>|<b>--help</b> ] <br>
[ <b>-q</b>|<b>--quiet</b> ] <br>
[ <b>-t</b>|<b>--test</b> ] <br>
[ <b>-v</b>|<b>--verbose</b> ] <br>
[ <b>-y</b>|<b>--yes</b> ] <br>
[ <b>--commandprofile</b> <i>String</i> ] <br>
[ <b>--config</b> <i>String</i> ] <br>
[ <b>--driverloaded y</b>|<b>n</b> ] <br>
[ <b>--lockopt</b> <i>String</i> ] <br>
[ <b>--longhelp</b> ] <br>
[ <b>--nolocking</b> ] <br>
[ <b>--profile</b> <i>String</i> ] <br>
[ <b>--version</b> ]</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="35%">


<p style="margin-top: 1em"><b>--commandprofile</b>
<i>String</i></p> </td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:22%;">The command profile to use for
command configuration. See <b>lvm.conf</b>(5) for more
information about profiles.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="23%">


<p style="margin-top: 1em"><b>--config</b>
<i>String</i></p> </td>
<td width="66%">
</td></tr>
</table>

<p style="margin-left:22%;">Config settings for the
command. These override lvm.conf settings. The String arg
uses the same format as lvm.conf, or may use section/field
syntax. See <b>lvm.conf</b>(5) for more information about
config.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p style="margin-top: 1em"><b>-d</b>|<b>--debug</b> ...</p></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%;">Set debug level. Repeat from 1
to 6 times to increase the detail of messages sent to the
log file and/or syslog (if configured).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="27%">


<p style="margin-top: 1em"><b>--driverloaded
y</b>|<b>n</b></p> </td>
<td width="62%">
</td></tr>
</table>

<p style="margin-left:22%;">If set to no, the command will
not attempt to use device-mapper. For testing and
debugging.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="24%">


<p style="margin-top: 1em"><b>-f</b>|<b>--file</b>
<i>String</i></p> </td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:22%;">Read metadata backup from the
named file. Usually this file was created by
vgcfgbackup.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p style="margin-top: 1em"><b>--force</b> ...</p></td>
<td width="72%">
</td></tr>
</table>

<p style="margin-left:22%;">Force metadata restore even
with thin pool LVs. Use with extreme caution. Most changes
to thin metadata cannot be reverted. You may lose data if
you restore metadata that does not match the thin pool
kernel metadata precisely.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p style="margin-top: 1em"><b>-h</b>|<b>--help</b></p></td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">Display help text.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p style="margin-top: 1em"><b>-l</b>|<b>--list</b></p></td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">List metadata backup and
archive files pertaining to the VG. May be used with --file.
Does not restore the VG.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="24%">


<p style="margin-top: 1em"><b>--lockopt</b>
<i>String</i></p> </td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:22%;">Used to pass options for
special cases to lvmlockd. See <b>lvmlockd</b>(8) for more
information.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">


<p style="margin-top: 1em"><b>--longhelp</b></p></td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:22%;">Display long help text.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p style="margin-top: 1em"><b>-M</b>|<b>--metadatatype
lvm2</b></p> </td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:22%;">Specifies the type of on-disk
metadata to use. <b>lvm2</b> (or just <b>2</b>) is the
current, standard format. <b>lvm1</b> (or just <b>1</b>) is
no longer used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p style="margin-top: 1em"><b>--nolocking</b></p></td>
<td width="72%">
</td></tr>
</table>

<p style="margin-left:22%;">Disable locking.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="24%">


<p style="margin-top: 1em"><b>--profile</b>
<i>String</i></p> </td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:22%;">An alias for --commandprofile
or --metadataprofile, depending on the command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p style="margin-top: 1em"><b>-q</b>|<b>--quiet</b> ...</p></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%;">Suppress output and log
messages. Overrides --debug and --verbose. Repeat once to
also suppress any prompts with answer &rsquo;no&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p style="margin-top: 1em"><b>-t</b>|<b>--test</b></p></td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">Run in test mode. Commands will
not update metadata. This is implemented by disabling all
metadata writing but nevertheless returning success to the
calling function. This may lead to unusual error messages in
multi-stage operations if a tool relies on reading back
metadata it believes has changed but hasn&rsquo;t.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="24%">


<p style="margin-top: 1em"><b>-v</b>|<b>--verbose</b>
...</p> </td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:22%;">Set verbose level. Repeat from
1 to 4 times to increase the detail of messages sent to
stdout and stderr.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p style="margin-top: 1em"><b>--version</b></p></td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">Display version
information.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p style="margin-top: 1em"><b>-y</b>|<b>--yes</b></p></td>
<td width="77%">
</td></tr>
</table>

<p style="margin-left:22%;">Do not prompt for confirmation
interactively but always assume the answer yes. Use with
extreme caution. (For automatic no, see -qq.)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<h2>VARIABLES
<a name="VARIABLES"></a>
</h2>
<td width="11%"></td>
<td width="3%"></td>
<td width="86%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><i>VG</i></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:22%;">Volume Group name. See
<b>lvm</b>(8) for valid names.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><i>String</i></p></td>
<td width="80%">
</td></tr>
</table>

<p style="margin-left:22%;">See the option description for
information about the string content.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">


<p style="margin-top: 1em"><i>Size</i>[UNIT]</p></td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:22%;">Size is an input number that
accepts an optional unit. Input units are always treated as
base two values, regardless of capitalization, e.g.
&rsquo;k&rsquo; and &rsquo;K&rsquo; both refer to 1024. The
default input unit is specified by letter, followed by
|UNIT. UNIT represents other possible input units:
<b>bBsSkKmMgGtTpPeE</b>. b|B is bytes, s|S is sectors of 512
bytes, k|K is kilobytes, m|M is megabytes, g|G is gigabytes,
t|T is terabytes, p|P is petabytes, e|E is exabytes. (This
should not be confused with the output control --units,
where capital letters mean multiple of 1000.)</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">See
<b>lvm</b>(8) for information about environment variables
used by lvm. For example, LVM_VG_NAME can generally be
substituted for a required VG parameter.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To replace PVs,
<b>vgdisplay --partial --verbose</b> will show the UUIDs and
sizes of any PVs that are no longer present. If a PV in the
VG is lost and you wish to substitute another of the same
size, use <b>pvcreate --restorefile filename --uuid uuid</b>
(plus additional arguments as appropriate) to initialise it
with the same UUID as the missing PV. Repeat for all other
missing PVs in the VG. Then use <b>vgcfgrestore --file
filename</b> to restore the VG&rsquo;s metadata.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>lvm</b>(8)
<b>lvm.conf</b>(5) <b>lvmconfig</b>(8)</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvchange</b>(8)
<b>pvck</b>(8) <b>pvcreate</b>(8) <b>pvdisplay</b>(8)
<b>pvmove</b>(8) <b>pvremove</b>(8) <b>pvresize</b>(8)
<b>pvs</b>(8) <b>pvscan</b>(8)</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgcfgbackup</b>(8)
<b>vgcfgrestore</b>(8) <b>vgchange</b>(8) <b>vgck</b>(8)
<b>vgcreate</b>(8) <b>vgconvert</b>(8) <b>vgdisplay</b>(8)
<b>vgexport</b>(8) <b>vgextend</b>(8) <b>vgimport</b>(8)
<b>vgimportclone</b>(8) <b>vgmerge</b>(8)
<b>vgmknodes</b>(8) <b>vgreduce</b>(8) <b>vgremove</b>(8)
<b>vgrename</b>(8) <b>vgs</b>(8) <b>vgscan</b>(8)
<b>vgsplit</b>(8)</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvcreate</b>(8)
<b>lvchange</b>(8) <b>lvconvert</b>(8) <b>lvdisplay</b>(8)
<b>lvextend</b>(8) <b>lvreduce</b>(8) <b>lvremove</b>(8)
<b>lvrename</b>(8) <b>lvresize</b>(8) <b>lvs</b>(8)
<b>lvscan</b>(8)</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvm-fullreport</b>(8)
<b>lvm-lvpoll</b>(8) <b>lvm2-activation-generator</b>(8)
<b>blkdeactivate</b>(8) <b>lvmdump</b>(8)</p>


<p style="margin-left:11%; margin-top: 1em"><b>dmeventd</b>(8)
<b>lvmpolld</b>(8) <b>lvmlockd</b>(8) <b>lvmlockctl</b>(8)
<b>cmirrord</b>(8) <b>lvmdbusd</b>(8)</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvmsystemid</b>(7)
<b>lvmreport</b>(7) <b>lvmraid</b>(7) <b>lvmthin</b>(7)
<b>lvmcache</b>(7)</p>
<hr>
</body>
</html>
