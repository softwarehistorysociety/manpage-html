<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 02:41:32 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>FFMPEG-BITSTREAM-FILTERS</title>

</head>
<body>

<h1 align="center">FFMPEG-BITSTREAM-FILTERS</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#BITSTREAM FILTERS">BITSTREAM FILTERS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">ffmpeg-bitstream-filters
- FFmpeg bitstream filters</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
describes the bitstream filters provided by the libavcodec
library.</p>

<p style="margin-left:11%; margin-top: 1em">A bitstream
filter operates on the encoded stream data, and performs
bitstream level modifications without performing
decoding.</p>

<h2>BITSTREAM FILTERS
<a name="BITSTREAM FILTERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When you
configure your FFmpeg build, all the supported bitstream
filters are enabled by default. You can list all available
ones using the configure option &quot;--list-bsfs&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">You can disable
all the bitstream filters using the configure option
&quot;--disable-bsfs&quot;, and selectively enable any
bitstream filter using the option
&quot;--enable-bsf=BSF&quot;, or you can disable a
particular bitstream filter using the option
&quot;--disable-bsf=BSF&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The option
&quot;-bsfs&quot; of the ff* tools will display the list of
all the supported bitstream filters included in your
build.</p>

<p style="margin-left:11%; margin-top: 1em">The ff* tools
have a -bsf option applied per stream, taking a
comma-separated list of filters, whose parameters follow the
filter name after a &rsquo;=&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i INPUT
-c:v copy -bsf:v filter1[=opt1=str1:opt2=str2][,filter2]
OUTPUT</p>

<p style="margin-left:11%; margin-top: 1em">Below is a
description of the currently available bitstream filters,
with their parameters, if any.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aac_adtstoasc</b>
<br>
Convert <small>MPEG-2/4 AAC ADTS</small> to an
<small>MPEG-4</small> Audio Specific Configuration
bitstream.</p>

<p style="margin-left:11%; margin-top: 1em">This filter
creates an <small>MPEG-4</small> AudioSpecificConfig from an
<small>MPEG-2/4 ADTS</small> header and removes the
<small>ADTS</small> header.</p>

<p style="margin-left:11%; margin-top: 1em">This filter is
required for example when copying an <small>AAC</small>
stream from a raw <small>ADTS AAC</small> or an MPEG-TS
container to <small>MP4A-LATM,</small> to an
<small>FLV</small> file, or to <small>MOV/MP4</small> files
and related formats such as 3GP or M4A. Please note that it
is auto-inserted for <small>MP4A-LATM</small> and
<small>MOV/MP4</small> and related formats.</p>


<p style="margin-left:11%; margin-top: 1em"><b>av1_metadata</b>
<br>
Modify metadata embedded in an <small>AV1</small>
stream.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>td</b></p></td>
<td width="3%"></td>
<td width="83%">


<p>Insert or remove temporal delimiter OBUs in all temporal
units of the stream.</p></td></tr>
</table>

<p style="margin-left:17%;"><b>insert</b></p>

<p style="margin-left:23%;">Insert a <small>TD</small> at
the beginning of every <small>TU</small> which does not
already have one.</p>

<p style="margin-left:17%;"><b>remove</b></p>

<p style="margin-left:23%;">Remove the <small>TD</small>
from the beginning of every <small>TU</small> which has
one.</p>

<p style="margin-left:11%;"><b>color_primaries <br>
transfer_characteristics <br>
matrix_coefficients</b></p>

<p style="margin-left:17%;">Set the color description
fields in the stream (see <small>AV1</small> section
6.4.2).</p>

<p style="margin-left:11%;"><b>color_range</b></p>

<p style="margin-left:17%;">Set the color range in the
stream (see <small>AV1</small> section 6.4.2; note that this
cannot be set for streams using <small>BT.709</small>
primaries, sRGB transfer characteristic and identity (
<small>RGB</small> ) matrix coefficients).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="3%">


<p><b>tv</b></p></td>
<td width="3%"></td>
<td width="22%">


<p>Limited range.</p></td>
<td width="55%">
</td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="3%">


<p><b>pc</b></p></td>
<td width="3%"></td>
<td width="22%">


<p>Full range.</p></td>
<td width="55%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>chroma_sample_position</b></p>

<p style="margin-left:17%;">Set the chroma sample location
in the stream (see <small>AV1</small> section 6.4.2). This
can only be set for 4:2:0 streams. <b><br>
vertical</b></p>

<p style="margin-left:23%;">Left position (matching the
default in <small>MPEG-2</small> and H.264).</p>

<p style="margin-left:17%;"><b>colocated</b></p>

<p style="margin-left:23%;">Top-left position.</p>

<p style="margin-left:11%;"><b>tick_rate</b></p>

<p style="margin-left:17%;">Set the tick rate
(<i>num_units_in_display_tick / time_scale</i>) in the
timing info in the sequence header.</p>


<p style="margin-left:11%;"><b>num_ticks_per_picture</b></p>

<p style="margin-left:17%;">Set the number of ticks in each
picture, to indicate that the stream has a fixed framerate.
Ignored if <b>tick_rate</b> is not also set.</p>

<p style="margin-left:11%;"><b>delete_padding</b></p>

<p style="margin-left:17%;">Deletes Padding OBUs.</p>

<p style="margin-left:11%; margin-top: 1em"><b>chomp</b>
<br>
Remove zero padding at the end of a packet.</p>


<p style="margin-left:11%; margin-top: 1em"><b>dca_core</b>
<br>
Extract the core from a <small>DCA/DTS</small> stream,
dropping extensions such as DTS-HD.</p>


<p style="margin-left:11%; margin-top: 1em"><b>dump_extra</b>
<br>
Add extradata to the beginning of the filtered packets
except when said packets already exactly begin with the
extradata that is intended to be added. <b><br>
freq</b></p>

<p style="margin-left:17%;">The additional argument
specifies which packets should be filtered. It accepts the
values:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p><b>k</b></p></td>
<td width="82%">
</td></tr>
</table>

<p style="margin-left:17%;"><b>keyframe</b></p>

<p style="margin-left:23%;">add extradata to all key
packets</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p><b>e</b></p></td>
<td width="1%"></td>
<td width="43%">
</td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p><b>all</b></p></td>
<td width="1%"></td>
<td width="43%">


<p>add extradata to all packets</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If not
specified it is assumed <b>k</b>.</p>

<p style="margin-left:11%; margin-top: 1em">For example the
following <b>ffmpeg</b> command forces a global header (thus
disabling individual packet headers) in the H.264 packets
generated by the &quot;libx264&quot; encoder, but corrects
them by adding the header stored in extradata to the key
packets:</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i INPUT
-map 0 -flags:v +global_header -c:v libx264 -bsf:v
dump_extra out.ts</p>


<p style="margin-left:11%; margin-top: 1em"><b>eac3_core</b>
<br>
Extract the core from a E-AC-3 stream, dropping extra
channels.</p>


<p style="margin-left:11%; margin-top: 1em"><b>extract_extradata</b>
<br>
Extract the in-band extradata.</p>

<p style="margin-left:11%; margin-top: 1em">Certain codecs
allow the long-term headers (e.g. <small>MPEG-2</small>
sequence headers, or H.264/HEVC ( <small>VPS/</small>
)SPS/PPS) to be transmitted either &quot;in-band&quot; (i.e.
as a part of the bitstream containing the coded frames) or
&quot;out of band&quot; (e.g. on the container level). This
latter form is called &quot;extradata&quot; in FFmpeg
terminology.</p>

<p style="margin-left:11%; margin-top: 1em">This bitstream
filter detects the in-band headers and makes them available
as extradata. <b><br>
remove</b></p>

<p style="margin-left:17%;">When this option is enabled,
the long-term headers are removed from the bitstream after
extraction.</p>


<p style="margin-left:11%; margin-top: 1em"><b>filter_units</b>
<br>
Remove units with types in or not in a given set from the
stream. <b><br>
pass_types</b></p>

<p style="margin-left:17%;">List of unit types or ranges of
unit types to pass through while removing all others. This
is specified as a &rsquo;|&rsquo;-separated list of unit
type values or ranges of values with &rsquo;-&rsquo;.</p>

<p style="margin-left:11%;"><b>remove_types</b></p>

<p style="margin-left:17%;">Identical to <b>pass_types</b>,
except the units in the given set removed and all others
passed through.</p>

<p style="margin-left:11%; margin-top: 1em">Extradata is
unchanged by this transformation, but note that if the
stream contains inline parameter sets then the output may be
unusable if they are removed.</p>

<p style="margin-left:11%; margin-top: 1em">For example, to
remove all non-VCL <small>NAL</small> units from an H.264
stream:</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i INPUT
-c:v copy -bsf:v 'filter_units=pass_types=1-5' OUTPUT</p>

<p style="margin-left:11%; margin-top: 1em">To remove all
AUDs, <small>SEI</small> and filler from an H.265
stream:</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i INPUT
-c:v copy -bsf:v 'filter_units=remove_types=35|38-40'
OUTPUT</p>


<p style="margin-left:11%; margin-top: 1em"><b>hapqa_extract</b>
<br>
Extract Rgb or Alpha part of an <small>HAPQA</small> file,
without recompression, in order to create an
<small>HAPQ</small> or an HAPAlphaOnly file. <b><br>
texture</b></p>

<p style="margin-left:17%;">Specifies the texture to keep.
<b><br>
color <br>
alpha</b></p>

<p style="margin-left:11%; margin-top: 1em">Convert
<small>HAPQA</small> to <small>HAPQ</small></p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i
hapqa_inputfile.mov -c copy -bsf:v
hapqa_extract=texture=color -tag:v HapY -metadata:s:v:0
encoder=&quot;HAPQ&quot; hapq_file.mov</p>

<p style="margin-left:11%; margin-top: 1em">Convert
<small>HAPQA</small> to HAPAlphaOnly</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i
hapqa_inputfile.mov -c copy -bsf:v
hapqa_extract=texture=alpha -tag:v HapA -metadata:s:v:0
encoder=&quot;HAPAlpha Only&quot; hapalphaonly_file.mov</p>


<p style="margin-left:11%; margin-top: 1em"><b>h264_metadata</b>
<br>
Modify metadata embedded in an H.264 stream.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>aud</b></p></td>
<td width="2%"></td>
<td width="83%">


<p>Insert or remove <small>AUD NAL</small> units in all
access units of the stream.</p></td></tr>
</table>

<p style="margin-left:17%;"><b>insert <br>
remove</b></p>

<p style="margin-left:11%;"><b>sample_aspect_ratio</b></p>

<p style="margin-left:17%;">Set the sample aspect ratio of
the stream in the <small>VUI</small> parameters.</p>

<p style="margin-left:11%;"><b>video_format <br>
video_full_range_flag</b></p>

<p style="margin-left:17%;">Set the video format in the
stream (see H.264 section E.2.1 and table E-2).</p>

<p style="margin-left:11%;"><b>colour_primaries <br>
transfer_characteristics <br>
matrix_coefficients</b></p>

<p style="margin-left:17%;">Set the colour description in
the stream (see H.264 section E.2.1 and tables E-3, E-4 and
E-5).</p>


<p style="margin-left:11%;"><b>chroma_sample_loc_type</b></p>

<p style="margin-left:17%;">Set the chroma sample location
in the stream (see H.264 section E.2.1 and figure E-1).</p>

<p style="margin-left:11%;"><b>tick_rate</b></p>

<p style="margin-left:17%;">Set the tick rate
(num_units_in_tick / time_scale) in the <small>VUI</small>
parameters. This is the smallest time unit representable in
the stream, and in many cases represents the field rate of
the stream (double the frame rate).</p>


<p style="margin-left:11%;"><b>fixed_frame_rate_flag</b></p>

<p style="margin-left:17%;">Set whether the stream has
fixed framerate - typically this indicates that the
framerate is exactly half the tick rate, but the exact
meaning is dependent on interlacing and the picture
structure (see H.264 section E.2.1 and table E-6).</p>

<p style="margin-left:11%;"><b>crop_left <br>
crop_right <br>
crop_top <br>
crop_bottom</b></p>

<p style="margin-left:17%;">Set the frame cropping offsets
in the <small>SPS.</small> These values will replace the
current ones if the stream is already cropped.</p>

<p style="margin-left:17%; margin-top: 1em">These fields
are set in pixels. Note that some sizes may not be
representable if the chroma is subsampled or the stream is
interlaced (see H.264 section 7.4.2.1.1).</p>

<p style="margin-left:11%;"><b>sei_user_data</b></p>

<p style="margin-left:17%;">Insert a string as
<small>SEI</small> unregistered user data. The argument must
be of the form <i>UUID+string</i>, where the
<small>UUID</small> is as hex digits possibly separated by
hyphens, and the string can be anything.</p>

<p style="margin-left:17%; margin-top: 1em">For example,
<b>086f3693-b7b3-4f2c-9653-21492feee5b8+hello</b> will
insert the string &rsquo;&rsquo;hello&rsquo;&rsquo;
associated with the given <small>UUID.</small></p>

<p style="margin-left:11%;"><b>delete_filler</b></p>

<p style="margin-left:17%;">Deletes both filler
<small>NAL</small> units and filler <small>SEI</small>
messages.</p>

<p style="margin-left:11%;"><b>level</b></p>

<p style="margin-left:17%;">Set the level in the
<small>SPS.</small> Refer to H.264 section A.3 and tables
A-1 to A-5.</p>

<p style="margin-left:17%; margin-top: 1em">The argument
must be the name of a level (for example, <b>4.2</b>), a
level_idc value (for example, <b>42</b>), or the special
name <b>auto</b> indicating that the filter should attempt
to guess the level from the input stream properties.</p>


<p style="margin-left:11%; margin-top: 1em"><b>h264_mp4toannexb</b>
<br>
Convert an H.264 bitstream from length prefixed mode to
start code prefixed mode (as defined in the Annex B of the
ITU-T H.264 specification).</p>

<p style="margin-left:11%; margin-top: 1em">This is
required by some streaming formats, typically the
<small>MPEG-2</small> transport stream format (muxer
&quot;mpegts&quot;).</p>

<p style="margin-left:11%; margin-top: 1em">For example to
remux an <small>MP4</small> file containing an H.264 stream
to mpegts format with <b>ffmpeg</b>, you can use the
command:</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i
INPUT.mp4 -codec copy -bsf:v h264_mp4toannexb OUTPUT.ts</p>

<p style="margin-left:11%; margin-top: 1em">Please note
that this filter is auto-inserted for MPEG-TS (muxer
&quot;mpegts&quot;) and raw H.264 (muxer &quot;h264&quot;)
output formats.</p>


<p style="margin-left:11%; margin-top: 1em"><b>h264_redundant_pps</b>
<br>
This applies a specific fixup to some Blu-ray streams which
contain redundant PPSs modifying irrelevant parameters of
the stream which confuse other transformations which require
correct extradata.</p>

<p style="margin-left:11%; margin-top: 1em">A new single
global <small>PPS</small> is created, and all of the
redundant PPSs within the stream are removed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hevc_metadata</b>
<br>
Modify metadata embedded in an <small>HEVC</small>
stream.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>aud</b></p></td>
<td width="2%"></td>
<td width="83%">


<p>Insert or remove <small>AUD NAL</small> units in all
access units of the stream.</p></td></tr>
</table>

<p style="margin-left:17%;"><b>insert <br>
remove</b></p>

<p style="margin-left:11%;"><b>sample_aspect_ratio</b></p>

<p style="margin-left:17%;">Set the sample aspect ratio in
the stream in the <small>VUI</small> parameters.</p>

<p style="margin-left:11%;"><b>video_format <br>
video_full_range_flag</b></p>

<p style="margin-left:17%;">Set the video format in the
stream (see H.265 section E.3.1 and table E.2).</p>

<p style="margin-left:11%;"><b>colour_primaries <br>
transfer_characteristics <br>
matrix_coefficients</b></p>

<p style="margin-left:17%;">Set the colour description in
the stream (see H.265 section E.3.1 and tables E.3, E.4 and
E.5).</p>


<p style="margin-left:11%;"><b>chroma_sample_loc_type</b></p>

<p style="margin-left:17%;">Set the chroma sample location
in the stream (see H.265 section E.3.1 and figure E.1).</p>

<p style="margin-left:11%;"><b>tick_rate</b></p>

<p style="margin-left:17%;">Set the tick rate in the
<small>VPS</small> and <small>VUI</small> parameters
(num_units_in_tick / time_scale). Combined with
<b>num_ticks_poc_diff_one</b>, this can set a constant
framerate in the stream. Note that it is likely to be
overridden by container parameters when the stream is in a
container.</p>


<p style="margin-left:11%;"><b>num_ticks_poc_diff_one</b></p>

<p style="margin-left:17%;">Set
poc_proportional_to_timing_flag in <small>VPS</small> and
<small>VUI</small> and use this value to set
num_ticks_poc_diff_one_minus1 (see H.265 sections 7.4.3.1
and E.3.1). Ignored if <b>tick_rate</b> is not also set.</p>

<p style="margin-left:11%;"><b>crop_left <br>
crop_right <br>
crop_top <br>
crop_bottom</b></p>

<p style="margin-left:17%;">Set the conformance window
cropping offsets in the <small>SPS.</small> These values
will replace the current ones if the stream is already
cropped.</p>

<p style="margin-left:17%; margin-top: 1em">These fields
are set in pixels. Note that some sizes may not be
representable if the chroma is subsampled (H.265 section
7.4.3.2.1).</p>

<p style="margin-left:11%;"><b>level</b></p>

<p style="margin-left:17%;">Set the level in the
<small>VPS</small> and <small>SPS.</small> See H.265 section
A.4 and tables A.6 and A.7.</p>

<p style="margin-left:17%; margin-top: 1em">The argument
must be the name of a level (for example, <b>5.1</b>), a
<i>general_level_idc</i> value (for example, <b>153</b> for
level 5.1), or the special name <b>auto</b> indicating that
the filter should attempt to guess the level from the input
stream properties.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hevc_mp4toannexb</b>
<br>
Convert an <small>HEVC/H.265</small> bitstream from length
prefixed mode to start code prefixed mode (as defined in the
Annex B of the ITU-T H.265 specification).</p>

<p style="margin-left:11%; margin-top: 1em">This is
required by some streaming formats, typically the
<small>MPEG-2</small> transport stream format (muxer
&quot;mpegts&quot;).</p>

<p style="margin-left:11%; margin-top: 1em">For example to
remux an <small>MP4</small> file containing an
<small>HEVC</small> stream to mpegts format with
<b>ffmpeg</b>, you can use the command:</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i
INPUT.mp4 -codec copy -bsf:v hevc_mp4toannexb OUTPUT.ts</p>

<p style="margin-left:11%; margin-top: 1em">Please note
that this filter is auto-inserted for MPEG-TS (muxer
&quot;mpegts&quot;) and raw <small>HEVC/H.265</small> (muxer
&quot;h265&quot; or &quot;hevc&quot;) output formats.</p>

<p style="margin-left:11%; margin-top: 1em"><b>imxdump</b>
<br>
Modifies the bitstream to fit in <small>MOV</small> and to
be usable by the Final Cut Pro decoder. This filter only
applies to the mpeg2video codec, and is likely not needed
for Final Cut Pro 7 and newer with the appropriate
<b>-tag:v</b>.</p>

<p style="margin-left:11%; margin-top: 1em">For example, to
remux 30 MB/sec <small>NTSC IMX</small> to
<small>MOV:</small></p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i
input.mxf -c copy -bsf:v imxdump -tag:v mx3n output.mov</p>


<p style="margin-left:11%; margin-top: 1em"><b>mjpeg2jpeg</b>
<br>
Convert <small>MJPEG/AVI1</small> packets to full
<small>JPEG/JFIF</small> packets.</p>


<p style="margin-left:11%; margin-top: 1em"><small>MJPEG</small>
is a video codec wherein each video frame is essentially a
<small>JPEG</small> image. The individual frames can be
extracted without loss, e.g. by</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i
../some_mjpeg.avi -c:v copy frames_%d.jpg</p>

<p style="margin-left:11%; margin-top: 1em">Unfortunately,
these chunks are incomplete <small>JPEG</small> images,
because they lack the <small>DHT</small> segment required
for decoding. Quoting from
&lt;<b>http://www.digitalpreservation.gov/formats/fdd/fdd000063.shtml</b>&gt;:</p>

<p style="margin-left:11%; margin-top: 1em">Avery Lee,
writing in the rec.video.desktop newsgroup in 2001,
commented that &quot; <small>MJPEG,</small> or at least the
<small>MJPEG</small> in AVIs having the <small>MJPG</small>
fourcc, is restricted <small>JPEG</small> with a fixed --
and *omitted* -- Huffman table. The <small>JPEG</small> must
be YCbCr colorspace, it must be 4:2:2, and it must use basic
Huffman encoding, not arithmetic or progressive. . . . You
can indeed extract the <small>MJPEG</small> frames and
decode them with a regular <small>JPEG</small> decoder, but
you have to prepend the <small>DHT</small> segment to them,
or else the decoder won&rsquo;t have any idea how to
decompress the data. The exact table necessary is given in
the OpenDML spec.&quot;</p>

<p style="margin-left:11%; margin-top: 1em">This bitstream
filter patches the header of frames extracted from an
<small>MJPEG</small> stream (carrying the
<small>AVI1</small> header <small>ID</small> and lacking a
<small>DHT</small> segment) to produce fully qualified
<small>JPEG</small> images.</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i
mjpeg-movie.avi -c:v copy -bsf:v mjpeg2jpeg frame_%d.jpg
<br>
exiftran -i -9 frame*.jpg <br>
ffmpeg -i frame_%d.jpg -c:v copy rotated.avi</p>


<p style="margin-left:11%; margin-top: 1em"><b>mjpegadump</b>
<br>
Add an <small>MJPEG A</small> header to the bitstream, to
enable decoding by Quicktime.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mov2textsub</b>
<br>
Extract a representable text file from <small>MOV</small>
subtitles, stripping the metadata header from each subtitle
packet.</p>

<p style="margin-left:11%; margin-top: 1em">See also the
<b>text2movsub</b> filter.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mp3decomp</b>
<br>
Decompress non-standard compressed <small>MP3</small> audio
headers.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mpeg2_metadata</b>
<br>
Modify metadata embedded in an <small>MPEG-2</small> stream.
<b><br>
display_aspect_ratio</b></p>

<p style="margin-left:17%;">Set the display aspect ratio in
the stream.</p>

<p style="margin-left:17%; margin-top: 1em">The following
fixed values are supported:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p><b>4/3</b></p></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:17%;"><b>16/9 <br>
221/100</b></p>

<p style="margin-left:17%; margin-top: 1em">Any other value
will result in square pixels being signalled instead (see
H.262 section 6.3.3 and table 6-3).</p>

<p style="margin-left:11%;"><b>frame_rate</b></p>

<p style="margin-left:17%;">Set the frame rate in the
stream. This is constructed from a table of known values
combined with a small multiplier and divisor - if the
supplied value is not exactly representable, the nearest
representable value will be used instead (see H.262 section
6.3.3 and table 6-4).</p>

<p style="margin-left:11%;"><b>video_format</b></p>

<p style="margin-left:17%;">Set the video format in the
stream (see H.262 section 6.3.6 and table 6-6).</p>

<p style="margin-left:11%;"><b>colour_primaries <br>
transfer_characteristics <br>
matrix_coefficients</b></p>

<p style="margin-left:17%;">Set the colour description in
the stream (see H.262 section 6.3.6 and tables 6-7, 6-8 and
6-9).</p>


<p style="margin-left:11%; margin-top: 1em"><b>mpeg4_unpack_bframes</b>
<br>
Unpack DivX-style packed B-frames.</p>

<p style="margin-left:11%; margin-top: 1em">DivX-style
packed B-frames are not valid <small>MPEG-4</small> and were
only a workaround for the broken Video for Windows
subsystem. They use more space, can cause minor
<small>AV</small> sync issues, require more
<small>CPU</small> power to decode (unless the player has
some decoded picture queue to compensate the 2,0,2,0 frame
per packet style) and cause trouble if copied into a
standard container like mp4 or mpeg-ps/ts, because
<small>MPEG-4</small> decoders may not be able to decode
them, since they are not valid <small>MPEG-4.</small></p>

<p style="margin-left:11%; margin-top: 1em">For example to
fix an <small>AVI</small> file containing an
<small>MPEG-4</small> stream with DivX-style packed B-frames
using <b>ffmpeg</b>, you can use the command:</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i
INPUT.avi -codec copy -bsf:v mpeg4_unpack_bframes
OUTPUT.avi</p>

<p style="margin-left:11%; margin-top: 1em"><b>noise</b>
<br>
Damages the contents of packets or simply drops them without
damaging the container. Can be used for fuzzing or testing
error resilience/concealment.</p>

<p style="margin-left:11%; margin-top: 1em">Parameters:
<b><br>
amount</b></p>

<p style="margin-left:17%;">A numeral string, whose value
is related to how often output bytes will be modified.
Therefore, values below or equal to 0 are forbidden, and the
lower the more frequent bytes will be modified, with 1
meaning every byte is modified.</p>

<p style="margin-left:11%;"><b>dropamount</b></p>

<p style="margin-left:17%;">A numeral string, whose value
is related to how often packets will be dropped. Therefore,
values below or equal to 0 are forbidden, and the lower the
more frequent packets will be dropped, with 1 meaning every
packet is dropped.</p>

<p style="margin-left:11%; margin-top: 1em">The following
example applies the modification to every byte but does not
drop any packets.</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i INPUT
-c copy -bsf noise[=1] output.mkv</p>

<p style="margin-left:11%; margin-top: 1em"><b>null</b>
<br>
This bitstream filter passes the packets through
unchanged.</p>


<p style="margin-left:11%; margin-top: 1em"><b>prores_metadata</b>
<br>
Modify color property metadata embedded in prores stream.
<b><br>
color_primaries</b></p>

<p style="margin-left:17%;">Set the color primaries.
Available values are: <b><br>
auto</b></p>

<p style="margin-left:23%;">Keep the same color primaries
property (default).</p>

<p style="margin-left:17%;"><b>unknown <br>
bt709 <br>
bt470bg</b></p>

<p style="margin-left:23%;"><small>BT601 625</small></p>

<p style="margin-left:17%;"><b>smpte170m</b></p>

<p style="margin-left:23%;"><small>BT601 525</small></p>

<p style="margin-left:17%;"><b>bt2020 <br>
smpte431</b></p>

<p style="margin-left:23%;"><small>DCI P3</small></p>

<p style="margin-left:17%;"><b>smpte432</b></p>

<p style="margin-left:23%;">P3 D65</p>


<p style="margin-left:11%;"><b>transfer_characteristics</b></p>

<p style="margin-left:17%;">Set the color transfer.
Available values are: <b><br>
auto</b></p>

<p style="margin-left:23%;">Keep the same transfer
characteristics property (default).</p>

<p style="margin-left:17%;"><b>unknown <br>
bt709</b></p>

<p style="margin-left:23%;"><small>BT 601, BT 709, BT
2020</small></p>

<p style="margin-left:11%;"><b>matrix_coefficients</b></p>

<p style="margin-left:17%;">Set the matrix coefficient.
Available values are: <b><br>
auto</b></p>

<p style="margin-left:23%;">Keep the same transfer
characteristics property (default).</p>

<p style="margin-left:17%;"><b>unknown <br>
bt709 <br>
smpte170m</b></p>

<p style="margin-left:23%;"><small>BT 601</small></p>

<p style="margin-left:17%;"><b>bt2020nc</b></p>

<p style="margin-left:11%; margin-top: 1em">Set Rec709
colorspace for each frame of the file</p>

<p style="margin-left:11%; margin-top: 1em">ffmpeg -i INPUT
-c copy -bsf:v
prores_metadata=color_primaries=bt709:color_trc=bt709:colorspace=bt709
output.mov</p>


<p style="margin-left:11%; margin-top: 1em"><b>remove_extra</b>
<br>
Remove extradata from packets.</p>

<p style="margin-left:11%; margin-top: 1em">It accepts the
following parameter: <b><br>
freq</b></p>

<p style="margin-left:17%;">Set which frame types to remove
extradata from.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p><b>k</b></p></td>
<td width="5%"></td>
<td width="63%">


<p>Remove extradata from non-keyframes only.</p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:17%;"><b>keyframe</b></p>

<p style="margin-left:23%;">Remove extradata from keyframes
only.</p>

<p style="margin-left:17%;"><b>e, all</b></p>

<p style="margin-left:23%;">Remove extradata from all
frames.</p>


<p style="margin-left:11%; margin-top: 1em"><b>text2movsub</b>
<br>
Convert text subtitles to <small>MOV</small> subtitles (as
used by the &quot;mov_text&quot; codec) with metadata
headers.</p>

<p style="margin-left:11%; margin-top: 1em">See also the
<b>mov2textsub</b> filter.</p>


<p style="margin-left:11%; margin-top: 1em"><b>trace_headers</b>
<br>
Log trace output containing all syntax elements in the coded
stream headers (everything above the level of individual
coded blocks). This can be useful for debugging low-level
stream issues.</p>

<p style="margin-left:11%; margin-top: 1em">Supports
<small>AV1, H.264, H.265,</small> (M)JPEG,
<small>MPEG-2</small> and <small>VP9,</small> but depending
on the build only a subset of these may be available.</p>


<p style="margin-left:11%; margin-top: 1em"><b>truehd_core</b>
<br>
Extract the core from a TrueHD stream, dropping
<small>ATMOS</small> data.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vp9_metadata</b>
<br>
Modify metadata embedded in a <small>VP9</small> stream.
<b><br>
color_space</b></p>

<p style="margin-left:17%;">Set the color space value in
the frame header. <b><br>
unknown <br>
bt601 <br>
bt709 <br>
smpte170 <br>
smpte240 <br>
bt2020</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p><b>rgb</b></p></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>color_range</b></p>

<p style="margin-left:17%;">Set the color range value in
the frame header. Note that this cannot be set in
<small>RGB</small> streams.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="3%">


<p><b>tv</b></p></td>
<td width="80%">
</td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="3%">


<p><b>pc</b></p></td>
<td width="80%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>vp9_superframe</b> <br>
Merge <small>VP9</small> invisible (alt-ref) frames back
into <small>VP9</small> superframes. This fixes merging of
split/segmented <small>VP9</small> streams where the alt-ref
frame was split from its visible counterpart.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vp9_superframe_split</b>
<br>
Split <small>VP9</small> superframes into single frames.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vp9_raw_reorder</b>
<br>
Given a <small>VP9</small> stream with correct timestamps
but possibly out of order, insert additional
show-existing-frame packets to correct the ordering.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ffmpeg</b>(1),
<b>ffplay</b>(1), <b>ffprobe</b>(1),
<b>libavcodec</b>(3)</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The FFmpeg
developers.</p>

<p style="margin-left:11%; margin-top: 1em">For details
about the authorship, see the Git history of the project
(git://source.ffmpeg.org/ffmpeg), e.g. by typing the command
<b>git log</b> in the FFmpeg source directory, or browsing
the online repository at
&lt;<b>http://source.ffmpeg.org</b>&gt;.</p>

<p style="margin-left:11%; margin-top: 1em">Maintainers for
the specific components are listed in the file
<i><small>MAINTAINERS</small></i> in the source code
tree.</p>
<hr>
</body>
</html>
