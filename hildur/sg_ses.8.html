<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 03:05:31 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SG_SES</title>

</head>
<body>

<h1 align="center">SG_SES</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#INDEXES">INDEXES</a><br>
<a href="#DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS">DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS</a><br>
<a href="#STR FORMAT">STR FORMAT</a><br>
<a href="#CLEAR, GET, SET">CLEAR, GET, SET</a><br>
<a href="#DATA SUPPLIED">DATA SUPPLIED</a><br>
<a href="#CHANGING STATE">CHANGING STATE</a><br>
<a href="#SETTING SUBENCLOSURE NICKNAME">SETTING SUBENCLOSURE NICKNAME</a><br>
<a href="#NVME ENCLOSURES">NVME ENCLOSURES</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">sg_ses - access
a SCSI Enclosure Services (SES) device</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>sg_ses</b>
[<i>--descriptor=DES</i>] [<i>--dev-slot-num=SN</i>]
[<i>--eiioe=A_F</i>] [<i>--filter</i>] [<i>--get=STR</i>]
[<i>--hex</i>] [<i>--index=IIA</i> | <i>--index=TIA,II</i>]
[<i>--inner-hex</i>] [<i>--join</i>] [<i>--maxlen=LEN</i>]
[<i>--page=PG</i>] [<i>--quiet</i>] [<i>--raw</i>]
[<i>--readonly</i>] [<i>--sas-addr=SA</i>] [<i>--status</i>]
[<i>--verbose</i>] [<i>--warn</i>] <i>DEVICE</i></p>

<p style="margin-left:11%; margin-top: 1em"><b>sg_ses</b>
[<i>--byte1=B1</i>] [<i>--clear=STR</i>] [<i>--control</i>]
[<i>--data=H,H...</i>] [<i>--data=@FN</i>]
[<i>--descriptor=DES</i>] [<i>--dev-slot-num=SN</i>]
[<i>--index=IIA</i> | <i>--index=TIA,II</i>] [<i>--mask</i>]
[<i>--maxlen=LEN</i>] [<i>--nickname=SEN</i>]
[<i>--nickid=SEID</i>] [<i>--page=PG</i>]
[<i>--readonly</i>] [<i>--sas-addr=SA</i>]
[<i>--set=STR</i>] [<i>--verbose</i>] <i>DEVICE</i></p>

<p style="margin-left:11%; margin-top: 1em"><b>sg_ses</b>
<i>--data=@FN --status</i> [<i>--raw --raw</i>] [&lt;all
options from first form&gt;]</p>

<p style="margin-left:11%; margin-top: 1em"><b>sg_ses</b>
[<i>--enumerate</i>] [<i>--index=IIA</i>] [<i>--list</i>]
[<i>--help</i>] [<i>--version</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Fetches
management information from a SCSI Enclosure Service (SES)
device. This utility can also modify the state of a SES
device. The <i>DEVICE</i> should be a SES device which may
be a dedicated enclosure services processor in which case an
INQUIRY response&rsquo;s Peripheral Device Type is 13 [0xd].
Alternatively it may be attached to another type of SCSI
device (e.g. a disk) in which case the EncServ bit is set in
its INQUIRY response.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<i>DEVICE</i> argument is given with no options then the
names of all diagnostic pages (dpages) supported are listed.
Most, but not necessarily all, of the named dpages are
defined in the SES standards and drafts. The most recent
reference for this utility is the draft SCSI Enclosure
Services 4 document T10/BSR INCITS 555 Revision 1 at
http://www.t10.org . Existing standards for SES, SES-2 and
SES-3 are ANSI INCITS 305-1998 and ANSI INCITS 448-2008 and
ANSI INCITS 518-2017 respectively.</p>

<p style="margin-left:11%; margin-top: 1em">The first form
shown in the synopsis is for fetching and decoding dpages or
fields from the SES <i>DEVICE</i>. A SCSI RECEIVE DIAGNOSTIC
RESULTS command is sent to the <i>DEVICE</i> to obtain each
dpage response. Rather than decoding a fetched dpage, it may
be output in hex or binary with the <i>--hex</i> or <i>--raw
--raw</i> options.</p>

<p style="margin-left:11%; margin-top: 1em">The second form
in the synopsis is for modifying dpages or fields held in
the SES <i>DEVICE</i>. A SCSI SEND DIAGNOSTIC command
containing a &quot;control&quot; dpage is sent to the
<i>DEVICE</i> to cause changes. Changing the state of an
enclosure (e.g. requesting the &quot;ident&quot; (locate)
LED to flash on a disk carrier in an array) is typically
done using a read-modify-write cycle. See the section on
CHANGING STATE below.</p>

<p style="margin-left:11%; margin-top: 1em">The third form
in the synopsis shows the options for decoding the contents
of a file that holds a hexadecimal or binary representation
of a SES dpage response. Typically an earlier invocation of
the first form of this utility with the &rsquo;-HHHH&rsquo;
option would have generated that file. Since no SCSI
commands are sent, the <i>DEVICE</i> argument if given will
be ignored.</p>

<p style="margin-left:11%; margin-top: 1em">The last form
in the synopsis shows the options for providing command line
help (i.e. usage information), listing out dpage and field
information tables held by the utility (<i>--enumerate</i>),
or printing the version string of this utility.</p>

<p style="margin-left:11%; margin-top: 1em">There is a web
page discussing this utility at
http://sg.danny.cz/sg/sg_ses.html . Support for downloading
microcode to a SES device has been placed in a separate
utility called sg_ses_microcode.</p>

<p style="margin-left:11%; margin-top: 1em">In the
following sections &quot;dpage&quot; refers to a diagnostic
page, either fetched with a SCSI RECEIVE DIAGNOSTIC RESULTS
command, sent to the <i>DEVICE</i> with a SCSI SEND
DIAGNOSTIC command, or fetched from data supplied by the
<i>--data=</i> option.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Arguments to
long options are mandatory for short options as well. The
options are arranged in alphabetical order based on the long
option name. <b><br>
-b</b>, <b>--byte1</b>=<i>B1</i></p>

<p style="margin-left:22%;">some modifiable dpages may need
byte 1 (i.e. the second byte) set. In the Enclosure Control
dpage, byte 1 contains the INFO, NON-CRIT, CRIT and UNRECOV
bits. In the Subenclosure String Out, Subenclosure Nickname
Control and Download Microcode Control dpages, byte 1 is the
Subenclosure identifier. Active when the <i>--control</i>
and <i>--data=H,H...</i> options are used and the default
value is 0. If the <i>--clear=STR</i> or <i>--set=STR</i>
option is used then the value read from byte 1 is written
back to byte 1. <i>B1</i> is in decimal unless it is
prefixed by &rsquo;0x&rsquo; or &rsquo;0X&rsquo; (or has a
trailing &rsquo;h&rsquo; or &rsquo;H&rsquo;).</p>

<p style="margin-left:11%;"><b>-C</b>,
<b>--clear</b>=<i>STR</i></p>

<p style="margin-left:22%;">Used to clear an element field
in the Enclosure Control or Threshold Out dpage. Must be
used together with an indexing option to specify which
element is to be changed. The Enclosure Control dpage is
assumed if the <i>--page=PG</i> option is not given. See the
STR FORMAT and the CLEAR, GET, SET sections below.</p>

<p style="margin-left:11%;"><b>-c</b>, <b>--control</b></p>

<p style="margin-left:22%;">will send control information
to the <i>DEVICE</i> via a SCSI SEND DIAGNOSTIC command.
Cannot give both this option and <i>--status</i>. The
Enclosure Control, String Out, Threshold Out, Array Control
(obsolete in SES-2), Subenclosure String Out, Subenclosure
Nickname Control and Download Microcode dpages can be set
currently. This option is assumed if either the
<i>--clear=STR</i> or <i>--set=STR</i> option is given.</p>

<p style="margin-left:11%;"><b>-d</b>,
<b>--data</b>=<i>H,H...</i></p>

<p style="margin-left:22%;">permits a string of comma
separated (ASCII) hex bytes to be specified (limit 1024). A
(single) space separated string of hex bytes is also allowed
but the list needs to be in quotes. This option allows the
parameters to a control dpage to be specified. The string
given should not include the first 4 bytes (i.e. page code
and length). See the DATA SUPPLIED section below.</p>

<p style="margin-left:11%;"><b>-d</b>, <b>--data</b>=-</p>

<p style="margin-left:22%;">reads one or more data strings
from stdin, limit almost 2**16 bytes. stdin may provide
ASCII hex as a comma separated list (i.e. as with the
<i>--data=H,H...</i> option). Additionally spaces, tabs and
line feeds are permitted as separators from stdin . Stops
reading stdin when an EOF is detected. See the DATA SUPPLIED
section below.</p>

<p style="margin-left:11%;"><b>-d</b>,
<b>--data</b>=@<i>FN</i></p>

<p style="margin-left:22%;">reads one or more data strings
from the file called <i>FN</i>, limit almost 2**16 bytes.
The contents of the file is decoded in the same fashion as
stdin described in the previous option. See the DATA
SUPPLIED section below.</p>

<p style="margin-left:11%;"><b>-D</b>,
<b>--descriptor</b>=<i>DES</i></p>

<p style="margin-left:22%;">where <i>DES</i> is a
descriptor name (string) as found in the Element Descriptor
dpage. This is a medium level indexing alternative to the
low level <i>--index=</i> options. If the descriptor name
contains a space then <i>DES</i> needs to be surrounded by
quotes (single or double) or the space escaped (e.g.
preceded by a backslash). See the DESCRIPTOR NAME, DEVICE
SLOT NUMBER AND SAS ADDRESS section below.</p>

<p style="margin-left:11%;"><b>-x</b>,
<b>--dev-slot-num</b>=<i>SN</i>, <b>--dsn</b>=<i>SN</i></p>

<p style="margin-left:22%;">where <i>SN</i> is a device
slot number found in the Additional Element Status dpage.
Only entries for FCP and SAS devices (with EIP=1) have
device slot numbers. <i>SN</i> must be a number in the range
0 to 255 (inclusive). 255 is used to indicate there is no
corresponding device slot. This is a medium level indexing
alternative to the low level <i>--index=</i> options. See
the DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS
section below.</p>

<p style="margin-left:11%;"><b>-E</b>,
<b>--eiioe</b>=<i>A_F</i></p>

<p style="margin-left:22%;"><i>A_F</i> is either the string
&rsquo;auto&rsquo; or &rsquo;force&rsquo;. There was some
fuzziness in the interpretation of the &rsquo;element
index&rsquo; field in the Additional Element Status (AES)
dpage between SES-2 and SES-3. The EIIOE bit was introduced
to resolve the problem but not all enclosures have caught
up. In the SES-3 revision 12 draft the EIIOE bit was
expanded to a 2 bit EIIOE field. Using
&rsquo;--eiioe=force&rsquo; will decode the AES dpage as if
the EIIOE field is set to 1. Using
&rsquo;--eiioe=auto&rsquo; will decode the AES dpage as if
the EIIOE field is set to 1 if the first AES descriptor has
its EIP bit set and its element index field is 1 (in other
words a heuristic to guess whether the EIIOE field should be
set to 1 or 0). <br>
If the enclosure sets the actual EIIOE field to 1 or more
then this option has no effect. It is recommended that HP
JBOD users set --eiioe=auto .</p>

<p style="margin-left:11%;"><b>-e</b>,
<b>--enumerate</b></p>

<p style="margin-left:22%;">enumerate all known dpage names
and SES elements when this option is given once. <br>
If <i>--enumerate</i> is given twice, then the recognised
acronyms for the <i>--clear=STR</i>, <i>--get=STR</i> and
<i>--set=STR</i> options are listed. The utility exits after
listing this information, so most other options and
<i>DEVICE</i> are ignored. Since there are many acronyms for
the Enclosure Control/Status dpage then the output can be
further restricted by giving the <i>--index=IIA</i> option
(e.g. &quot;sg_ses -ee -I ts&quot; to only show the acronyms
associated with the Enclosure Control/Status dpage&rsquo;s
Temperature Sensor Element Type).</p>

<p style="margin-left:11%;"><b>-f</b>, <b>--filter</b></p>

<p style="margin-left:22%;">cuts down on the amount of
output from the Enclosure Status dpage and the Additional
Element Status dpage. When this option is given, any line
which has all its binary flags cleared (i.e. 0) is filtered
out (i.e. ignored). If a line has some other value on it
(e.g. a temperature) then it is output. When this option is
used twice only elements associated with the
&quot;status=ok&quot; field (in the Enclosure status dpage)
are output. The <i>--filter</i> option is useful for
reducing the amount of output generated by the <i>--join</i>
option.</p>

<p style="margin-left:11%;"><b>-G</b>,
<b>--get</b>=<i>STR</i></p>

<p style="margin-left:22%;">Used to read a field in a
status element. Must be used together with a an indexing
option to specify which element is to be read. By default
the Enclosure Status dpage is read, the only other dpages
that can be read are the Threshold In and Additional Element
Status dpages. If a value is found it is output in decimal
to stdout (by default) or in hexadecimal preceded by
&quot;0x&quot; if the <i>--hex</i> option is also given. See
the STR FORMAT and the CLEAR, GET, SET sections below.</p>

<p style="margin-left:11%;"><b>-h</b>, <b>--help</b></p>

<p style="margin-left:22%;">output the usage message then
exit. Since there is a lot of information, it is split into
two pages. The most important is shown on the first page.
Use this option twice (e.g. &rsquo;-hh&rsquo;) to output the
second page. Note: the <i>--enumerate</i> option might also
be viewed as a help or usage type option. And like this
option it has a &quot;given twice&quot; form:
&rsquo;-ee&rsquo;.</p>

<p style="margin-left:11%;"><b>-H</b>, <b>--hex</b></p>

<p style="margin-left:22%;">If the <i>--get=STR</i> option
is given then output the value found (if any) in
hexadecimal, with a leading &quot;0x&quot;. Otherwise output
the response in hexadecimal; with trailing ASCII if given
once, without it if given twice, and simple hex if given
three or more times. Ignored when all elements from several
dpages are being accessed (e.g. when the <i>--join</i>
option is used). Also see the <i>--raw</i> option which may
be used with this option. <br>
To dump one of more dpage responses to stdout in ASCII
parsable hexadecimal use <i>-HHH</i> or <i>-HHHH</i>. The
triple H form only outputs hexadecimals which is fine for a
single dpage response. When all dpages are dumped (e.g. with
<i>--page=all</i>) then the quad H form adds the name of
each dpage following a hash mark (&rsquo;#&rsquo;). The
<i>--data=</i> option parser ignores everything from and
including a hash mark to the end of the line. Hence the
output of the quad H form is still parsable plus it is
easier for users to view and possibly edit. <i>-HHHHH</i>
(that is 5) adds the page code in hex after the page&rsquo;s
name in the comment.</p>

<p style="margin-left:11%;"><b>-I</b>,
<b>--index</b>=<i>IIA</i></p>

<p style="margin-left:22%;">where <i>IIA</i> is either an
individual index (II) or an Element type abbreviation (A).
See the INDEXES section below. If the <i>--page=PG</i>
option is not given then the Enclosure Status (or Control)
dpage is assumed. May be used with the <i>--join</i> option
or one of the <i>--clear=STR</i>, <i>--get=STR</i> or
<i>--set=STR</i> options. To enumerate the available Element
type abbreviations use the <i>--enumerate</i> option.</p>

<p style="margin-left:11%;"><b>-I</b>,
<b>--index</b>=<i>TIA,II</i></p>

<p style="margin-left:22%;">where <i>TIA,II</i> is an type
header index (TI) or Element type abbreviation (A) followed
by an individual index (II). See the INDEXES section below.
If the <i>--page=PG</i> option is not given then the
Enclosure Status (or Control) dpage is assumed. May be used
with the <i>--join</i> option or one of the
<i>--clear=STR</i>, <i>--get=STR</i> or <i>--set=STR</i>
options. To enumerate the available Element type
abbreviations use the <i>--enumerate</i> option.</p>

<p style="margin-left:11%;"><b>-i</b>,
<b>--inner-hex</b></p>

<p style="margin-left:22%;">the outer levels of a status
dpage are decoded and printed out but the innermost level
(e.g. the Element Status Descriptor) is output in hex. Also
active with the Additional Element Status and Threshold In
dpages. Can be used with an indexing option and/or
<i>--join</i> options.</p>

<p style="margin-left:11%;"><b>-j</b>, <b>--join</b></p>

<p style="margin-left:22%;">group elements from the Element
Descriptor, Enclosure Status and Additional Element Status
dpages. If this option is given twice then elements from the
Threshold In dpage are also grouped. The order is dictated
by the Configuration dpage. <br>
There can be a bewildering amount of information in the
&quot;join&quot; output. The default is to output
everything. Several additional options are provided to cut
down the amount displayed. If the indexing options is given,
only the matching elements and their associated fields are
output. The <i>--filter</i> option (see its description) can
be added to reduce the amount of output. Also
&quot;--page=aes&quot; (or &quot;-p 0xa&quot;) can be added
to suppress the output of rows that don&rsquo;t have a
&quot;aes&quot; dpage component. See the INDEXES and
DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS sections
below.</p>

<p style="margin-left:11%;"><b>-l</b>, <b>--list</b></p>

<p style="margin-left:22%;">This option is equivalent to
<i>--enumerate</i>. See that option.</p>

<p style="margin-left:11%;"><b>-M</b>, <b>--mask</b></p>

<p style="margin-left:22%;">When modifying elements, the
default action is a read (status element), mask, modify
(based on <i>--clear=STR</i> or <i>--set=STR</i>) then write
back as the control element. The mask step is new in sg_ses
version 1.98 and is based on what is allowable (and in the
same location) in draft SES-3 revision 6. Those masks may
evolve, as they have in the past. This option re-instates
the previous logic which was to ignore the mask step. The
default action (i.e. without this option) is to perform the
mask step in the read-mask-modify-write sequence.</p>

<p style="margin-left:11%;"><b>-m</b>,
<b>--maxlen</b>=<i>LEN</i></p>

<p style="margin-left:22%;"><i>LEN</i> is placed in the
ALLOCATION LENGTH field of the SCSI RECEIVE DIAGNOSTIC
RESULTS commands sent by the utility. It represents the
maximum size of data the SES device can return (in bytes).
It cannot exceed 65535 and defaults to 65532 (bytes). Some
systems may not permit such large sizes hence the need for
this option. If <i>LEN</i> is less than 0 or greater than
65535 then an error is generated. If <i>LEN</i> is 0 then
the default value is used, otherwise if it is less than 4
then it is ignored (and a warning is sent to stderr).</p>

<p style="margin-left:11%;"><b>-n</b>,
<b>--nickname</b>=<i>SEN</i></p>

<p style="margin-left:22%;">where <i>SEN</i> is the new
Subenclosure Nickname. Only the first 32 characters (bytes)
of <i>SEN</i> are used, if more are given they are ignored.
See the SETTING SUBENCLOSURE NICKNAME section below.</p>

<p style="margin-left:11%;"><b>-N</b>,
<b>--nickid</b>=<i>SEID</i></p>

<p style="margin-left:22%;">where <i>SEID</i> is the
Subenclosure identifier that the new Nickname (<i>SEN</i>)
will be applied to. So <i>SEID</i> must be an existing
Subenclosure identifier. The default value is 0 which is the
main enclosure.</p>

<p style="margin-left:11%;"><b>-p</b>,
<b>--page</b>=<i>PG</i></p>

<p style="margin-left:22%;">where <i>PG</i> is a dpage
abbreviation or code (a number). If <i>PG</i> starts with a
digit it is assumed to be in decimal unless prefixed by 0x
for hex. Valid range is 0 to 255 (0x0 to 0xff) inclusive.
Default is dpage &rsquo;sdp&rsquo; which is page_code 0
(i.e. &quot;Supported Diagnostic Pages&quot;) if no other
options are given. <br>
Page code 0xff or abbreviation &quot;all&quot; is not a real
dpage (as the highest real dpage is 0x3f) but instead causes
all dpages whose page code is 0x2f or less to be output.
This can be used with either the <i>-HHHH</i> or <i>-rr</i>
to send either hexadecimal ASCII or binary respectively to
stdout. <br>
To list the available dpage abbreviations give
&quot;xxx&quot; for <i>PG</i>; the same information can also
be found with the <i>--enumerate</i> option.</p>

<p style="margin-left:11%;"><b>-q</b>, <b>--quiet</b></p>

<p style="margin-left:22%;">this suppresses the number of
warnings and messages output. The exit status of the utility
is unaffected by this option.</p>

<p style="margin-left:11%;"><b>-r</b>, <b>--raw</b></p>

<p style="margin-left:22%;">outputs the chosen status dpage
in ASCII hex in a format suitable for a later invocation
using the <i>--data=</i> option. A dpage less its first 4
bytes (page code and length) is output. When used twice
(e.g. <i>-rr</i>) the full dpage contents is output in
binary to stdout. <br>
when <i>-rr</i> is used together with the <i>--data=-</i> or
<i>--data=@FN</i> then stdin or file FN is decoded as a
binary stream that continues to be read until an end of file
(EOF). Once that data is read then the internal raw option
is cleared to 0 so the output is not effected. So the
<i>-rr</i> option either changes how the input or output is
treated, but not both.</p>

<p style="margin-left:11%;"><b>-R</b>,
<b>--readonly</b></p>

<p style="margin-left:22%;">open the <i>DEVICE</i>
read-only (e.g. in Unix with the O_RDONLY flag). The default
is to open it read-write.</p>

<p style="margin-left:11%;"><b>-A</b>,
<b>--sas-addr</b>=<i>SA</i></p>

<p style="margin-left:22%;">this is an indexing method for
SAS end devices (e.g. SAS disks). The utility will try to
find the element or slot in the Additional Element Status
dpage whose SAS address matches <i>SA</i>. For a SAS disk or
tape that SAS address is its target port identifier for the
port connected to that element or slot. Most SAS disks and
tapes have two such target ports, usually numbered
consecutively. <br>
SATA devices in a SAS enclosure often receive
&quot;manufactured&quot; target port identifiers from a SAS
expander; typically will have a SAS address close to, but
different from, the SAS address of the expander itself. Note
that this manufactured target port identifier is different
from a SATA disk&rsquo;s WWN. <i><br>
SA</i> is a hex number that is up to 8 digits long. It may
have a leading &rsquo;0x&rsquo; or &rsquo;0X&rsquo; or a
trailing &rsquo;h&rsquo; or &rsquo;H&rsquo;. This option is
a medium level <br>
indexing alternative to the low level <i>--index=</i>
options. See the DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS
ADDRESS section below.</p>

<p style="margin-left:11%;"><b>-S</b>,
<b>--set</b>=<i>STR</i></p>

<p style="margin-left:22%;">Used to set an element field in
the Enclosure Control or Threshold Out dpage. Must be used
together with an indexing option to specify which element is
to be changed. The Enclosure Control dpage is assumed if the
<i>--page=PG</i> option is not given. See the STR FORMAT and
CLEAR, GET, SET sections below.</p>

<p style="margin-left:11%;"><b>-s</b>, <b>--status</b></p>

<p style="margin-left:22%;">will fetch dpage from the
<i>DEVICE</i> via a SCSI RECEIVE DIAGNOSTIC RESULTS command
(or from <i>--data=@FN</i>). In the absence of other options
that imply modifying a dpage (e.g. <i>--control</i> or
<i>--set=STR</i>) then <i>--status</i> is assumed, except
when the <i>--data=</i> option is given. When the
<i>--data=</i> option is given there is no default action:
either the <i>--control</i> or this option must be given to
distinguish between the two different ways that data will be
treated.</p>

<p style="margin-left:11%;"><b>-v</b>, <b>--verbose</b></p>

<p style="margin-left:22%;">increase the level of
verbosity. For example when this option is given four times
(in which case the short form is more convenient:
&rsquo;-vvvv&rsquo;) then if the internal join array has
been generated then it is output to stderr in a form
suitable for debugging.</p>

<p style="margin-left:11%;"><b>-V</b>, <b>--version</b></p>

<p style="margin-left:22%;">print the version string and
then exit.</p>

<p style="margin-left:11%;"><b>-w</b>, <b>--warn</b></p>

<p style="margin-left:22%;">warn about certain
irregularities with warnings sent to stderr. The join is a
complex operation that relies on information from several
dpages to be synchronized. The quality of SES devices vary
and to be fair, the descriptions from T10 drafts and
standards have been tweaked several times (see the EIIOE
field) in order to clear up confusion.</p>

<h2>INDEXES
<a name="INDEXES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">An enclosure
can have information about its disk and tape drives plus
other supporting components like power supplies spread
across several dpages. Addressing a specific element
(overall or individual) within a dpage is complicated. This
section describes low level indexing (i.e. choosing a single
element (or a group of related elements) from a large number
of elements). If available, the medium level indexing
described in the following section (DESCRIPTOR NAME, DEVICE
SLOT NUMBER AND SAS ADDRESS) might be simpler to use.</p>

<p style="margin-left:11%; margin-top: 1em">The
Configuration dpage is key to low level indexing: it
contains a list of &quot;type headers&quot;, each of which
contains an Element type (e.g. Array Device Slot), a
Subenclosure identifier (0 for the primary enclosure) and a
&quot;Number of possible elements&quot;. Corresponding to
each type header, the Enclosure Status dpage has one
&quot;overall&quot; element plus &quot;Number of possible
elements&quot; individual elements all of which have the
given Element type. For some Element types the &quot;Number
of possible elements&quot; will be 0 so the Enclosure Status
dpage has only one &quot;overall&quot; element corresponding
to that type header. The Element Descriptor dpage and the
Threshold (In and Out) dpages follow the same pattern as the
Enclosure Status dpage.</p>

<p style="margin-left:11%; margin-top: 1em">The numeric
index corresponding to the overall element is
&quot;-1&quot;. If the Configuration dpage indicates a
particular element type has &quot;n&quot; elements and n is
greater than 0 then its indexes range from 0 to n-1 .</p>

<p style="margin-left:11%; margin-top: 1em">The Additional
Element Status dpage is a bit more complicated. It has
entries for &quot;Number of possible elements&quot; of
certain Element types. It does not have entries
corresponding to the &quot;overall&quot; elements. To make
the correspondence a little clearer each descriptor in this
dpage optionally contains an &quot;Element Index
Present&quot; (EIP) indicator. If EIP is set then each
element&rsquo;s &quot;Element Index&quot; field refers to
the position of the corresponding element in the Enclosure
Status dpage.</p>

<p style="margin-left:11%; margin-top: 1em">Addressing a
single overall element or a single individual element is
done with two indexes: TI and II. Both are origin 0. TI=0
corresponds to the first type header entry which must be a
Device Slot or Array Device Slot Element type (according to
the SES-2 standard). To address the corresponding overall
instance, II is set to -1, otherwise II can be set to the
individual instance index. As an alternative to the type
header index (TI), an Element type abbreviation (A)
optionally followed by a number (e.g. &quot;ps&quot; refers
to the first Power Supply Element type; &quot;ps1&quot;
refers to the second) can be given.</p>

<p style="margin-left:11%; margin-top: 1em">One of two
command lines variants can be used to specify indexes:
<i>--index=TIA,II</i> where <i>TIA</i> is either an type
header index (TI) or an Element type abbreviation (A) (e.g.
&quot;ps&quot; or &quot;ps1&quot;). <i>II</i> is either an
individual index or &quot;-1&quot; to specify the overall
element. The second variant is <i>--index=IIA</i> where
<i>IIA</i> is either an individual index (II) or an Element
type abbreviation (A). When <i>IIA</i> is an individual
index then the option is equivalent to <i>--index=0,II</i>.
When <i>IIA</i> is an Element type abbreviation then the
option is equivalent to <i>--index=A,-1</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Wherever an
individual index is applicable, it can be replaced by an
individual index range. It has the form:
&lt;first_ii&gt;-&lt;last_ii&gt;. For example:
&rsquo;3-5&rsquo; will select individual indexes 3, 4 and 5
.</p>

<p style="margin-left:11%; margin-top: 1em">To cope with
vendor specific Element types (which should be in the range
128 to 255) the Element type can be given as a number with a
leading underscore. For example these are equivalent:
<i>--index=arr</i> and <i>--index=_23</i> since the Array
Device Slot Element type value is 23. Also
<i>--index=ps1</i> and <i>--index=_2_1</i> are
equivalent.</p>

<p style="margin-left:11%; margin-top: 1em">Another
example: if the first type header in the Configuration dpage
has has Array Device Slot Element type then
<i>--index=0,-1</i> is equivalent to <i>--index=arr</i>.
Also <i>--index=arr,3</i> is equivalent to
<i>--index=3</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>--index=</i> options can be used to reduce the amount of
output (e.g. only showing the element associated with the
second 12 volt power supply). They may also be used together
with with the <i>--clear=STR</i>, <i>--get=STR</i> and
<i>--set=STR</i> options which are described in the STR
section below.</p>

<h2>DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS
<a name="DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The three
options: <i>--descriptor=DES</i>, <i>--dev-slot-num=SN</i>
and <i>--sas-addr=SA</i> allow medium level indexing, as an
alternative to the low level <i>--index=</i> options. Only
one of the three options can be used in an invocation. Each
of the three options implicitly set the <i>--join</i> option
since they need either the Element Descriptor dpage or the
Additional Element Status dpage as well as the dpages needed
by the <i>--index=</i> option.</p>

<p style="margin-left:11%; margin-top: 1em">These medium
level indexing options need support from the SES device and
that support is optional. For example the
<i>--descriptor=DES</i> needs the Element Descriptor dpage
provided by the SES device however that is optional. Also
the provided descriptor names need to be useful, and having
descriptor names which are all &quot;0&quot; is not very
useful. Also some elements (e.g. overall elements) may not
have descriptor names.</p>

<p style="margin-left:11%; margin-top: 1em">These medium
level indexing options can be used to reduce the amount of
output (e.g. only showing the elements related to device
slot number 3). They may also be used together with with the
<i>--clear=STR</i>, <i>--get=STR</i> and <i>--set=STR</i>
options which are described in the following section. Note
that even if a field can be set (e.g. &quot;do not
remove&quot; (dnr)) and that field can be read back with
<i>--get=STR</i> confirming that change, the disk array may
still ignore it (e.g. because it does not have the mechanism
to lock the disk drawer).</p>

<h2>STR FORMAT
<a name="STR FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <i>STR</i>
operands of the <i>--clear=STR</i>, <i>--get=STR</i> and
<i>--set=STR</i> options all have the same structure. There
are two forms: <br>
&lt;acronym&gt;[=&lt;value&gt;] <br>

&lt;start_byte&gt;:&lt;start_bit&gt;[:&lt;num_bits&gt;][=&lt;value&gt;]</p>

<p style="margin-left:11%; margin-top: 1em">The
&lt;acronym&gt; is one of a list of common fields (e.g.
&quot;ident&quot; and &quot;fault&quot;) that the utility
converts internally into the second form. The
&lt;start_byte&gt; is usually in the range 0 to 3, the
&lt;start_bit&gt; must be in the range 0 to 7 and the
&lt;num_bits&gt; must be in the range 1 to 64 (default 1).
The number of bits are read in the left to right sense of
the element tables shown in the various SES draft documents.
For example the 8 bits of byte 2 would be represented as
2:7:8 with the most significant bit being 2:7 and the least
significant bit being 2:0 .</p>

<p style="margin-left:11%; margin-top: 1em">The
&lt;value&gt; is optional but is ignored if provided to
<i>--get=STR</i>. For <i>--set=STR</i> the default
&lt;value&gt; is 1 while for <i>--clear=STR</i> the default
value is 0 . &lt;value&gt; is assumed to be decimal,
hexadecimal values can be given in the normal fashion.</p>

<p style="margin-left:11%; margin-top: 1em">The supported
list of &lt;acronym&gt;s can be viewed by using the
<i>--enumerate</i> option twice (or &quot;-ee&quot;).</p>

<h2>CLEAR, GET, SET
<a name="CLEAR, GET, SET"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>--clear=STR</i>, <i>--get=STR</i> and <i>--set=STR</i>
options can be used up to 8 times in the same invocation.
Any &lt;acronym&gt;s used in the <i>STR</i> operands must
refer to the same dpage.</p>

<p style="margin-left:11%; margin-top: 1em">When multiple
of these options are used (maximum: 8), they are applied in
the order in which they appear on the command line. So if
options contradict each other, the last one appearing on the
command line will be enforced. When there are multiple
<i>--clear=STR</i> and <i>--set=STR</i> options, then the
dpage they refer to is only written after the last one.</p>

<h2>DATA SUPPLIED
<a name="DATA SUPPLIED"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
describes the two scenarios that can occur when the
<i>--data=</i> option is given. These scenarios are the same
irrespective of whether the argument to the <i>--data=</i>
option is a string of hex bytes on the command line, stdin
(indicated by <i>--data=-</i>) or names a file (e.g.
<i>--data=@thresh_in_dpage.hex</i>).</p>

<p style="margin-left:11%; margin-top: 1em">The first
scenario is flagged by the <i>--control</i> option. It uses
the supplied data to build a &rsquo;control&rsquo; dpage
that will be sent to the <i>DEVICE</i> using the SCSI SCSI
SEND DIAGNOSTIC command. The supplied dpage data should not
include its first 4 bytes. Those 4 bytes are added by this
utility using the <i>--page=PG</i> option with <i>PG</i>
placed at byte offset 0). If needed, the <i>--byte1=B1</i>
option sets byte offset 1, else 0 is placed in that
position. The number of bytes decoded from the data provided
(i.e. its length) goes into byte offsets 2 and 3.</p>

<p style="margin-left:11%; margin-top: 1em">The second
scenario is flagged by the <i>--status</i> option. It
decodes the supplied data assuming that it represents the
response to one or more SCSI RECEIVE DIAGNOSTIC RESULTS
commands. Those responses have typically been captured from
some earlier invocation(s) of this utility. Those earlier
invocations could use the &rsquo;-HHH&rsquo; or
&rsquo;-HHHH&rsquo; option and file redirection to capture
that response (or responses) in hexadecimal. The supplied
dpage response data is decoded according to the other
command line options. For example the <i>--join</i> option
could be given and that would require the data from multiple
dpages typically: Configuration, Enclosure status, Element
descriptor and Additional element status dpages. If in doubt
use <i>--page=all</i> in the capture phase; having more
dpages than needed is not a problem.</p>

<p style="margin-left:11%; margin-top: 1em">By default the
user supplied data is assumed to be ASCII hexadecimal in
lines that don&rsquo;t exceed 512 characters. Anything on a
line from and including a hash mark (&rsquo;#&rsquo;) to the
end of line is ignored. An end of line can be a LF or CR,LF
and blank lines are ignored. Each separated pair (or single)
hexadecimal digits represent a byte (and neither a leading
&rsquo;0x&rsquo; nor a trailing &rsquo;h&rsquo; should be
given). Separators are either space, tab, comma or end of
line.</p>

<p style="margin-left:11%; margin-top: 1em">Alternatively
binary can be used and this is flagged by the
&rsquo;-rr&rsquo; option. The <i>--data=H,H...</i> form
cannot use binary values for the &rsquo;H&rsquo;s, only
ASCII hexadecimal. The other two forms (<i>--data=-</i> and
<i>--data=@FN</i>) may contain binary data. Note that when
the &rsquo;-rr&rsquo; option is used with <i>--data=@FN</i>
that it only changes the interpretation of the input data,
it does not change the decoding and output
representation.</p>

<h2>CHANGING STATE
<a name="CHANGING STATE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This utility
has various techniques for changing the state of a SES
device. As noted above this is typically a read-modify-write
type operation. Most modifiable dpages have a
&quot;status&quot; (or &quot;in&quot;) page that can be
read, and a corresponding &quot;control&quot; (or
&quot;out&quot;) dpage that can be written back to change
the state of the enclosure.</p>

<p style="margin-left:11%; margin-top: 1em">The lower level
technique provided by this utility involves outputting a
&quot;status&quot; dpage in hex with <i>--raw</i>. Then a
text editor can be used to edit the hex (note: to change an
Enclosure Control descriptor the SELECT bit needs to be
set). Next the control dpage data can fed back with the
<i>--data=H,H...</i> option together with the
<i>--control</i> option; the <i>--byte1=B1</i> option may
need to be given as well.</p>

<p style="margin-left:11%; margin-top: 1em">Changes to the
Enclosure Control dpage (and the Threshold Out dpage) can be
done at a higher level. This involves choosing a dpage (the
default in this case is the Enclosure Control dpage). Next
choose an individual or overall element index (or name it
with its Element Descriptor string). Then give the
element&rsquo;s name (e.g. &quot;ident&quot; for RQST IDENT)
or its position within that element (e.g. in an Array Device
Slot Control element RQST IDENT is byte 2, bit 1 and 1 bit
long (&quot;2:1:1&quot;)). Finally a value can be given, if
not the value for <i>--set=STR</i> defaults to 1 and for
<i>--clear=STR</i> defaults to 0.</p>

<h2>SETTING SUBENCLOSURE NICKNAME
<a name="SETTING SUBENCLOSURE NICKNAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The format of
the Subenclosure Nickname control dpage is different from
its corresponding status dpage. The status dpage reports all
Subenclosure Nicknames (and Subenclosure identifier 0 is the
main enclosure) while the control dpage allows only one of
them to be changed. Therefore using the <b>--data</b> option
technique to change a Subenclosure nickname is difficult
(but still possible).</p>

<p style="margin-left:11%; margin-top: 1em">To simplify
changing a Subenclosure nickname the <i>--nickname=SEN</i>
and <i>--nickid=SEID</i> options have been added. If the
<i>SEN</i> string contains spaces or other punctuation, it
should be quoted: surrounded by single or double quotes (or
the offending characters escaped). If the
<i>--nickid=SEID</i> is not given then a Subenclosure
identifier of 0 is assumed. As a guard the <i>--control</i>
option must also be given. If the <i>--page=PG</i> option is
not given then <i>--page=snic</i> is assumed.</p>

<p style="margin-left:11%; margin-top: 1em">When
<i>--nickname=SEN</i> is given then the Subenclosure
Nickname Status dpage is read to obtain the Generation Code
field. That Generation Code together with no more than 32
bytes from the Nickname (<i>SEN</i>) and the Subenclosure
Identifier (<i>SEID</i>) are written to the Subenclosure
Nickname Control dpage.</p>

<p style="margin-left:11%; margin-top: 1em">There is an
example of changing a nickname in the EXAMPLES section
below.</p>

<h2>NVME ENCLOSURES
<a name="NVME ENCLOSURES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Support has
been added to sg_ses (actually, its underlying library) for
NVMe (also known as NVM Express) Enclosures. It can be
considered experimental in sg3_utils package version 1.43
and sg_ses version 2.34 .</p>

<p style="margin-left:11%; margin-top: 1em">This support is
based on a decision by NVME-MI (Management Interface)
developers to support the SES-3 standard. This was
facilitated by adding NVME-MI SES Send and SES Receive
commands that tunnel dpage contents as used by SES.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This utility
can be used to fetch arbitrary (i.e. non SES) dpages (using
the SCSI READ DIAGNOSTIC command). To this end the
<i>--page=PG</i> and <i>--hex</i> options would be
appropriate. Non-SES dpages can be sent to a device with the
sg_senddiag utility.</p>

<p style="margin-left:11%; margin-top: 1em">The most
troublesome part of the join operation is associating
Additional Element Status descriptors correctly. At least
one SES device vendor has misinterpreted the SES-2 standard,
specifically with its &quot;element index&quot; field
interpretation. The code in this utility interprets the
&quot;element index&quot; field as per the SES-2 standard
and if that yields an inappropriate Element type, adjusts
its indexing to follow that vendor&rsquo;s
misinterpretation. The SES-3 drafts have introduced the
EIIOE (Element Index Includes Overall Elements) bit which
later became a 2 bit field to resolve this ambiguity. See
the <i>--eiioe=A_F</i> option.</p>

<p style="margin-left:11%; margin-top: 1em">In draft SES-3
revision 5 the &quot;Door Lock&quot; element name was
changed to the &quot;Door&quot; (and an OPEN field was added
to the status element). As a consequence the former
&rsquo;dl&rsquo; element type abbreviation has been changed
to &rsquo;do&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">There is a
related command set called SAF-TE (SCSI attached
fault-tolerant enclosure) for enclosure (including RAID)
status and control. SCSI devices that support SAF-TE report
&quot;Processor&quot; peripheral device type (0x3) in their
INQUIRY response. See the sg_safte utility in this package
or the safte-monitor utility on the Internet.</p>

<p style="margin-left:11%; margin-top: 1em">The internal
join array is statically allocated and its size is
controlled by the MX_JOIN_ROWS define. Its current value is
520.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Examples can
also be found at http://sg.danny.cz/sg/sg_ses.html</p>

<p style="margin-left:11%; margin-top: 1em">The following
examples use Linux device names. For suitable device names
in other supported Operating Systems see the sg3_utils(8)
man page.</p>

<p style="margin-left:11%; margin-top: 1em">To view the
supported dpages:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
/dev/bsg/6:0:2:0</p>

<p style="margin-left:11%; margin-top: 1em">To view the
Configuration Diagnostic dpage:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--page=cf /dev/bsg/6:0:2:0</p>

<p style="margin-left:11%; margin-top: 1em">To view the
Enclosure Status dpage:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--page=es /dev/bsg/6:0:2:0</p>

<p style="margin-left:11%; margin-top: 1em">To get the
(attached) SAS address of that device (which is held in the
Additional Element Sense dpage (dpage 10)) printed on
hex:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses -p aes
-D ArrayDevice07 -G at_sas_addr -H /dev/sg3</p>

<p style="margin-left:11%; margin-top: 1em">To collate the
information in the Enclosure Status, Element Descriptor and
Additional Element Status dpages the <i>--join</i> option
can be used:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses --join
/dev/sg3</p>

<p style="margin-left:11%; margin-top: 1em">This will
produce a lot of output. To filter out lines that
don&rsquo;t contain much information add the <i>--filter</i>
option:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses --join
--filter /dev/sg3</p>

<p style="margin-left:11%; margin-top: 1em">Fields in the
various elements of the Enclosure Control and Threshold
dpages can be changed with the <i>--clear=STR</i> and
<i>--set=STR</i> options. [All modifiable dpages can be
changed with the <i>--raw</i> and <i>--data=H,H...</i>
options.] The following example looks at making the
&quot;ident&quot; LED (also called &quot;locate&quot;) flash
on &quot;ArrayDevice07&quot; which is a disk (or more
precisely the carrier drawer the disk is in):</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--index=7 --set=2:1:1 /dev/sg3</p>

<p style="margin-left:11%; margin-top: 1em">If the Element
Descriptor diagnostic dpage shows that
&quot;ArrayDevice07&quot; is the descriptor name associated
with element index 7 then this invocation is equivalent to
the previous one:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--descriptor=ArrayDevice07 --set=2:1:1 /dev/sg3</p>

<p style="margin-left:11%; margin-top: 1em">Further the
byte 2, bit 1 (for 1 bit) field in the Array Device Slot
Control element is RQST IDENT for asking a disk carrier to
flash a LED so it can be located. In this case
&quot;ident&quot; (or &quot;locate&quot;) is accepted as an
acronym for that field:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--descriptor=ArrayDevice07 --set=ident /dev/sg3</p>

<p style="margin-left:11%; margin-top: 1em">To stop that
LED flashing:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--dev-slot-num=7 --clear=ident /dev/sg3</p>

<p style="margin-left:11%; margin-top: 1em">The above
assumes the descriptor name &rsquo;ArrayDevice07&rsquo;
corresponds to device slot number 7.</p>

<p style="margin-left:11%; margin-top: 1em">Now for an
example of a more general but lower level technique for
changing a modifiable diagnostic dpage. The String (In and
Out) diagnostics dpage is relatively simple (compared with
the Enclosure Status/Control dpage). However the use of this
lower level technique is awkward involving three steps:
read, modify then write. First check the current String (In)
dpage contents:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--page=str /dev/bsg/6:0:2:0</p>

<p style="margin-left:11%; margin-top: 1em">Now the
&quot;read&quot; step. The following command will send the
contents of the String dpage (from byte 4 onwards) to
stdout. The output will be in ASCII hex with pairs of hex
digits representing a byte, 16 pairs per line, space
separated. The redirection puts stdout in a file called
&quot;t&quot;:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--page=str --raw /dev/bsg/6:0:2:0 &gt; t</p>

<p style="margin-left:11%; margin-top: 1em">Then with the
aid of the SES-3 document (in revision 3: section 6.1.6) use
your favourite editor to change t. The changes can be sent
to the device with:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--page=str --control --data=- /dev/bsg/6:0:2:0 &lt; t</p>

<p style="margin-left:11%; margin-top: 1em">If the above is
successful, the String dpage should have been changed. To
check try:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--page=str /dev/bsg/6:0:2:0</p>

<p style="margin-left:11%; margin-top: 1em">To change the
nickname on the main enclosure:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--nickname=&rsquo;1st enclosure&rsquo; --control
/dev/bsg/6:0:2:0</p>

<p style="margin-left:11%; margin-top: 1em">To capture the
whole state of an enclosure (from a SES perspective) for
later analysis, this can be done:</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--page=all -HHHH /dev/sg5 &gt; enc_sg5_all.hex</p>

<p style="margin-left:11%; margin-top: 1em">Note that if
there are errors or warnings they will be sent to stderr so
they will appear on the command line (since only stdout is
redirected). A text editor could be used to inspect
enc_sg5_all.hex . If all looks in order at some later time,
potentially on a different machine where enc_sg5_all.hex has
been copied, a &quot;join&quot; could be done. Note that
join reflects the state of the enclosure when the capture
was done.</p>

<p style="margin-left:11%; margin-top: 1em">sg_ses
--data=@enc_sg5_all.hex --status --join</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The exit status
of sg_ses is 0 when it is successful. Otherwise see the
sg3_utils(8) man page.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Written by
Douglas Gilbert.</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report bugs to
&lt;dgilbert at interlog dot com&gt;.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2004-2018 Douglas Gilbert <br>
This software is distributed under a FreeBSD license. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>sg_inq,
sg_safte, sg_senddiag, sg_ses_microcode, sg3_utils
(sg3_utils); safte-monitor (Internet)</b></p>
<hr>
</body>
</html>
