<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 03:14:53 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>xfs_io</title>

</head>
<body>

<h1 align="center">xfs_io</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#CONCEPTS">CONCEPTS</a><br>
<a href="#FILE I/O COMMANDS">FILE I/O COMMANDS</a><br>
<a href="#MEMORY MAPPED I/O COMMANDS">MEMORY MAPPED I/O COMMANDS</a><br>
<a href="#FILESYSTEM COMMANDS">FILESYSTEM COMMANDS</a><br>
<a href="#OTHER COMMANDS">OTHER COMMANDS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">xfs_io - debug
the I/O path of an XFS filesystem</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>xfs_io</b> [
<b>-adfimrRstxT</b> ] [ <b>-c</b> <i>cmd</i> ] ... [
<b>-C</b> <i>cmd</i> ] ... [ <b>-p</b> <i>prog</i> ] <i>[
file ]</i> <b><br>
xfs_io -V</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>xfs_io</b>
is a debugging tool like <b>xfs_db</b>(8), but is aimed at
examining the regular file I/O paths rather than the raw XFS
volume itself. These code paths include not only the obvious
read/write/mmap interfaces for manipulating files, but also
cover all of the XFS extensions (such as space
preallocation, additional inode flags, etc).</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>xfs_io</b>
commands may be run interactively (the default) or as
arguments on the command line. Interactive mode always runs
commands on the current open file, whilst commands run from
the command line may be repeated on all open files rather
than just the current open file. In general, open file
iteration will occur for commands that operate on file
content or state. In contrast, commands that operate on
filesystem or system-wide state will only be run on the
current file regardless of how many files are currently
open. Multiple arguments may be given on the command line
and they are run in the sequence given. The program exits
one all commands have been run.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-c</b> <i>cmd</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Run the specified command on all currently open files.
To maintain compatibility with historical usage, commands
that can not be run on all open files will still be run but
only execute once on the current open file. Multiple
<b>-c</b> arguments may be given and may be interleaved on
the command line in any order with <b>-C</b> commands.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-C</b> <i>cmd</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Run the specified command only on the current open file.
Multiple <b>-C</b> arguments may be given and may be
interleaved on the command line in any order with <b>-c</b>
commands.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-p</b> <i>prog</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Set the program name for prompts and some error
messages, the default value is <b>xfs_io</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-f</b></p></td>
<td width="4%"></td>
<td width="74%">


<p>Create <i>file</i> if it does not already exist.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-r</b></p></td>
<td width="4%"></td>
<td width="74%">


<p>Open <i>file</i> read-only, initially. This is required
if <i>file</i> is immutable or append-only.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-i</b></p></td>
<td width="4%"></td>
<td width="74%">


<p>Start an idle thread. The purpose of this idle thread is
to test io from a multi threaded process. With single
threaded process, the file table is not shared and file
structs are not reference counted. Spawning an idle thread
can help detecting file struct reference leaks.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-x</b></p></td>
<td width="4%"></td>
<td width="74%">


<p>Expert mode. Dangerous commands are only available in
this mode. These commands also tend to require additional
privileges.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-V</b></p></td>
<td width="4%"></td>
<td width="74%">


<p>Prints the version number and exits.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The other
<b>open</b>(2) options described below are also available
from the command line.</p>

<h2>CONCEPTS
<a name="CONCEPTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>xfs_io</b>
maintains a number of open files and memory mappings. Files
can be initially opened on the command line (optionally),
and additional files can also be opened later.</p>

<p style="margin-left:11%; margin-top: 1em"><b>xfs_io</b>
commands can be broken up into three groups. Some commands
are aimed at doing regular file I/O - read, write, sync,
space preallocation, etc.</p>

<p style="margin-left:11%; margin-top: 1em">The second set
of commands exist for manipulating memory mapped regions of
a file - mapping, accessing, storing, unmapping, flushing,
etc.</p>

<p style="margin-left:11%; margin-top: 1em">The remaining
commands are for the navigation and display of data
structures relating to the open files, mappings, and the
filesystems where they reside.</p>

<p style="margin-left:11%; margin-top: 1em">Many commands
have extensive online help. Use the <b>help</b> command for
more details on any command.</p>

<h2>FILE I/O COMMANDS
<a name="FILE I/O COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>file [</b>
<i>N</i> <b>]</b></p>

<p style="margin-left:22%;">Display a list of all open
files and (optionally) switch to an alternate current open
file.</p>

<p style="margin-left:11%;"><b>open [[ -acdfrstRTPL ]</b>
<i>path</i> <b>]</b></p>

<p style="margin-left:22%;">Closes the current file, and
opens the file specified by <i>path</i> instead. Without any
arguments, displays statistics about the current file - see
the <b>stat</b> command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-a</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>opens append-only (O_APPEND).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-d</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>opens for direct I/O (O_DIRECT).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-f</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>creates the file if it doesn&rsquo;t already exist
(O_CREAT).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-r</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>opens read-only (O_RDONLY).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-s</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>opens for synchronous I/O (O_SYNC).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-t</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>truncates on open (O_TRUNC).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-n</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>opens in non-blocking mode if possible (O_NONBLOCK).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-T</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>create a temporary file not linked into the filesystem
namespace (O_TMPFILE). The pathname passed must refer to a
directory which is treated as virtual parent for the newly
created invisible file. Can not be used together with the
<b>-r</b> option.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-R</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>marks the file as a realtime XFS file after opening it,
if it is not already marked as such.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-P</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>opens the path as a referent only (O_PATH). This is
incompatible with other flags specifying other O_xxx flags
apart from <b>-L</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-L</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>doesn&rsquo;t follow symlinks (O_NOFOLLOW). This is
incompatible with other flags specifying other O_xxx flags
apart from <b>-P</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>o</b></p></td>
<td width="3%"></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">See the
<b>open</b> command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>close</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">Closes the current open file,
marking the next open file as current (if one exists).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>c</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>See the <b>close</b> command.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>chmod -r | -w</b></p>

<p style="margin-left:22%;">Change the mode of the
currently open file. The <b>-r</b> option will set the file
permissions to read-only (0444), whilst the <b>-w</b> option
will set the file permissions to read-write (0644). This
allows xfs_io to set up mismatches between the file
permissions and the open file descriptor read/write mode to
exercise permission checks inside various syscalls.</p>

<p style="margin-left:11%;"><b>pread [ -b</b> <i>bsize</i>
<b>] [ -v ] [ -FBR [ -Z</b> <i>seed</i> <b>] ] [ -V</b>
<i>vectors</i> <b>]</b> <i>offset <br>
length</i></p>

<p style="margin-left:22%;">Reads a range of bytes in a
specified blocksize from the given <i>offset</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-b</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>can be used to set the blocksize into which the
<b>read</b>(2) requests will be split. The default blocksize
is 4096 bytes.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-v</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>dump the contents of the buffer after reading, by
default only the count of bytes actually read is dumped.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-F</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>read the buffers in a forwards sequential direction.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-B</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>read the buffers in a reserve sequential direction.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-R</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>read the buffers in the give range in a random
order.</p> </td></tr>
</table>

<p style="margin-left:26%;"><b>-Z seed</b></p>

<p style="margin-left:32%;">specify the random number seed
used for random reads.</p>

<p style="margin-left:26%;"><b>-V vectors</b></p>

<p style="margin-left:32%;">Use the vectored IO read
syscall <b>preadv</b>(2) with a number of blocksize length
iovecs. The number of iovecs is set by the <i>vectors</i>
parameter.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>r</b></p></td>
<td width="10%"></td>
<td width="33%">


<p>See the <b>pread</b> command.</p></td>
<td width="45%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>pwrite [ -i</b> <i>file</i>
<b>] [ -dDwNOW ] [ -s</b> <i>skip</i> <b>] [ -b</b>
<i>size</i> <b>] [ -S</b> <i>seed</i> <b>] [ <br>
-FBR [ -Z</b> <i>zeed</i> <b>] ] [ -V</b> <i>vectors</i>
<b>]</b> <i>offset length</i></p>

<p style="margin-left:22%;">Writes a range of bytes in a
specified blocksize from the given <i>offset</i>. The bytes
written can be either a set pattern or read in from another
file before writing.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-i</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>allows an input <i>file</i> to be specified as the
source of the data to be written.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>causes direct I/O, rather than the usual buffered I/O,
to be used when reading the input file.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-w</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>call <b>fdatasync</b>(2) once all writes are complete
(included in timing results)</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-N</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Perform the <b>pwritev2</b>(2) call with
<i>RWF_NOWAIT</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-D</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Perform the <b>pwritev2</b>(2) call with
<i>RWF_DSYNC</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-O</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>perform pwrite once and return the (maybe partial) bytes
written.</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-W</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>call <b>fsync</b>(2) once all writes are complete
(included in timing results)</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>specifies the number of bytes to <i>skip</i> from the
start of the input file before starting to read.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-b</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>used to set the blocksize into which the <b>write</b>(2)
requests will be split. The default blocksize is 4096
bytes.</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-S</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>used to set the (repeated) fill pattern which is used
when the data to write is not coming from a file. The
default buffer fill pattern value is 0xcdcdcdcd.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-F</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>write the buffers in a forwards sequential
direction.</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-B</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>write the buffers in a reserve sequential direction.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-R</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>write the buffers in the give range in a random
order.</p> </td></tr>
</table>

<p style="margin-left:26%;"><b>-Z seed</b></p>

<p style="margin-left:32%;">specify the random number seed
used for random write</p>

<p style="margin-left:26%;"><b>-V vectors</b></p>

<p style="margin-left:32%;">Use the vectored IO write
syscall <b>pwritev</b>(2) with a number of blocksize length
iovecs. The number of iovecs is set by the <i>vectors</i>
parameter.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>w</b></p></td>
<td width="10%"></td>
<td width="35%">


<p>See the <b>pwrite</b> command.</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>bmap [ -adelpv ] [ -n</b>
<i>nx</i> <b>]</b></p>

<p style="margin-left:22%;">Prints the block mapping for
the current open file. Refer to the <b>xfs_bmap</b>(8)
manual page for complete documentation.</p>

<p style="margin-left:11%;"><b>fiemap [ -alv ] [ -n</b>
<i>nx</i> <b>] [</b> <i>offset</i> <b>[</b> <i>len</i>
<b>]]</b></p>

<p style="margin-left:22%;">Prints the block mapping for
the current open file using the fiemap ioctl. Options behave
as described in the <b>xfs_bmap</b>(8) manual page.</p>

<p style="margin-left:22%; margin-top: 1em">Optionally,
this command also supports passing the start offset from
where to begin the mapping and the length of that region.
The kernel will return any full extents which intersect with
the requested range, and the <b>fiemap</b> command will
print them in their entirety. If the requested range starts
or ends in a hole, <b>fiemap</b> will print the hole,
truncated to the requested range.</p>

<p style="margin-left:11%;"><b>extsize [ -R | -D ] [</b>
<i>value</i> <b>]</b></p>

<p style="margin-left:22%;">Display and/or modify the
preferred extent size used when allocating space for the
currently open file. If the <b>-R</b> option is specified, a
recursive descent is performed for all directory entries
below the currently open file (<b>-D</b> can be used to
restrict the output to directories only). If the target file
is a directory, then the inherited extent size is set for
that directory (new files created in that directory inherit
that extent size). The <i>value</i> should be specified in
bytes, or using one of the usual units suffixes (k, m, g, b,
etc). The extent size is always reported in units of
bytes.</p>

<p style="margin-left:11%;"><b>cowextsize [ -R | -D ] [</b>
<i>value</i> <b>]</b></p>

<p style="margin-left:22%;">Display and/or modify the
preferred copy-on-write extent size used when allocating
space for the currently open file. If the <b>-R</b> option
is specified, a recursive descent is performed for all
directory entries below the currently open file (<b>-D</b>
can be used to restrict the output to directories only). If
the target file is a directory, then the inherited CoW
extent size is set for that directory (new files created in
that directory inherit that CoW extent size). The
<i>value</i> should be specified in bytes, or using one of
the usual units suffixes (k, m, g, b, etc). The extent size
is always reported in units of bytes.</p>

<p style="margin-left:11%;"><b>allocsp</b> <i>size</i>
<b>0</b></p>

<p style="margin-left:22%;">Sets the size of the file to
<i>size</i> and zeroes any additional space allocated using
the XFS_IOC_ALLOCSP/XFS_IOC_FREESP system call described in
the <b>xfsctl</b>(3) manual page. <b>allocsp</b> and
<b>freesp</b> do exactly the same thing.</p>

<p style="margin-left:11%;"><b>freesp</b> <i>size</i>
<b>0</b></p>

<p style="margin-left:22%;">See the <b>allocsp</b>
command.</p>

<p style="margin-left:11%;"><b>fadvise [ -r | -s | [[ -d |
-n | -w ]</b> <i>offset length</i> <b>]]</b></p>

<p style="margin-left:22%;">On platforms which support it,
allows hints be given to the system regarding the expected
I/O patterns on the file. The range arguments are required
by some advise commands ([*] below), and the others must
have no range arguments. With no arguments, the
POSIX_FADV_NORMAL advice is implied (default readahead).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>the data will not be accessed again in the near future
(POSIX_FADV_DONTNEED[*]).</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-n</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>data will be accessed once and not be reused
(POSIX_FADV_NOREUSE[*]).</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-r</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>expect access to data in random order
(POSIX_FADV_RANDOM), which sets readahead to zero.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>expect access to data in sequential order
(POSIX_FADV_SEQUENTIAL), which doubles the default readahead
on the file.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-w</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>advises the specified data will be needed again
(POSIX_FADV_WILLNEED[*]) which forces the maximum
readahead.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>fdatasync</b></p>

<p style="margin-left:22%;">Calls <b>fdatasync</b>(2) to
flush the file&rsquo;s in-core data to disk.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>fsync</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Calls <b>fsync</b>(2) to flush all in-core file state to
disk.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>s</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>See the <b>fsync</b> command.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>sync_range [ -a | -b | -w ]
offset length</b></p>

<p style="margin-left:22%;">On platforms which support it,
allows control of syncing a range of the file to disk. With
no options, SYNC_FILE_RANGE_WRITE is implied on the range
supplied.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-a</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>wait for IO in the given range to finish after writing
(SYNC_FILE_RANGE_WAIT_AFTER).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-b</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>wait for IO in the given range to finish before writing
(SYNC_FILE_RANGE_WAIT_BEFORE).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-w</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>start writeback of dirty data in the given range
(SYNC_FILE_RANGE_WRITE).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>sync</b></p></td>
<td width="3%"></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Calls
<b>sync</b>(2) to flush all filesystems&rsquo; in-core data
to disk.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>syncfs</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Calls <b>syncfs</b>(2) to flush
this filesystem&rsquo;s in-core data to disk.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>resvsp</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Allocates reserved, unwritten
space for part of a file using the XFS_IOC_RESVSP system
call described in the <b>xfsctl</b>(3) manual page.</p>

<p style="margin-left:11%;"><b>unresvsp</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Frees reserved space for part
of a file using the XFS_IOC_UNRESVSP system call described
in the <b>xfsctl</b>(3) manual page.</p>

<p style="margin-left:11%;"><b>falloc [ -k ]</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Allocates reserved, unwritten
space for part of a file using the fallocate routine as
described in the <b>fallocate</b>(2) manual page.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-k</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>will set the FALLOC_FL_KEEP_SIZE flag as described in
<b>fallocate</b>(2).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>fcollapse</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Call fallocate with
FALLOC_FL_COLLAPSE_RANGE flag as described in the
<b>fallocate</b>(2) manual page to de-allocates blocks and
eliminates the hole created in this process by shifting data
blocks into the hole.</p>

<p style="margin-left:11%;"><b>finsert</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Call fallocate with
FALLOC_FL_INSERT_RANGE flag as described in the
<b>fallocate</b>(2) manual page to create the hole by
shifting data blocks.</p>

<p style="margin-left:11%;"><b>fpunch</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Punches (de-allocates) blocks
in the file by calling fallocate with the
FALLOC_FL_PUNCH_HOLE flag as described in the
<b>fallocate</b>(2) manual page.</p>

<p style="margin-left:11%;"><b>funshare</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Call fallocate with
FALLOC_FL_UNSHARE_RANGE flag as described in the
<b>fallocate</b>(2) manual page to unshare all shared blocks
within the range.</p>

<p style="margin-left:11%;"><b>fzero [ -k ]</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Call fallocate with
FALLOC_FL_ZERO_RANGE flag as described in the
<b>fallocate</b>(2) manual page to allocate and zero blocks
within the range. With the <b>-k</b> option, use the
FALLOC_FL_KEEP_SIZE flag as well.</p>

<p style="margin-left:11%;"><b>zero</b> <i>offset
length</i></p>

<p style="margin-left:22%;">Call xfsctl with
<b>XFS_IOC_ZERO_RANGE</b> as described in the
<b>xfsctl</b>(3) manual page to allocate and zero blocks
within the range.</p>

<p style="margin-left:11%;"><b>truncate</b>
<i>offset</i></p>

<p style="margin-left:22%;">Truncates the current file at
the given offset using <b>ftruncate</b>(2).</p>

<p style="margin-left:11%;"><b>sendfile -i</b>
<i>srcfile</i> <b>| -f</b> <i>N</i> <b>[</b> <i>offset
length</i> <b>]</b></p>

<p style="margin-left:22%;">On platforms which support it,
allows a direct in-kernel copy between two file descriptors.
The current open file is the target, the source must be
specified as another open file (<b>-f</b>) or by path
(<b>-i</b>).</p>

<p style="margin-left:11%;"><b>readdir [ -v ] [ -o</b>
<i>offset</i> <b>] [ -l</b> <i>length</i> <b>]</b></p>

<p style="margin-left:22%;">Read a range of directory
entries from a given offset of a directory.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-v</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>verbose mode - dump dirent content as defined in
<b>readdir</b>(3)</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-o</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>specify starting <i>offset</i></p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-l</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>specify total <i>length</i> to read (in bytes)</p></td></tr>
</table>

<p style="margin-left:11%;"><b>seek -a | -d | -h [ -r ] [
-s ] offset</b></p>

<p style="margin-left:22%;">On platforms that support the
<b>lseek</b>(2) <b>SEEK_DATA</b> and <b>SEEK_HOLE</b>
options, display the offsets of the specified segments.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-a</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Display both <b>data</b> and <b>hole</b> segments
starting at the specified <b>offset.</b></p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Display the <b>data</b> segment starting at the
specified <b>offset.</b></p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-h</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Display the <b>hole</b> segment starting at the
specified <b>offset.</b></p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-r</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Recursively display all the specified segments starting
at the specified <b>offset.</b></p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Display the starting lseek(2) offset. This offset will
be a calculated value when both data and holes are displayed
together or performing a recusively display.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>reflink [ -C ] [ -q ]
src_file [src_offset dst_offset length]</b></p>

<p style="margin-left:22%;">On filesystems that support the
<b>FICLONERANGE</b> or <b>BTRFS_IOC_CLONE_RANGE</b> ioctls,
map <i>length</i> bytes at offset <i>dst_offset</i> in the
open file to the same physical blocks that are mapped at
offset <i>src_offset</i> in the file <i>src_file</i> ,
replacing any contents that may already have been there. If
a program writes into a reflinked block range of either
file, the dirty blocks will be cloned, written to, and
remapped (&quot;copy on write&quot;) in the affected file,
leaving the other file(s) unchanged. If src_offset,
dst_offset, and length are omitted, all contents of src_file
will be reflinked into the open file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-C</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Print timing statistics in a condensed format.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-q</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Do not print timing statistics at all.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>dedupe [ -C ] [ -q ]
src_file src_offset dst_offset length</b></p>

<p style="margin-left:22%;">On filesystems that support the
<b>FIDEDUPERANGE</b> or <b>BTRFS_IOC_FILE_EXTENT_SAME</b>
ioctls, map <i>length</i> bytes at offset <i>dst_offset</i>
in the open file to the same physical blocks that are mapped
at offset <i>src_offset</i> in the file <i>src_file</i> ,
but only if the contents of both ranges are identical. This
is known as block-based deduplication. If a program writes
into a reflinked block range of either file, the dirty
blocks will be cloned, written to, and remapped (&quot;copy
on write&quot;) in the affected file, leaving the other
file(s) unchanged.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-C</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Print timing statistics in a condensed format.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-q</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Do not print timing statistics at all.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>copy_range [ -s</b>
<i>src_offset</i> <b>] [ -d</b> <i>dst_offset</i> <b>] [
-l</b> <i>length</i> <b>] src_file | <br>
-f</b> <i>N</i></p>

<p style="margin-left:22%;">On filesystems that support the
<b>copy_file_range</b>(2) system call, copies data from the
source file into the current open file. The source must be
specified either by path (<b>src_file</b>) or as another
open file (<b>-f</b>). If <i>length</i> is not specified,
this command copies data from <i>src_offset</i> to the end
of <b>src_file</b> into the dst_file at
<i>dst_offset</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Copy data from <i>src_file</i> beginning from
<i>src_offset</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Copy data into the open file beginning at
<i>dst_offset</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-l</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Copy up to <i>length</i> bytes of data.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>swapext</b>
<i>donor_file</i></p>

<p style="margin-left:22%;">Swaps extent forks between
files. The current open file is the target. The donor file
is specified by path. Note that file data is not copied
(file content moves with the fork(s)).</p>

<p style="margin-left:11%;"><b>set_encpolicy [ -c</b>
<i>mode</i> <b>] [ -n</b> <i>mode</i> <b>] [ -f</b>
<i>flags</i> <b>] [ -v</b> <i>version</i> <b>] [</b> <i><br>
keyspec</i> <b>]</b></p>

<p style="margin-left:22%;">On filesystems that support
encryption, assign an encryption policy to the current file.
<i>keyspec</i> is a hex string which specifies the
encryption key to use. For v1 encryption policies,
<i>keyspec</i> must be a 16-character hex string (8 bytes).
For v2 policies, <i>keyspec</i> must be a 32-character hex
string (16 bytes). If unspecified, an all-zeroes value is
used.</p>

<p style="margin-left:26%;"><b>-c</b> <i>mode</i></p>

<p style="margin-left:32%;">contents encryption mode (e.g.
AES-256-XTS)</p>

<p style="margin-left:26%;"><b>-n</b> <i>mode</i></p>

<p style="margin-left:32%;">filenames encryption mode (e.g.
AES-256-CTS)</p>

<p style="margin-left:26%;"><b>-f</b> <i>flags</i></p>

<p style="margin-left:32%;">policy flags (numeric)</p>

<p style="margin-left:26%;"><b>-v</b> <i>version</i></p>

<p style="margin-left:32%;">policy version. Defaults to 1
or 2 depending on the length of <i>keyspec</i>; or to 1 if
<i>keyspec</i> is unspecified.</p>

<p style="margin-left:11%;"><b>get_encpolicy [ -1 ] [ -t
]</b></p>

<p style="margin-left:22%;">On filesystems that support
encryption, display the encryption policy of the current
file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-1</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Use only the old ioctl to get the encryption policy.
This only works if the file has a v1 encryption policy.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-t</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Test whether v2 encryption policies are supported.
Prints &quot;supported&quot;, &quot;unsupported&quot;, or an
error message.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>add_enckey [ -d</b>
<i>descriptor</i> <b>]</b></p>

<p style="margin-left:22%;">On filesystems that support
encryption, add an encryption key to the filesystem
containing the currently open file. The key in binary
(typically 64 bytes long) is read from standard input.</p>

<p style="margin-left:26%;"><b>-d</b> <i>descriptor</i></p>

<p style="margin-left:32%;">key descriptor, as a
16-character hex string (8 bytes). If given, the key will be
available for use by v1 encryption policies that use this
descriptor. Otherwise, the key is added as a v2 policy key,
and on success the resulting &quot;key identifier&quot; will
be printed.</p>

<p style="margin-left:11%;"><b>rm_enckey [ -a ]</b>
<i>keyspec</i></p>

<p style="margin-left:22%;">On filesystems that support
encryption, remove an encryption key from the filesystem
containing the currently open file. <i>keyspec</i> is a hex
string specifying the key to remove, as a 16-character
&quot;key descriptor&quot; or a 32-character &quot;key
identifier&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-a</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Remove the key for all users who have added it, not just
the current user. This is a privileged operation.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>enckey_status</b>
<i>keyspec</i></p>

<p style="margin-left:22%;">On filesystems that support
encryption, display the status of an encryption key.
<i>keyspec</i> is a hex string specifying the key for which
to display the status, as a 16-character &quot;key
descriptor&quot; or a 32-character &quot;key
identifier&quot;.</p>

<p style="margin-left:11%;"><b>lsattr</b> [ <b>-R</b> |
<b>-D</b> | <b>-a</b> | <b>-v</b> ]</p>

<p style="margin-left:22%;">List extended inode flags on
the currently open file. If the <b>-R</b> option is
specified, a recursive descent is performed for all
directory entries below the currently open file (<b>-D</b>
can be used to restrict the output to directories only).
This is a depth first descent, it does not follow symlinks
and it also does not cross mount points.</p>

<p style="margin-left:11%;"><b>chattr</b> [ <b>-R</b> |
<b>-D</b> ] [ <b>+</b>/<b>-riasAdtPneEfSxC</b> ]</p>

<p style="margin-left:22%;">Change extended inode flags on
the currently open file. The <b>-R</b> and <b>-D</b> options
have the same meaning as above. The mapping between each
letter and the inode flags (refer to <b>xfsctl</b>(3) for
the full list) is available via the <b>help</b> command.</p>

<p style="margin-left:11%;"><b>flink</b> <i>path</i></p>

<p style="margin-left:22%;">Link the currently open file
descriptor into the filesystem namespace.</p>

<p style="margin-left:11%;"><b>stat</b> [
<b>-v</b>|<b>-r</b> ]</p>

<p style="margin-left:22%;">Selected statistics from
<b>stat</b>(2) and the XFS_IOC_GETXATTR system call on the
current file. If the <b>-v</b> option is specified, the
atime (last access), mtime (last modify), and ctime (last
change) timestamps are also displayed. The <b>-r</b> option
dumps raw fields from the stat structure.</p>

<p style="margin-left:11%;"><b>statx [ -v|-r ][ -m</b>
<i>basic</i> <b>| -m</b> <i>all</i> <b>| -m</b>
<i>&lt;mask&gt;</i> <b>][ -FD ]</b></p>

<p style="margin-left:22%;">Selected statistics from
<b>stat</b>(2) and the XFS_IOC_GETXATTR system call on the
current file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-v</b></p></td>
<td width="3%"></td>
<td width="50%">


<p>Show timestamps.</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-r</b></p></td>
<td width="3%"></td>
<td width="50%">


<p>Dump raw statx structure values.</p></td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:26%;"><b>-m basic</b></p>

<p style="margin-left:32%;">Set the field mask for the
statx call to STATX_BASIC_STATS.</p>

<p style="margin-left:26%;"><b>-m all</b></p>

<p style="margin-left:32%;">Set the the field mask for the
statx call to STATX_ALL (default).</p>

<p style="margin-left:26%;"><b>-m &lt;mask&gt;</b></p>

<p style="margin-left:32%;">Specify a numeric field mask
for the statx call.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-F</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Force the attributes to be synced with the server.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-D</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Don&rsquo;t sync attributes with the server.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>chproj</b> [
<b>-R</b>|<b>-D</b> ]</p>

<p style="margin-left:22%;">Modifies the project identifier
associated with the current path. The <b>-R</b> option will
recursively descend if the current path is a directory. The
<b>-D</b> option will also recursively descend, only setting
modifying projects on subdirectories. See the
<b>xfs_quota</b>(8) manual page for more information about
project identifiers.</p>

<p style="margin-left:11%;"><b>lsproj</b> [
<b>-R</b>|<b>-D</b> ]</p>

<p style="margin-left:22%;">Displays the project identifier
associated with the current path. The <b>-R</b> and
<b>-D</b> options behave as described above, in
<b>chproj.</b></p>

<p style="margin-left:11%;"><b>parent</b> [ <b>-cpv</b>
]</p>

<p style="margin-left:22%;">By default this command prints
out the parent inode numbers, inode generation numbers and
basenames of all the hardlinks which point to the inode of
the current file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-p</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>the output is similar to the default output except
pathnames up to the mount-point are printed out instead of
the component name.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-c</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>the file&rsquo;s filesystem will check all the parent
attributes for consistency.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-v</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>verbose output will be printed.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>[NOTE: Not currently
operational on Linux.]</b></p>

<p style="margin-left:11%;"><b>utimes</b> <i>atime_sec
atime_nsec mtime_sec mtime_nsec</i></p>

<p style="margin-left:22%;">The utimes command changes the
atime and mtime of the current file. sec uses UNIX timestamp
notation and is the seconds elapsed since 1970-01-01
00:00:00 UTC. nsec is the nanoseconds since the sec. This
value needs to be in the range 0-999999999 with UTIME_NOW
and UTIME_OMIT being exceptions. Each (sec, nsec) pair
constitutes a single timestamp value.</p>

<h2>MEMORY MAPPED I/O COMMANDS
<a name="MEMORY MAPPED I/O COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>mmap [</b>
<i>N</i> <b>| [[ -rwxS ] [-s</b> <i>size</i> <b>]</b>
<i>offset length</i> <b>]]</b></p>

<p style="margin-left:22%;">With no arguments, <b>mmap</b>
shows the current mappings. Specifying a single numeric
argument <i>N</i> sets the current mapping. If two arguments
are specified (a range specified by <i>offset</i> and
<i>length</i>), a new mapping is created spanning the range,
and the protection mode can be given as a combination of
PROT_READ (<b>-r</b>), PROT_WRITE (<b>-w</b>), and PROT_EXEC
(<b>-x</b>). The mapping will be created with the MAP_SHARED
flag by default, or with the Linux specific (MAP_SYNC |
MAP_SHARED_VALIDATE) flags if <b>-S</b> is given. <b>-s</b>
<i>size</i> is used to do a mmap(size) &amp;&amp;
munmap(size) operation at first, try to reserve some
extendible free memory space, if <i>size</i> is bigger than
<i>length</i> parameter. But there&rsquo;s not guarantee
that the memory after <i>length</i> ( up to <i>size</i> )
will stay free. <b>e.g.</b> &quot;mmap -rw -s 8192
1024&quot; will mmap 0 ~ 1024 bytes memory, but try to
reserve 1024 ~ 8192 free space(no guarantee). This free
space will helpful for &quot;mremap 8192&quot; without
MREMAP_MAYMOVE flag.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>mm</b></p></td>
<td width="8%"></td>
<td width="32%">


<p>See the <b>mmap</b> command.</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>mremap [ -f
&lt;new_address&gt; ] [ -m ]</b> <i>new_length</i></p>

<p style="margin-left:22%;">Changes the current mapping
size to <i>new_length</i>. Whether the mapping may be moved
is controlled by the flags passed; MREMAP_FIXED (<b>-f</b>),
or MREMAP_MAYMOVE (<b>-m</b>). <i>new_length</i> specifies a
page-aligned address to which the mapping must be moved. It
can be set to 139946004389888, 4096k or 1g etc.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>mrm</b></p></td>
<td width="2%"></td>
<td width="52%">


<p>See the <b>mremap</b> command.</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>munmap</b></p></td>
<td width="2%"></td>
<td width="52%">


<p>Unmaps the current memory mapping.</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>mu</b></p></td>
<td width="2%"></td>
<td width="52%">


<p>See the <b>munmap</b> command.</p></td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>mread [ -f | -v ] [ -r ]
[</b> <i>offset length</i> <b>]</b></p>

<p style="margin-left:22%;">Accesses a segment of the
current memory mapping, optionally dumping it to the
standard output stream (with <b>-v</b> or <b>-f</b> option)
for inspection. The accesses are performed sequentially from
the start <i>offset</i> by default, but can also be done
from the end backwards through the mapping if the <b>-r</b>
option in specified. The two verbose modes differ only in
the relative offsets they display, the <b>-f</b> option is
relative to file start, whereas <b>-v</b> shows offsets
relative to the start of the mapping.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>mr</b></p></td>
<td width="8%"></td>
<td width="33%">


<p>See the <b>mread</b> command.</p></td>
<td width="45%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>mwrite [ -r ] [ -S</b>
<i>seed</i> <b>] [</b> <i>offset length</i> <b>]</b></p>

<p style="margin-left:22%;">Stores a byte into memory for a
range within a mapping. The default stored value is
&rsquo;X&rsquo;, repeated to fill the range specified, but
this can be changed using the <b>-S</b> option. The memory
stores are performed sequentially from the start offset by
default, but can also be done from the end backwards through
the mapping if the <b>-r</b> option in specified.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>mw</b></p></td>
<td width="8%"></td>
<td width="35%">


<p>See the <b>mwrite</b> command.</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>msync [ -i ] [ -a | -s ]
[</b> <i>offset length</i> <b>]</b></p>

<p style="margin-left:22%;">Writes all modified copies of
pages over the specified range (or entire mapping if no
range specified) to their backing storage locations. Also,
optionally invalidates (<b>-i</b>) so that subsequent
references to the pages will be obtained from their backing
storage locations (instead of cached copies). The flush can
be done synchronously (<b>-s)</b> or asynchronously
(<b>-a</b>).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>ms</b></p></td>
<td width="8%"></td>
<td width="33%">


<p>See the <b>msync</b> command.</p></td>
<td width="45%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>madvise [ -d | -r | -s | -w
] [</b> <i>offset length</i> <b>]</b></p>

<p style="margin-left:22%;">Modifies page cache behavior
when operating on the current mapping. The range arguments
are required by some advise commands ([*] below). With no
arguments, the POSIX_MADV_NORMAL advice is implied (default
readahead).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>the pages will not be needed
(POSIX_MADV_DONTNEED[*]).</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-r</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>expect random page references (POSIX_MADV_RANDOM), which
sets readahead to zero.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>expect sequential page references
(POSIX_MADV_SEQUENTIAL), which doubles the default readahead
on the file.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-w</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>advises the specified pages will be needed again
(POSIX_MADV_WILLNEED[*]) which forces the maximum
readahead.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>mincore</b></p>

<p style="margin-left:22%;">Dumps a list of pages or ranges
of pages that are currently in core, for the current memory
mapping.</p>

<h2>FILESYSTEM COMMANDS
<a name="FILESYSTEM COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>bulkstat [
-a</b> <i>agno</i> <b>] [ -d ] [ -e</b> <i>endino</i> <b>] [
-n</b> <i>batchsize</i> <b>] [ -s</b> <i><br>
startino</i> <b>] [ -v</b> <i>version&quot;</i><b>]</b></p>

<p style="margin-left:22%;">Display raw stat information
about a bunch of inodes in an XFS filesystem. Options are as
follows:</p>

<p style="margin-left:26%;"><b>-a</b> <i>agno</i></p>

<p style="margin-left:37%;">Display only results from the
given allocation group. If not specified, all results
returned will be displayed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="8%"></td>
<td width="63%">


<p>Print debugging information about call results.</p></td></tr>
</table>

<p style="margin-left:26%;"><b>-e</b> <i>endino</i></p>

<p style="margin-left:37%;">Stop displaying records when
this inode number is reached. Defaults to stopping when the
system call stops returning results.</p>

<p style="margin-left:26%;"><b>-n</b> <i>batchsize</i></p>

<p style="margin-left:37%;">Retrieve at most this many
records per call. Defaults to 4,096.</p>

<p style="margin-left:26%;"><b>-s</b> <i>startino</i></p>

<p style="margin-left:37%;">Display inode allocation
records starting with this inode. Defaults to the first
inode in the filesystem. If the given inode is not
allocated, results will begin with the next allocated inode
in the filesystem.</p>

<p style="margin-left:26%;"><b>-v</b> <i>version</i></p>

<p style="margin-left:37%;">Use a particular version of the
kernel interface. Currently supported versions are 1 and
5.</p>

<p style="margin-left:11%;"><b>bulkstat_single [ -d ] [
-v</b> <i>version</i> <b>] [</b> <i>inum...</i> <b>|</b>
<i>special...</i> <b>]</b></p>

<p style="margin-left:22%;">Display raw stat information
about individual inodes in an XFS filesystem. The <b>-d</b>
and <b>-v</b> options are the same as the <b>bulkstat</b>
command. Arguments must be inode numbers or any of the
special values:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p><b>root</b></p></td>
<td width="5%"></td>
<td width="63%">


<p>Display information about the root directory inode.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p><b>freeze</b></p></td>
<td width="5%"></td>
<td width="63%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Suspend all
write I/O requests to the filesystem of the current file.
Only available in expert mode and requires privileges.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>thaw</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">Undo the effects of a filesystem
freeze operation. Only available in expert mode and requires
privileges.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>inject [</b> <i>tag</i>
<b>]</b></p>

<p style="margin-left:22%;">Inject errors into a filesystem
to observe filesystem behavior at specific points under
adverse conditions. Without the <i>tag</i> argument,
displays the list of error tags available. Only available in
expert mode and requires privileges.</p>

<p style="margin-left:11%;"><b>resblks [</b> <i>blocks</i>
<b>]</b></p>

<p style="margin-left:22%;">Get and/or set count of
reserved filesystem blocks using the XFS_IOC_GET_RESBLKS or
XFS_IOC_SET_RESBLKS system calls. Note -- this can be useful
for exercising out of space behavior. Only available in
expert mode and requires privileges.</p>

<p style="margin-left:11%;"><b>shutdown</b> [ <b>-f</b>
]</p>

<p style="margin-left:22%;">Force the filesystem to shut
down, preventing any further IO. XFS and other filesystems
implement this functionality, although implementation
details may differ slightly. Only available in expert mode
and requires privileges.</p>

<p style="margin-left:22%; margin-top: 1em">By default, the
filesystem will not attempt to flush completed transactions
to disk before shutting down the filesystem. This simulates
a disk failure or crash.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-f</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Force the filesystem to flush all completed transactions
to disk before shutting down, matching XFS behavior when
critical corruption is encountered.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>statfs</b></p></td>
<td width="3%"></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Selected
statistics from <b>statfs</b>(2) and the XFS_IOC_FSGEOMETRY
system call on the filesystem where the current file
resides.</p>

<p style="margin-left:11%;"><b>inode [ [ -n ]</b>
<i>number</i> <b>] [ -v ]</b></p>

<p style="margin-left:22%;">The inode command queries
physical information about an inode. With no arguments, it
will return 1 or 0, indicating whether or not any inode
numbers greater than 32 bits are currently in use in the
filesystem. If given an inode <i>number</i> as an argument,
the command will return the same inode <i>number</i> if it
is in use, or 0 if not. With <b>-n</b> <i>number</i> , the
next used inode number after this <i>number</i> will be
returned, or zero if the supplied inode number is the
highest one in use. With <b>-v</b> the command will also
report the number of bits (32 or 64) used by the inode
<i>number</i> printed in the result; if no inode
<i>number</i> was specified on the command line, the maximum
possible inode number in the system will be printed along
with its size.</p>

<p style="margin-left:11%;"><b>inumbers [ -a</b>
<i>agno</i> <b>] [ -d ] [ -e</b> <i>endino</i> <b>] [ -n</b>
<i>batchsize</i> <b>] [ -s</b> <i><br>
startino</i> <b>] [ -v</b> <i>version</i> <b>]</b></p>

<p style="margin-left:22%;">Prints allocation information
about groups of inodes in an XFS filesystem. Callers can use
this information to figure out which inodes are allocated.
Options are as follows:</p>

<p style="margin-left:26%;"><b>-a</b> <i>agno</i></p>

<p style="margin-left:37%;">Display only results from the
given allocation group. If not specified, all results
returned will be displayed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="8%"></td>
<td width="63%">


<p>Print debugging information about call results.</p></td></tr>
</table>

<p style="margin-left:26%;"><b>-e</b> <i>endino</i></p>

<p style="margin-left:37%;">Stop displaying records when
this inode number is reached. Defaults to stopping when the
system call stops returning results.</p>

<p style="margin-left:26%;"><b>-n</b> <i>batchsize</i></p>

<p style="margin-left:37%;">Retrieve at most this many
records per call. Defaults to 4,096.</p>

<p style="margin-left:26%;"><b>-s</b> <i>startino</i></p>

<p style="margin-left:37%;">Display inode allocation
records starting with this inode. Defaults to the first
inode in the filesystem. If the given inode is not
allocated, results will begin with the next allocated inode
in the filesystem.</p>

<p style="margin-left:26%;"><b>-v</b> <i>version</i></p>

<p style="margin-left:37%;">Use a particular version of the
kernel interface. Currently supported versions are 1 and
5.</p>

<p style="margin-left:11%;"><b>scrub</b> <i>type</i>
<b>[</b> <i>agnumber</i> <b>|</b> <i>ino gen</i>
<b>]</b></p>

<p style="margin-left:22%;">Scrub internal XFS filesystem
metadata. The <b>type</b> parameter specifies which type of
metadata to scrub. For AG metadata, one AG number must be
specified. For file metadata, the scrub is applied to the
open file unless the inode number and generation number are
specified.</p>

<p style="margin-left:11%;"><b>repair</b> <i>type</i>
<b>[</b> <i>agnumber</i> <b>|</b> <i>ino gen</i>
<b>]</b></p>

<p style="margin-left:22%;">Repair internal XFS filesystem
metadata. The <b>type</b> parameter specifies which type of
metadata to repair. For AG metadata, one AG number must be
specified. For file metadata, the repair is applied to the
open file unless the inode number and generation number are
specified.</p>

<p style="margin-left:11%;"><b>label [ -c | -s</b>
<i>label</i> <b>]</b></p>

<p style="margin-left:22%;">On filesystems that support
online label manipulation, get, set, or clear the filesystem
label. With no options, print the current filesystem label.
The <b>-c</b> option clears the filesystem label by setting
it to the null string. The <b>-s</b> <i>label</i> option
sets the filesystem label to <i>label</i>. If the label is
longer than the filesystem will accept, <b>xfs_io</b> will
print an error message. XFS filesystem labels can be at most
12 characters long.</p>

<p style="margin-left:11%;"><b>fsmap [ -d | -l | -r ] [ -m
| -v ] [ -n</b> <i>nx</i> <b>] [</b> <i>start</i> <b>] [</b>
<i>end</i> <b>]</b></p>

<p style="margin-left:22%;">Prints the mapping of disk
blocks used by the filesystem hosting the current file. The
map lists each extent used by files, allocation group
metadata, journalling logs, and static filesystem metadata,
as well as any regions that are unused. Each line of the
listings takes the following form:</p>

<p style="margin-left:22%; margin-top: 1em"><i>extent</i>:
<i>major</i>:<i>minor</i>
[<i>startblock</i>..<i>endblock</i>]: <i>owner
startoffset</i>..<i>endoffset length</i></p>

<p style="margin-left:22%; margin-top: 1em">Static
filesystem metadata, allocation group metadata, btrees,
journalling logs, and free space are marked by replacing the
<i>startoffset</i>..<i>endoffset</i> with the appropriate
marker. All blocks, offsets, and lengths are specified in
units of 512-byte blocks, no matter what the
filesystem&rsquo;s block size is. The optional <i>start</i>
and <i>end</i> arguments can be used to constrain the output
to a particular range of disk blocks. If these two options
are specified, exactly one of <b>-d</b>, <b>-l</b>, or
<b>-r</b> must also be set.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="8%"></td>
<td width="63%">


<p>Display only extents from the data device. This option
only applies for XFS filesystems.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-l</b></p></td>
<td width="8%"></td>
<td width="63%">


<p>Display only extents from the external log device. This
option only applies to XFS filesystems.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-r</b></p></td>
<td width="8%"></td>
<td width="63%">


<p>Display only extents from the realtime device. This
option only applies to XFS filesystems.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-m</b></p></td>
<td width="8%"></td>
<td width="63%">


<p>Display results in a machine readable format (CSV). This
option is not compatible with the <b>-v</b> flag. The
columns of the output are: extent number, device major,
device minor, physical start, physical end, owner, offset
start, offset end, length. The start, end, and length
numbers are provided in units of 512b. The owner field is a
special string that takes the form:</p></td></tr>
</table>

<p style="margin-left:42%;"><i>inode_%lld_data</i></p>

<p style="margin-left:48%;">for inode data.</p>


<p style="margin-left:42%;"><i>inode_%lld_data_bmbt</i></p>

<p style="margin-left:48%;">for inode data extent maps.</p>

<p style="margin-left:42%;"><i>inode_%lld_attr</i></p>

<p style="margin-left:48%;">for inode extended attribute
data.</p>


<p style="margin-left:42%;"><i>inode_%lld_attr_bmbt</i></p>

<p style="margin-left:48%;">for inode extended attribute
extent maps.</p>

<p style="margin-left:42%;"><i>special_%u:%u</i></p>

<p style="margin-left:48%;">for other filesystem
metadata.</p>

<p style="margin-left:26%;"><b>-n</b>
<i>num_extents</i></p>

<p style="margin-left:37%;">If this option is given,
<b>fsmap</b> obtains the extent list of the file in groups
of <i>num_extents</i> extents. In the absence of <b>-n</b>,
<b>fsmap</b> queries the system for extents in groups of
131,072 records.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-v</b></p></td>
<td width="8%"></td>
<td width="63%">


<p>Shows verbose information. When this flag is specified,
additional AG specific information is appended to each line
in the following form:</p></td></tr>
</table>

<p style="margin-left:45%; margin-top: 1em"><i>agno</i>
(<i>startagblock</i>..<i>endagblock</i>) <i>nblocks
flags</i></p>

<p style="margin-left:37%; margin-top: 1em">A second
<b>-v</b> option will print out the <i>flags</i> legend.
This option is not compatible with the <b>-m</b> flag.</p>

<h2>OTHER COMMANDS
<a name="OTHER COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>help [</b>
command <b>]</b></p>

<p style="margin-left:22%;">Display a brief description of
one or all commands.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>print</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Display a list of all open files and memory mapped
regions. The current file and current mapping are
distinguishable from any others.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>p</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>See the <b>print</b> command.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>quit</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Exit <b>xfs_io</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>q</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>See the <b>quit</b> command.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>log_writes -d</b>
<i>device</i> <b>-m</b> <i>mark</i></p>

<p style="margin-left:22%;">Create a mark named <i>mark</i>
in the dm-log-writes log specified by <i>device.</i> This is
intended to be equivalent to the shell command:</p>

<p style="margin-left:22%; margin-top: 1em"><b>dmsetup
message</b> <i>device</i> <b>0 mark</b> <i>mark</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>lw</b></p></td>
<td width="8%"></td>
<td width="41%">


<p>See the <b>log_writes</b> command.</p></td>
<td width="37%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>crc32cselftest</b></p>

<p style="margin-left:22%;">Test the internal crc32c
implementation to make sure that it computes results
correctly.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>mkfs.xfs</b>(8),
<b>xfsctl</b>(3), <b>xfs_bmap</b>(8), <b>xfs_db</b>(8),
<b>xfs</b>(5), <b>fdatasync</b>(2), <b>fstat</b>(2),
<b>fstatfs</b>(2), <b>fsync</b>(2), <b>ftruncate</b>(2),
<b>futimens</b>(3), <b>mmap</b>(2), <b>msync</b>(2),
<b>open</b>(2), <b>pread</b>(2), <b>pwrite</b>(2),
<b>readdir</b>(3), <b>dmsetup</b>(8).</p>
<hr>
</body>
</html>
