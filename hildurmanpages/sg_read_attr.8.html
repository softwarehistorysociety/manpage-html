<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 03:05:22 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SG_READ_ATTR</title>

</head>
<body>

<h1 align="center">SG_READ_ATTR</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">sg_read_attr -
send SCSI READ ATTRIBUTE command</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sg_read_attr</b>
[<i>--cache</i>] [<i>--enumerate</i>] [<i>--ea=EA</i>]
[<i>--filter=FL</i>] [<i>--first=FAI</i>] [<i>--help</i>]
[<i>--hex</i>] [<i>--in=FN</i>] [<i>--lvn=LVN</i>]
[<i>--maxlen=LEN</i>] [<i>--pn=PN</i>] [<i>--quiet</i>]
[<i>--raw</i>] [<i>--readonly</i>] [<i>--sa=SA</i>]
[<i>--verbose</i>] [<i>--version</i>] <i>DEVICE</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Sends a SCSI
READ ATTRIBUTE command to <i>DEVICE</i> and outputs the data
returned. This command was introduced in SPC-3 revision 1
and thus is applicable to all SCSI devices. In practice it
is used mainly for tape systems. This utility is based on
the SPC-5 draft standard, revision 17 (spc5r17.pdf).</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Arguments to
long options are mandatory for short options as well.
<b><br>
-c</b>, <b>--cache</b></p>

<p style="margin-left:22%;">sets the CACHE bit in the READ
ATTRIBUTE cdb. This instructs the device server to return
cached attributes. By default that bit is cleared which
instructs the device server not to return cached
attributes.</p>

<p style="margin-left:11%;"><b>-e</b>,
<b>--enumerate</b></p>

<p style="margin-left:22%;">enumerates all known attributes
and service actions. Attributes include an identifier,
length, format and a name as defined by T10. If
<i>DEVICE</i> is given then it is ignored.</p>

<p style="margin-left:11%;"><b>-E</b>,
<b>--ea</b>=<i>EA</i></p>

<p style="margin-left:22%;">where <i>EA</i> is an element
address which is placed in the READ ATTRIBUTE cdb. This
field is only found in SMC-2 and SMC-3 drafts for medium
changers usually associated with tape libraries. By default
this field is set to zero.</p>

<p style="margin-left:11%;"><b>-f</b>,
<b>--filter</b>=<i>FL</i></p>

<p style="margin-left:22%;">where <i>FL</i> is an attribute
identifier in the range 0 to 65535 or -1. Attribute
identifiers are typically given in hexadecimal in which case
the hex number should be prefixed by &quot;0x&quot; or has a
trailing &quot;h&quot;. &quot;-1&quot; is the default value
and means &rsquo;match all&rsquo;; for all other values of
<i>FL</i> on the matching attribute is output.</p>

<p style="margin-left:11%;"><b>-F</b>,
<b>--first</b>=<i>FAI</i></p>

<p style="margin-left:22%;">where <i>FAI</i> is the
&quot;first attribute identifier&quot; field in the cdb. It
seems as though the intent of this field is that only
attributes whose identifiers are equal to or greater than
<i>FAI</i> are returned. The default value of <i>FAI</i> is
zero. Attributes are returned in ascending identifier
order.</p>

<p style="margin-left:11%;"><b>-h</b>, <b>--help</b></p>

<p style="margin-left:22%;">output the usage message then
exit.</p>

<p style="margin-left:11%;"><b>-H</b>, <b>--hex</b></p>

<p style="margin-left:22%;">output the response in
hexadecimal to stdout. When used once the whole response is
output in ASCII hexadecimal with a leading address (starting
at 0) on each line. When used twice each attribute
descriptor in the response is output separately in
hexadecimal. When used thrice the whole response is output
in hexadecimal with no leading address (on each line). <br>
Output generated by &rsquo;-HHH&rsquo; (or <i>--hex</i> used
three times) can be redirected to a file. That file will be
in suitable format for <i>--in=FN</i> to use in a later
invocation.</p>

<p style="margin-left:11%;"><b>-i</b>,
<b>--in</b>=<i>FN</i></p>

<p style="margin-left:22%;"><i>FN</i> is treated as a file
name (or &rsquo;-&rsquo; for stdin) which contains ASCII
hexadecimal or binary representing the response to a READ
ATTRIBUTE command with service action 0x0 (i.e (fetch)
attribute values). When this option is given then
<i>DEVICE</i> (if also given) is ignored. <br>
By default <i>FN</i> is assumed to contain ASCII hexadecimal
arranged as bytes which a space, tab or comma delimited. All
characters from (and including) &quot;#&quot; to the end of
line are ignored. If the <i>--raw</i> option is also given
then <i>FN</i> is assumed to contain binary data. When the
<i>--raw</i> option is given then after processing the input
the internal raw variable is reset to 0 so it has no effect
on the output. <br>
Since the READ ATTRIBUTE response does not contain the
service action number that it is a response to, then the
<i>--sa=SA</i> should be given (if not service action 0
(attribute values) is assumed.</p>

<p style="margin-left:11%;"><b>-l</b>,
<b>--lvn</b>=<i>LVN</i></p>

<p style="margin-left:22%;">where <i>LVN</i> is placed in
the &quot;logical volume number&quot; field of the cdb. The
default value is zero which is required to be the logical
volume number if the device only has one volume.</p>

<p style="margin-left:11%;"><b>-m</b>,
<b>--maxlen</b>=<i>LEN</i></p>

<p style="margin-left:22%;">where <i>LEN</i> is the
(maximum) response length in bytes. It is placed in the
cdb&rsquo;s &quot;allocation length&quot; field. If not
given (or <i>LEN</i> is zero) then 8192 is used. The maximum
allowed value of <i>LEN</i> is 1048576.</p>

<p style="margin-left:11%;"><b>-p</b>,
<b>--pn</b>=<i>PN</i></p>

<p style="margin-left:22%;">where <i>PN</i> is placed in
the &quot;partition number&quot; field of the cdb. If the
<i>DEVICE</i> only has one partition then its partition
number must be zero. The default value of <i>PN</i> is
zero.</p>

<p style="margin-left:11%;"><b>-q</b>, <b>--quiet</b></p>

<p style="margin-left:22%;">this option reduces the amount
of information output. For example when used once
(<i>SA</i>=0), it suppresses the header line announcing the
output of attributes; when used twice it suppresses the name
of each attribute, leaving only the associated attribute
values (or strings).</p>

<p style="margin-left:11%;"><b>-r</b>, <b>--raw</b></p>

<p style="margin-left:22%;">output the SCSI response (i.e.
the data-out buffer) in binary (to stdout).</p>

<p style="margin-left:11%;"><b>-R</b>,
<b>--readonly</b></p>

<p style="margin-left:22%;">open the <i>DEVICE</i>
read-only (e.g. in Unix with the O_RDONLY flag). The default
is to open it read-write.</p>

<p style="margin-left:11%;"><b>-s</b>,
<b>--sa</b>=<i>SA</i></p>

<p style="margin-left:22%;">where <i>SA</i> is placed on
the &quot;service action&quot; field of the cdb. Values of 0
to 63 are accepted with a default of 0. spc5r08.pdf defines
five service actions: 0 for attributes values ; 1 for an
attribute list (names, not values), 2 for the logical volume
list; 3 for the partition list; 4 is restricted for SMC-3;
and 5 for the supported attribute list. <br>
Alternatively an acronym can be given for <i>SA</i>. The
acronym should be one of &quot;av&quot;, &quot;al&quot;,
&quot;lvl&quot;, &quot;pn&quot;, &quot;smc&quot; or
&quot;sa&quot; for service actions 0 to 5 respectively. The
acronyms can also be given in upper case.</p>

<p style="margin-left:11%;"><b>-v</b>, <b>--verbose</b></p>

<p style="margin-left:22%;">increase the level of
verbosity, (i.e. debug output).</p>

<p style="margin-left:11%;"><b>-V</b>, <b>--version</b></p>

<p style="margin-left:22%;">print the version string and
then exit.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Only tape
systems seem to implement the SCSI READ ATTRIBUTE command.
The vast majority of its definition is in the SPC standard
so other device types could use it.</p>

<p style="margin-left:11%; margin-top: 1em">Much of the
information provided by READ ATTRIBUTE can also be found in
pages returned by LOG SENSE (see the sg_logs utility) and in
the VPD pages returned by the INQUIRY command.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To list the
attributes of a tape drive whose xxxx is /dev/sg1 the
following could be used:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_read_attr
-s al /dev/sg1 <br>
Attribute list: <br>
Remaining capacity in partition [MiB] <br>
Maximum capacity in partition [MiB] <br>
TapeAlert flags <br>
Load count <br>
MAM space remaining [B] <br>
Assigning organization <br>
Format density code <br>
...</p>

<p style="margin-left:11%; margin-top: 1em">To check the
number of partitions:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_read_attr
-s pl /dev/sg1 <br>
Partition number list: <br>
First partition number: 0 <br>
Number of partitions available: 2</p>

<p style="margin-left:11%; margin-top: 1em">And to see the
attribute values (which is the default service action):</p>

<p style="margin-left:11%; margin-top: 1em"># sg_read_attr
/dev/sg1 <br>
Attribute values: <br>
Remaining capacity in partition [MiB]: 1386103 <br>
Maximum capacity in partition [MiB]: 1386103 <br>
TapeAlert flags: 0 <br>
....</p>

<p style="margin-left:11%; margin-top: 1em">To redirect the
attribute values response to a file for later decoding:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_read_attr
-HHH /dev/sg1 &gt; av.hex</p>

<p style="margin-left:11%; margin-top: 1em">And later the
response held in the av.hex file could be decoded with:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_read_attr
-s av --in=av.hex <br>
Attribute values: <br>
Remaining capacity in partition [MiB]: 1386103 <br>
Maximum capacity in partition [MiB]: 1386103 <br>
TapeAlert flags: 0 <br>
....</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The exit status
of sg_read_attr is 0 when it is successful. Otherwise see
the sg3_utils(8) man page.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Written by
Douglas Gilbert.</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report bugs to
&lt;dgilbert at interlog dot com&gt;.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2016-2017 Douglas Gilbert <br>
This software is distributed under a FreeBSD license. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sg_vpd,sg_logs(sg3_utils)</b></p>
<hr>
</body>
</html>
