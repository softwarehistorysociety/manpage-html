<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 02:56:00 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MULTIPATHD</title>

</head>
<body>

<h1 align="center">MULTIPATHD</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#COMMANDS">COMMANDS</a><br>
<a href="#SYSTEMD INTEGRATION">SYSTEMD INTEGRATION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">multipathd -
Multipath daemon.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>multipathd</b>
[<b>-d</b>|<b>-k</b>] [<b>-s</b>]
[<b>-v&nbsp;</b><i>verbosity</i>] [<b>-B</b>]
[<b>-w</b>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>multipathd</b> daemon is in charge of checking for failed
paths. When this happens, it will reconfigure the multipath
map the path belongs to, so that this map regains its
maximum performance and redundancy.</p>

<p style="margin-left:11%; margin-top: 1em">This daemon
executes the external <b>multipath</b> tool when events
occur. In turn, the multipath tool signals the multipathd
daemon when it is done with devmap reconfiguration, so that
it can refresh its failed path list.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-d</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Foreground Mode. Don&rsquo;t
daemonize, and print all messages to stdout and stderr.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Suppress timestamps. Do not prefix logging messages with
a timestamp.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-v</b> <i>level</i></p>

<p style="margin-left:22%;">Verbosity level. Print
additional information while running multipathd. A level of
0 means only print errors. A level of 3 or greater prints
debugging information as well.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-B</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Read-only bindings file. multipathd will not write to
the <i>user_friendly_names</i> bindings file. If a
<i>user_friendly_name</i> doesn&rsquo;t already exist for a
device, it will use its WWID as its alias.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-k</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>multipathd will enter interactive mode. From this mode,
the available commands can be viewed by entering
&rsquo;<i>help</i>&rsquo;. When you are finished entering
commands, press <b>CTRL-D</b> to quit.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p><b>IGNORED</b>. Use the option <i>find_multipaths</i> to
control the treatment of newly detected devices by
multipathd. See <b>multipath.conf(5).</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-w</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Since kernel 4.14 a new device-mapper event polling
interface is used for updating multipath devices on
dmevents. Use this flag to force it to use the old event
waiting method, based on creating a seperate thread for each
device.</p> </td></tr>
</table>

<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands can be used in interactive mode: <b><br>
list|show paths</b></p>

<p style="margin-left:22%;">Show the paths that multipathd
is monitoring, and their state.</p>

<p style="margin-left:11%;"><b>list|show paths format
$format</b></p>

<p style="margin-left:22%;">Show the paths that multipathd
is monitoring, using a format string with path format
wildcards.</p>

<p style="margin-left:11%;"><b>list|show
maps|multipaths</b></p>

<p style="margin-left:22%;">Show the multipath devices that
the multipathd is monitoring.</p>

<p style="margin-left:11%;"><b>list|show maps|multipaths
format $format</b></p>

<p style="margin-left:22%;">Show the status of all
multipath devices that the multipathd is monitoring, using a
format string with multipath format wildcards.</p>

<p style="margin-left:11%;"><b>list|show maps|multipaths
status</b></p>

<p style="margin-left:22%;">Show the status of all
multipath devices that the multipathd is monitoring.</p>

<p style="margin-left:11%;"><b>list|show maps|multipaths
stats</b></p>

<p style="margin-left:22%;">Show some statistics of all
multipath devices that the multipathd is monitoring.</p>

<p style="margin-left:11%;"><b>list|show maps|multipaths
topology</b></p>

<p style="margin-left:22%;">Show the current multipath
topology. Same as &rsquo;<i>multipath -ll</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>list|show topology</b></p>

<p style="margin-left:22%;">Show the current multipath
topology. Same as &rsquo;<i>multipath -ll</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>list|show map|multipath $map
topology</b></p>

<p style="margin-left:22%;">Show topology of a single
multipath device specified by $map, for example
36005076303ffc56200000000000010aa. This map could be
obtained from &rsquo;<i>list maps</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>list|show wildcards</b></p>

<p style="margin-left:22%;">Show the format wildcards used
in interactive commands taking $format.</p>

<p style="margin-left:11%;"><b>list|show config</b></p>

<p style="margin-left:22%;">Show the currently used
configuration, derived from default values and values
specified within the configuration file
<i>/etc/multipath.conf</i>.</p>

<p style="margin-left:11%;"><b>list|show config
local</b></p>

<p style="margin-left:22%;">Show the currently used
configuration like <i>show config</i>, but limiting the
devices section to those devices that are actually present
in the system.</p>

<p style="margin-left:11%;"><b>list|show blacklist</b></p>

<p style="margin-left:22%;">Show the currently used
blacklist rules, derived from default values and values
specified within the configuration file
<i>/etc/multipath.conf</i>.</p>

<p style="margin-left:11%;"><b>list|show devices</b></p>

<p style="margin-left:22%;">Show all available block
devices by name including the information if they are
blacklisted or not.</p>

<p style="margin-left:11%;"><b>list|show status</b></p>

<p style="margin-left:22%;">Show the number of path
checkers in each possible state, the number of monitored
paths, and whether multipathd is currently handling a
uevent.</p>

<p style="margin-left:11%;"><b>list|show daemon</b></p>

<p style="margin-left:22%;">Show the current state of the
multipathd daemon.</p>

<p style="margin-left:11%;"><b>add path $path</b></p>

<p style="margin-left:22%;">Add a path to the list of
monitored paths. $path is as listed in /sys/block (e.g.
sda).</p>

<p style="margin-left:11%;"><b>remove|del path
$path</b></p>

<p style="margin-left:22%;">Stop monitoring a path. $path
is as listed in /sys/block (e.g. sda).</p>

<p style="margin-left:11%;"><b>add map|multipath
$map</b></p>

<p style="margin-left:22%;">Add a multipath device to the
list of monitored devices. $map can either be a
device-mapper device as listed in /sys/block (e.g. dm-0) or
it can be the alias for the multipath device (e.g. mpath1)
or the uid of the multipath device (e.g.
36005076303ffc56200000000000010aa).</p>

<p style="margin-left:11%;"><b>remove|del map|multipath
$map</b></p>

<p style="margin-left:22%;">Stop monitoring a multipath
device.</p>

<p style="margin-left:11%;"><b>resize map|multipath
$map</b></p>

<p style="margin-left:22%;">Resizes map $map to the given
size.</p>

<p style="margin-left:11%;"><b>switch|switchgroup
map|multipath $map group $group</b></p>

<p style="margin-left:22%;">Force a multipath device to
switch to a specific path group. $group is the path group
index, starting with 1.</p>

<p style="margin-left:11%;"><b>reconfigure</b></p>

<p style="margin-left:22%;">Reconfigures the multipaths.
This should be triggered automatically after anyi hotplug
event.</p>

<p style="margin-left:11%;"><b>suspend map|multipath
$map</b></p>

<p style="margin-left:22%;">Sets map $map into suspend
state.</p>

<p style="margin-left:11%;"><b>resume map|multipath
$map</b></p>

<p style="margin-left:22%;">Resumes map $map from suspend
state.</p>

<p style="margin-left:11%;"><b>reset map|multipath
$map</b></p>

<p style="margin-left:22%;">Reassign existing device-mapper
table(s) use use the multipath device, instead of its path
devices.</p>

<p style="margin-left:11%;"><b>reload map|multipath
$map</b></p>

<p style="margin-left:22%;">Reload a multipath device.</p>

<p style="margin-left:11%;"><b>fail path $path</b></p>

<p style="margin-left:22%;">Sets path $path into failed
state.</p>

<p style="margin-left:11%;"><b>reinstate path $path</b></p>

<p style="margin-left:22%;">Resumes path $path from failed
state.</p>

<p style="margin-left:11%;"><b>disablequeueing
maps|multipaths</b></p>

<p style="margin-left:22%;">Disable queueing on all
multipath devices.</p>

<p style="margin-left:11%;"><b>restorequeueing
maps|multipaths</b></p>

<p style="margin-left:22%;">Restore queueing on all
multipath devices.</p>

<p style="margin-left:11%;"><b>disablequeueing
map|multipath $map</b></p>

<p style="margin-left:22%;">Disable queuing on multipathed
map $map.</p>

<p style="margin-left:11%;"><b>restorequeueing
map|multipath $map</b></p>

<p style="margin-left:22%;">Restore queuing on multipahted
map $map.</p>

<p style="margin-left:11%;"><b>forcequeueing daemon</b></p>

<p style="margin-left:22%;">Forces multipathd into
queue_without_daemon mode, so that no_path_retry queueing
will not be disabled when the daemon stops.</p>

<p style="margin-left:11%;"><b>restorequeueing
daemon</b></p>

<p style="margin-left:22%;">Restores configured
queue_without_daemon mode.</p>

<p style="margin-left:11%;"><b>map|multipath $map
setprstatus</b></p>

<p style="margin-left:22%;">Enable persistent reservation
management on $map.</p>

<p style="margin-left:11%;"><b>map|multipath $map
unsetprstatus</b></p>

<p style="margin-left:22%;">Disable persistent reservation
management on $map.</p>

<p style="margin-left:11%;"><b>map|multipath $map
getprstatus</b></p>

<p style="margin-left:22%;">Get the current persistent
reservation management status of $map.</p>

<p style="margin-left:11%;"><b>map|multipath $map
getprkey</b></p>

<p style="margin-left:22%;">Get the current persistent
reservation key associated with $map.</p>

<p style="margin-left:11%;"><b>map|multipath $map setprkey
key $key</b></p>

<p style="margin-left:22%;">Set the persistent reservation
key associated with $map to $key in the <i>prkeys_file</i>.
This key will only be used by multipathd if
<i>reservation_key</i> is set to <b>file</b> in
<i>/etc/multipath.conf</i>.</p>

<p style="margin-left:11%;"><b>map|multipath $map
unsetprkey</b></p>

<p style="margin-left:22%;">Remove the persistent
reservation key associated with $map from the
<i>prkeys_file</i>. This will only unset the key used by
multipathd if <i>reservation_key</i> is set to <b>file</b>
in <i>/etc/multipath.conf</i>.</p>

<p style="margin-left:11%;"><b>path $path
setmarginal</b></p>

<p style="margin-left:22%;">move $path to a marginal
pathgroup. The path will remain in the marginal path group
until <i>unsetmarginal</i> is called. This command will only
work if <i>marginal_pathgroups</i> is enabled and there is
no Shaky paths detection method configured (see the
multipath.conf man page for details).</p>

<p style="margin-left:11%;"><b>path $path
unsetmarginal</b></p>

<p style="margin-left:22%;">return marginal path $path to
its normal pathgroup. This command will only work if
<i>marginal_pathgroups</i> is enabled and there is no Shaky
paths detection method configured (see the multipath.conf
man page for details).</p>

<p style="margin-left:11%;"><b>map $map
unsetmarginal</b></p>

<p style="margin-left:22%;">return all marginal paths in
$map to their normal pathgroups. This command will only work
if <i>marginal_pathgroups</i> is enabled and there is no
Shaky paths detection method configured (see the
multipath.conf man page for details).</p>

<p style="margin-left:11%;"><b>quit|exit</b></p>

<p style="margin-left:22%;">End interactive session.</p>

<p style="margin-left:11%;"><b>shutdown</b></p>

<p style="margin-left:22%;">Stop multipathd.</p>

<h2>SYSTEMD INTEGRATION
<a name="SYSTEMD INTEGRATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When compiled
with systemd support two systemd service files are
installed, <i>multipathd.service</i> and
<i>multipathd.socket</i> The <i>multipathd.socket</i>
service instructs systemd to intercept the CLI command
socket, so that any call to the CLI interface will start-up
the daemon if required. The <i>multipathd.service</i> file
carries the definitions for controlling the multipath
daemon. The daemon itself uses the <b>sd_notify</b>(3)
interface to communicate with systemd. The following unit
keywords are recognized: <b><br>
WatchdogSec=</b></p>

<p style="margin-left:22%;">Enables the internal watchdog
from systemd. multipath will send a notification via
<b>sd_notify</b>(3) to systemd to reset the watchdog. If
specified the <i>polling_interval</i> and
<i>max_polling_interval</i> settings will be overridden by
the watchdog settings. Please note that systemd prior to
version 207 has issues which prevent the systemd-provided
watchdog from working correctly. So the watchdog is not
enabled per default, but has to be enabled manually by
updating the <i>multipathd.service</i> file.</p>

<p style="margin-left:11%;"><b>OOMScoreAdjust=</b></p>

<p style="margin-left:22%;">Overrides the internal OOM
adjust mechanism.</p>

<p style="margin-left:11%;"><b>LimitNOFILE=</b></p>

<p style="margin-left:22%;">Overrides the <i>max_fds</i>
configuration setting.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>multipath</b>(8),
<b>kpartx</b>(8), <b>sd_notify</b>(3),
<b>system.service</b>(5).</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>multipath-tools</i>
was developed by Christophe Varoqui
&lt;christophe.varoqui@opensvc.com&gt; and others.</p>
<hr>
</body>
</html>
