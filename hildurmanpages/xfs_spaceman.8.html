<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 03:14:58 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>xfs_spaceman</title>

</head>
<body>

<h1 align="center">xfs_spaceman</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#COMMANDS">COMMANDS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">xfs_spaceman -
show free space information about an XFS filesystem</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>xfs_spaceman</b>
[ <b>-c</b> <i>cmd</i> ] <i>file</i> <b><br>
xfs_spaceman -V</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>xfs_spaceman</b>
reports and controls free space usage in an XFS
filesystem.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>-c</b> <i>cmd</i></p></td>
<td width="6%"></td>
<td width="74%">


<p style="margin-top: 1em"><b>xfs_spaceman</b> commands may
be run interactively (the default) or as arguments on the
command line. Multiple <b>-c</b> arguments may be given. The
commands are run in the sequence given, then the program
exits.</p> </td></tr>
</table>

<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>freesp [
-dgrs ] [-a agno]... [ -b | -e bsize | -h bsize | -m factor
]</b></p>

<p style="margin-left:22%;">With no arguments,
<b>freesp</b> shows a histogram of all free space extents in
the filesystem. The command takes the following options:</p>

<p style="margin-left:26%;"><b>-a agno</b></p>

<p style="margin-left:32%;">Collect free space information
from this allocation group. This option can be specified
multiple times to collect from multiple groups.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-b</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>This argument establishes that the histogram bin sizes
are successive powers of two. This is the default, and is
mutually exclusive with the <b>-e</b>, <b>-h</b>, and
<b>-m</b> options.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Print debugging information such as the raw free space
extent information.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-g</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Print the free space block and extent counts for each
AG.</p> </td></tr>
</table>

<p style="margin-left:26%;"><b>-e bsize</b></p>

<p style="margin-left:32%;">Set all histogram bin sizes to
a specific value. This option is mutually exclusive with the
<b>-b</b>, <b>-h</b>, and <b>-m</b> options.</p>

<p style="margin-left:26%;"><b>-h bsize</b></p>

<p style="margin-left:32%;">Create a histogram bin with a
lower bound of this value. The upper bound of this bin will
be one less than the lower bound of the next highest
histogram bin. This option can be given multiple times to
control the exact bin sizes. This option is mutually
exclusive with the <b>-b</b>, <b>-e</b>, and <b>-m</b>
options.</p>

<p style="margin-left:26%;"><b>-m factor</b></p>

<p style="margin-left:32%;">Create each histogram bin with
a size that is this many times the size of the prvious bin
created. This option is mutually exclusive with the
<b>-b</b>, <b>-e</b>, and <b>-h</b> options.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-r</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Query the realtime device for free space
information.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-s</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Display a summary of the free space information
found.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>info</b></p></td>
<td width="3%"></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Displays
selected geometry information about the filesystem. The
opened file must be a mount point of a XFS filesystem. The
output will have the same format that <b>xfs_info</b>(8)
prints when querying a filesystem.</p>

<p style="margin-left:11%;"><b>health [ -a agno] [ -c ] [
-f ] [ -i inum ] [ -q ] [ paths ]</b></p>

<p style="margin-left:22%;">Reports the health of the given
group of filesystem metadata.</p>

<p style="margin-left:26%;"><b>-a agno</b></p>

<p style="margin-left:32%;">Report on the health of the
given allocation group.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-c</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Scan all inodes in the filesystem and report each
file&rsquo;s health status. If the <b>-a</b> option is
given, scan only the inodes in that AG.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-f</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Report on the health of metadata that affect the entire
filesystem.</p> </td></tr>
</table>

<p style="margin-left:26%;"><b>-i inum</b></p>

<p style="margin-left:32%;">Report on the health of a
specific inode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-q</b></p></td>
<td width="3%"></td>
<td width="48%">


<p>Report only unhealthy metadata.</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:26%;"><b>paths</b></p>

<p style="margin-left:32%;">Report on the health of the
files at the given path.</p>

<p style="margin-left:11%;"><b>help [</b> command
<b>]</b></p>

<p style="margin-left:22%;">Display a brief description of
one or all commands.</p>

<p style="margin-left:11%;"><b>prealloc [ -u id ] [ -g id ]
[ -p id ] [ -m minlen ] [ -s ]</b></p>

<p style="margin-left:22%;">Removes speculative
preallocation. If no <b>-u</b>, <b>-g</b>, or <b>-p</b>
options are given, this command acts on all files. The
command takes the following options:</p>

<p style="margin-left:26%;"><b>-u uid</b></p>

<p style="margin-left:32%;">Clear all speculative
preallocations for files with this user id. This option can
be given in combination with the <b>-g and -p</b>
options.</p>

<p style="margin-left:26%;"><b>-g gid</b></p>

<p style="margin-left:32%;">Clear all speculative
preallocations for files with this group id. This option can
be given in combination with the <b>-u and -p</b>
options.</p>

<p style="margin-left:26%;"><b>-p pid</b></p>

<p style="margin-left:32%;">Clear all speculative
preallocations for files with this project id. This option
can be given in combination with the <b>-u and -g</b>
options.</p>

<p style="margin-left:26%;"><b>-m minlen</b></p>

<p style="margin-left:32%;">Ignore all files smaller than
this size. Units can be supplied for this argument.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>-s</b></p></td>
<td width="3%"></td>
<td width="45%">


<p>Wait for removal to complete.</p></td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>print</b></p></td>
<td width="3%"></td>
<td width="45%"></td>
<td width="23%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Display a list
of all open files.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>quit</b></p></td>
<td width="5%"></td>
<td width="27%">


<p style="margin-top: 1em">Exit <b>xfs_spaceman</b>.</p></td>
<td width="51%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>trim ( -a agno | -f |</b>
<i>offset length</i> <b>) [ -m minlen ]</b></p>

<p style="margin-left:22%;">Instructs the underlying
storage device to release all storage that may be backing
free space in the filesystem. The command takes the
following options: (One of <b>-a</b>, <b>-f</b>, or the
<i>offset</i>/<i>length</i> pair are required.)</p>

<p style="margin-left:26%;"><b>-a agno</b></p>

<p style="margin-left:32%;">Trim free space extents in the
given allocation group. This option is mutually exclusive
with the <b>-f</b> option and the
<i>offset</i>/<i>length</i> options.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="3%">


<p><b>-f</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Trim all free space in the filesystem. This option is
mutually exclusive with the <b>-a</b> option and the
<i>offset</i>/<i>length</i> options.</p></td></tr>
</table>

<p style="margin-left:26%;"><i>option</i>,
<i>length</i></p>

<p style="margin-left:32%;">Trim all free space within the
physical range defined by the <i>offset</i> and
<i>length</i> from this filesystem. Units can be appended to
these arguments. This option is mutually exclusive with the
<b>-a</b> and <b>-f</b> options.</p>

<p style="margin-left:26%;"><b>-m minlen</b></p>

<p style="margin-left:32%;">Do not trim free space extents
shorter than this length. Units can be appended to this
argument.</p>
<hr>
</body>
</html>
