<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Thu Sep  8 02:55:57 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MTR-PACKET</title>

</head>
<body>

<h1 align="center">MTR-PACKET</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#REQUESTS">REQUESTS</a><br>
<a href="#REPLIES">REPLIES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#LANGUAGE BINDINGS">LANGUAGE BINDINGS</a><br>
<a href="#CONTACT INFORMATION">CONTACT INFORMATION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">mtr-packet -
send and receive network probes</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>mtr-packet</b>
is a tool for sending network probes to measure network
connectivity and performance. Many network probes can be
sent simultaneously by a single process instance of
<b>mtr-packet</b> and additional probes can be generated by
an instance of <b>mtr-packet</b> which already has network
probes in flight. It is intended to be used by programs
which invoke it with Unix pipes attached to its standard
input and output streams.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mtr-packet</b>
reads command requests from <i>stdin</i>, each separated by
a newline character, and responds with command replies to
<i>stdout</i>, also each separated by a newline character.
The syntactic structure of requests and replies are the
same. The following format is used:</p>

<p style="margin-left:22%; margin-top: 1em"><i>TOKEN
COMMAND</i> [<i>ARGUMENT-NAME ARGUMENT-VALUE</i> ...]</p>

<p style="margin-left:11%; margin-top: 1em"><i>TOKEN</i> is
a unique integer value. The same value will be used as the
<i>TOKEN</i> for the response. This is necessary for
associating replies with requests, as commands may be
completed in a different order than they are requested. The
invoker of <b>mtr-packet</b> should always use the
<i>TOKEN</i> value to determine which command request has
completed.</p>

<p style="margin-left:11%; margin-top: 1em"><i>COMMAND</i>
is a string identifying the command request type. A common
command is <b>send-probe</b>, which will transmit one
network probe.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ARGUMENT-NAME</i>
strings and <i>ARGUMENT-VALUE</i> strings always come in
pairs. It is a syntactic error to provide an
<i>ARGUMENT-NAME</i> without a corresponding
<i>ARGUMENT-VALUE</i>. Valid <i>ARGUMENT-NAME</i> strings
depend on the <i>COMMAND</i> being used.</p>

<h2>REQUESTS
<a name="REQUESTS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>send-probe</b></p>

<p style="margin-left:22%;">Send a network probe to a
particular IP address. Either an <b>ip-4</b> or <b>ip-6</b>
argument must be provided. A valid <b>send-probe</b> command
will reply with <b>reply</b>, <b>no-reply</b>, or
<b>ttl-expired</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The following
arguments may be used:</p>

<p style="margin-left:22%; margin-top: 1em"><b>ip-4</b>
<i>IP-ADDRESS</i></p> </table>

<p style="margin-left:32%; margin-top: 1em">The Internet
Protocol version 4 address to probe.</p></table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>ip-6</b></p><td width="29%"></td>
<td width="16%">


<p style="margin-top: 1em"><i>IP-ADDRESS</i></p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The Internet
Protocol version 6 address to probe.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>protocol</b></p><td width="35%"></td>
<td width="13%">


<p style="margin-top: 1em"><i>PROTOCOL</i></p></td>
<td width="52%">
</td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p>The protocol to use for the network probe. <b>icmp</b>,
<b>sctp</b>, <b>tcp</b>, and <b>udp</b></p><td width="52%"></td>
<td width="48%">


<p style="margin-top: 1em">may be used. The default
protocol is <b>icmp.</b></p></td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>port</b></p><td width="29%"></td>
<td width="17%">


<p style="margin-top: 1em"><i>PORT-NUMBER</i></p></td>
<td width="54%">
</td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p>The destination port to use for <b>sctp</b>, <b>tcp</b>,
or <b>udp</b></p><td width="109%"></td>
<td width="-9%">


<p style="margin-top: 1em">probes.</p></td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>local-ip-4</b></p><td width="38%"></td>
<td width="16%">


<p style="margin-top: 1em"><i>IP-ADDRESS</i></p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The local
Internet Procol version 4 address to use when sending
probes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>local-ip-6</b></p><td width="38%"></td>
<td width="16%">


<p style="margin-top: 1em"><i>IP-ADDRESS</i></p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The local
Internet Protocol version 6 address to use when sending
probes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>local-port</b></p><td width="38%"></td>
<td width="17%">


<p style="margin-top: 1em"><i>PORT-NUMBER</i></p></td>
<td width="45%">
</td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p>For <b>udp</b></p><td width="32%"></td>
<td width="68%">


<p style="margin-top: 1em">probes, the local port number
from which to send probes.</p></td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>timeout</b></p><td width="34%"></td>
<td width="23%">


<p style="margin-top: 1em"><i>TIMEOUT-SECONDS</i></p></td>
<td width="43%">
</td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p>The number of seconds to wait for a response to the
probe before discarding the probe as lost, and generating a
<b>no-reply</b></p> <td width="46%"></td>
<td width="22%">


<p style="margin-top: 1em">command reply.</p></td>
<td width="32%">
</td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>ttl</b></p><td width="28%"></td>
<td width="18%">


<p style="margin-top: 1em"><i>TIME-TO-LIVE</i></p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The
time-to-live value for the Internet Protocol packet header
used in constructing the probe. This value determines the
number of network hops through which the probe will travel
before a response is generated by an intermediate network
host.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>size</b></p><td width="29%"></td>
<td width="17%">


<p style="margin-top: 1em"><i>PACKET-SIZE</i></p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The size of the
packet used to send the probe, in bytes, including the
Internet Protocol header and transport protocol header.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>bit-pattern</b></p><td width="40%"></td>
<td width="20%">


<p style="margin-top: 1em"><i>PATTERN-VALUE</i></p></td>
<td width="40%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The packet
payload is filled with bytes of the value specified. Valid
pattern values are in the range 0 through 255.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>tos</b></p><td width="28%"></td>
<td width="23%">


<p style="margin-top: 1em"><i>TYPE-OF-SERVICE</i></p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">In the case of
IPv4, the &quot;type of service&quot; field in the IP header
is set to this value. In the case of IPv6, the &quot;traffic
class&quot; field is set.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>mark</b></p><td width="29%"></td>
<td width="19%">


<p style="margin-top: 1em"><i>ROUTING-MARK</i></p></td>
<td width="52%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The packet mark
value to be used by mark-based routing. (Available only on
Linux.)</p>

<p><b>check-support</b></p></table>

<p style="margin-left:22%;">Check for support for a
particular feature in this version of <b>mtr-packet</b> and
in this particular operating environment.
<b>check-support</b> will reply with
<b>feature-supported</b>. A <b>feature</b> argument is
required.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>feature</b></p><td width="34%"></td>
<td width="18%">


<p style="margin-top: 1em"><i>FEATURE-NAME</i></p></td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The name of a
feature requested.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p>Some features which can be checked are
<b>send-probe</b>, <b>ip-4</b>, <b>ip-6</b>, <b>icmp</b>,
<b>sctp</b>, <b>tcp</b>, <b>udp</b>, and <b>mark</b>. The
feature <b>version</b></p><td width="22%"></td>
<td width="78%">


<p style="margin-top: 1em">can be checked to retrieve the
version of <b>mtr-packet</b>.</p></td></tr>
</table>

<h2>REPLIES
<a name="REPLIES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>reply</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">The destination host received
the <b>send-probe</b> probe and replied. Arguments of
<b>reply</b> are:</p></td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>ip-4</b></p><td width="29%"></td>
<td width="16%">


<p style="margin-top: 1em"><i>IP-ADDRESS</i></p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The Internet
Protocol version 4 address of the host which replied to the
probe.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>ip-6</b></p><td width="29%"></td>
<td width="16%">


<p style="margin-top: 1em"><i>IP-ADDRESS</i></p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The Internet
Protocol version 6 address of the host which replied to the
probe.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>round-trip-time</b></p><td width="46%"></td>
<td width="6%">


<p style="margin-top: 1em"><i>TIME</i></p></td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The time which
passed between the transmission of the probe and its
response. The time is provided as a integral number of
microseconds elapsed.</p>

<p><b>no-reply</b></p></table>

<p style="margin-left:22%;">No response to the probe
request was received before the timeout expired.</p>

<p style="margin-left:11%;"><b>ttl-expired</b></p>

<p style="margin-left:22%;">The time-to-live value of the
transmitted probe expired before the probe arrived at its
intended destination. Arguments of <b>ttl-expired</b>
are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>ip-4</b></p><td width="29%"></td>
<td width="16%">


<p style="margin-top: 1em"><i>IP-ADDRESS</i></p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The Internet
Protocol version 4 address of the host at which the
time-to-live value expired.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>ip-6</b></p><td width="29%"></td>
<td width="16%">


<p style="margin-top: 1em"><i>IP-ADDRESS</i></p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The Internet
Protocol version 6 address of the host at which the
time-to-live value expired.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>round-trip-time</b></p><td width="46%"></td>
<td width="6%">


<p style="margin-top: 1em"><i>TIME</i></p></td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The time which
passed between the transmission of the probe and its
response. The time is provided as a integral number of
microseconds elapsed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>mpls</b></p><td width="29%"></td>
<td width="23%">


<p style="margin-top: 1em"><i>MPLS-LABEL-LIST</i></p></td>
<td width="48%">
</td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p>A list of Multiprotocol Label Switching values returned
with the probe response. If the <b>mpls</b></p><td width="32%"></td>
<td width="68%">


<p style="margin-top: 1em">argument is present, one or more
MPLS labels will be represented by a comma separated list of
values. The values are provided in groups of four. The first
four values in the list correspond to the first MPLS label,
the next four values correspond to the second MPLS label,
and so on. The values are provided in this order:
<i>label</i>, <i>traffic-class</i>, <i>bottom-of-stack</i>,
<i>ttl</i>.</p> </td></tr>
</table>

<p><b>no-route</b></p></table>

<p style="margin-left:22%;">There was no route to the host
used in a <b>send-probe</b> request.</p>

<p style="margin-left:11%;"><b>network-down</b></p>

<p style="margin-left:22%;">A probe could not be sent
because the network is down.</p>

<p style="margin-left:11%;"><b>probes-exhausted</b></p>

<p style="margin-left:22%;">A probe could not be sent
because there are already too many unresolved probes in
flight.</p>

<p style="margin-left:11%;"><b>permission-denied</b></p>

<p style="margin-left:22%;">The operating system denied
permission to send the probe with the specified options.</p>

<p style="margin-left:11%;"><b>invalid-argument</b></p>

<p style="margin-left:22%;">The command request contained
arguments which are invalid.</p>

<p style="margin-left:11%;"><b>feature-support</b></p>

<p style="margin-left:22%;">A reply to provided to
<b>check-support</b> indicating the availability of a
particular feature. The argument provided is:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p><b>support</b></p><td width="34%"></td>
<td width="11%">


<p style="margin-top: 1em"><i>PRESENT</i></p></td>
<td width="55%">
</td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p>In most cases, the <i>PRESENT</i></p><td width="32%"></td>
<td width="68%">


<p style="margin-top: 1em">value will be either <b>ok</b>,
indicating the feature is supported, or <b>no</b>,
indicating no support for the feature.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">In the case
that <b>version</b> is the requested <i>FEATURE-NAME</i>,
the version of <b>mtr-packet</b> is provided as the
<i>PRESENT</i> value.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A controlling
program may start <b>mtr-packet</b> as a child process and
issue the following command on <i>stdin</i>:</p>

<p style="margin-left:22%; margin-top: 1em">42 send-probe
ip-4 127.0.0.1</p>

<p style="margin-left:11%; margin-top: 1em">This will send
a network probe to the loopback interface. When the probe
completes, <b>mtr-packet</b> will provide a response on
<i>stdout</i> such as the following:</p>

<p style="margin-left:22%; margin-top: 1em">42 reply ip-4
127.0.0.1 round-trip-time 126</p>

<p style="margin-left:11%; margin-top: 1em">This indicates
that the loopback address replied to the probe, and the
round-trip time of the probe was 126 microseconds.</p>

<p style="margin-left:11%; margin-top: 1em">In order to
trace the route to a remote host, multiple <b>send-probe</b>
commands, each with a different <b>ttl</b> value, are
used.</p>

<p style="margin-left:22%; margin-top: 1em">11 send-probe
ip-4 8.8.8.8 ttl 1 <br>
12 send-probe ip-4 8.8.8.8 ttl 2 <br>
13 send-probe ip-4 8.8.8.8 ttl 3 <br>
...</p>

<p style="margin-left:11%; margin-top: 1em">Each
interemediate host would respond with a <b>ttl-expired</b>
message, and the destination host would respond with a
<b>reply</b>:</p>

<p style="margin-left:22%; margin-top: 1em">11 ttl-expired
ip-4 192.168.254.254 round-trip-time 1634 <br>
12 ttl-expired ip-4 184.19.243.240 round-trip-time 7609 <br>
13 ttl-expired ip-4 172.76.20.169 round-trip-time 8643 <br>
14 ttl-expired ip-4 74.40.1.101 round-trip-time 9755 <br>
15 ttl-expired ip-4 74.40.5.126 round-trip-time 10695 <br>
17 ttl-expired ip-4 108.170.245.97 round-trip-time 14077
<br>
16 ttl-expired ip-4 74.40.26.131 round-trip-time 15253 <br>
18 ttl-expired ip-4 209.85.245.101 round-trip-time 17080
<br>
19 reply ip-4 8.8.8.8 round-trip-time 17039</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
replies in this example are printed out of order. (The reply
to probe 17 arrives prior to the reply to probe 16.) This is
the reason that it is important to send commands with unique
token values, and to use those token values to match replies
with their originating commands.</p>

<h2>LANGUAGE BINDINGS
<a name="LANGUAGE BINDINGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A Python 3.x
package for sending asynchronous network probes using
mtr-packet is available. See
<a href="https://pypi.org/project/mtrpacket/">https://pypi.org/project/mtrpacket/</a></p>

<h2>CONTACT INFORMATION
<a name="CONTACT INFORMATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For the latest
version, see the mtr web page at
<a href="http://www.bitwizard.nl/mtr/">http://www.bitwizard.nl/mtr/</a></p>

<p style="margin-left:11%; margin-top: 1em">For patches,
bug reports, or feature requests, please open an issue on
GitHub at:
<a href="https://github.com/traviscross/mtr">https://github.com/traviscross/mtr</a>.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>mtr</b>(8),
<b>icmp</b>(7), <b>tcp</b>(7), <b>udp</b>(7), TCP/IP
Illustrated (Stevens, ISBN 0201633469).</p>
<hr>
</body>
</html>
